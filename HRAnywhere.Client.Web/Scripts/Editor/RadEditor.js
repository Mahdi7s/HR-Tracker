Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.Utils={setElementClassName:function(c,b){if(!c){return"";
}if(!b){c.className="";
c.removeAttribute("class",0);
c.removeAttribute("classname",0);
}else{var a=c.className;
c.className=b;
return a;
}},addElementsToSelection:function(c,f){if($telerik.isIE){Telerik.Web.UI.Editor.Utils.selectElement(c,f[0]);
return 1;
}var e=c.getSelection();
var d=new Telerik.Web.UI.Editor.Selection(c);
var b=d.getRange();
if(!b||!b.selectNodeContents){return -1;
}if(e.removeAllRanges){e.removeAllRanges();
}for(var a=0;
a<f.length;
a++){b.selectNodeContents(f[a]);
e.addRange(b);
}return f.length;
},getFullySelectedElement:function(a){return $telerik.isIE?Telerik.Web.UI.Editor.Utils._getFullySelectedElementIE(a):Telerik.Web.UI.Editor.Utils._getFullySelectedElementMoz(a);
},_isListFullySelected:function(b,c){if(b.tagName=="UL"||b.tagName=="OL"){var a=c.match(/<LI\/?>/gi);
if(a.length==b.getElementsByTagName("LI").length){return true;
}}return false;
},_getFullySelectedElementIE:function(p){var k=new Telerik.Web.UI.Editor.Selection(p);
var h=k.getRange();
var m=(h.length>0?h.item(0):h.parentElement());
if(h.length>0){return m;
}else{if(m.tagName=="A"){var f=h.duplicate();
f.moveToElementText(m);
if(h.inRange(f)){return m;
}}else{if(Telerik.Web.UI.Editor.Utils._isListFullySelected(m,k.getHtml())){return m;
}else{if(!h.htmlText){return null;
}}}}var n=h.duplicate();
var e=h.duplicate();
n.collapse(true);
e.collapse(false);
var o=n.parentElement();
if(o.parentNode==m){o=m;
}var c=e.parentElement();
if(o==c){var b=p.document;
var g=b.body.createTextRange();
g.moveToElementText(o);
var d=h.htmlText;
var a=false;
var l=o.outerHTML.replace(/[\r\n\t]/ig,"");
var i=o.innerHTML.replace(/[\r\n\t]/ig,"");
d=d.replace(/[\r\n\t]/ig,"");
if(l==d||i==d){a=true;
}if(a||(0==g.compareEndPoints("StartToStart",h)&&0==g.compareEndPoints("EndToEnd",h))){if("BODY"!=m.tagName){return m;
}}}},_getFullySelectedElementMoz:function(n){var c=n.document;
var l=n.getSelection();
if(l.rangeCount<1){return null;
}var h=l.getRangeAt(0);
var g=h.commonAncestorContainer;
var k=g.parentNode;
var i=new Telerik.Web.UI.Editor.Selection(n);
if($telerik.isFirefox){var m=i.getHtml();
var b=document.createElement("div");
b.innerHTML=m;
if(b.childNodes.length==1&&b.firstChild.nodeType==1){var e=b.firstChild.tagName;
var a=h.startContainer;
if(a.nodeType==1){if(a.tagName==e){return a;
}else{if(a.getElementsByTagName){a=a.getElementsByTagName(e)[0];
if(a){return a;
}}}}else{while(a){if(e==a.tagName){return a;
}a=a.nextSibling;
}}}}if(g.tagName=="BODY"){var f=i.getParentElement();
if(f&&f.tagName!="BODY"){return f;
}}else{var d=c.createElement("span");
d.appendChild(h.cloneContents());
if(d.innerHTML==k.innerHTML&&k.tagName!="BODY"){return k;
}}if(Telerik.Web.UI.Editor.Utils._isListFullySelected(g,i.getHtml())){return g;
}},cleanPastedContent:function(e,a,b,c){var d=e;
if(a==Telerik.Web.UI.StripFormattingOptions.None){if((e.match(/style="[^"]*?mso[^"]*?"/ig)||e.match(/class="?[^"]*?mso[^"]*?"?/ig))&&confirm(b)){e=Telerik.Web.UI.Editor.Utils.convertWordLists(e);
d=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"WORD");
}}else{if(a&Telerik.Web.UI.StripFormattingOptions.All){d=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"ALL");
}else{if(a&Telerik.Web.UI.StripFormattingOptions.AllExceptNewLines){d=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"ALL_NO_BRAKES");
}else{if(a&Telerik.Web.UI.StripFormattingOptions.ConvertWordLists){e=Telerik.Web.UI.Editor.Utils.convertWordLists(e);
}if(a&Telerik.Web.UI.StripFormattingOptions.MSWordRemoveAll){e=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"WORD_ALL");
}if(a&Telerik.Web.UI.StripFormattingOptions.MSWordNoFonts){e=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"WORD_NO_FONTS");
}if(a&Telerik.Web.UI.StripFormattingOptions.MSWord){e=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"WORD");
}if(a&Telerik.Web.UI.StripFormattingOptions.Css){e=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"CSS");
}if(a&Telerik.Web.UI.StripFormattingOptions.Font){e=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"FONT");
}if(a&Telerik.Web.UI.StripFormattingOptions.Span){e=Telerik.Web.UI.Editor.Utils.stripFormatting(e,"SPAN");
}d=e;
}}}if(null!=c&&false==c){d=Telerik.Web.UI.Editor.Utils.stripFormatting(d,"SCRIPT");
}return d;
},isCursorMovingKey:function(a){if(a>=33&&a<=40){return true;
}return false;
},isSystemKey:function(a){if(a>=112&&a<=123){return true;
}if(a>=8&&a<=27){return true;
}if(a>=32&&a<=46){return true;
}if(a==93){return true;
}return false;
},storeBrowserPosition:function(){var a=document.body;
var b=document.documentElement;
this._browserTop=a.scrollTop>b.scrollTop?a.scrollTop:b.scrollTop;
this._browserLeft=a.scrollLeft>b.scrollLeft?a.scrollTop:b.scrollLeft;
return{x:this._browserLeft,y:this._browserTop};
},restoreBrowserPosition:function(b,d){try{if(null==b){b=this._browserLeft;
}if(null==d){d=this._browserTop;
}var e=document.body;
var c=document.documentElement;
e.scrollTop=d;
e.scrollLeft=b;
c.scrollTop=d;
c.scrollLeft=b;
}catch(a){}},_getPasteIframe:function(a){a=a||document;
if(!this._pasteIframe){if($telerik.isSafari){this._pasteIframe=a.createElement("div");
this._pasteIframe.id="radePasteHelper";
var c=this._pasteIframe.style;
c.position="absolute";
c.left=-10000;
c.border="0px solid red";
c.top=a.body.scrollTop;
c.width=1;
c.height=1;
c.overflow="hidden";
a.body.appendChild(this._pasteIframe);
}else{this._pasteIframe=document.createElement("iframe");
this._pasteIframe.setAttribute("title","Paste helper element.");
var b=this._pasteIframe.style;
b.width="1px";
b.height="1px";
b.border="0px solid red";
b.overflow="hidden";
b.position="absolute";
a.body.appendChild(this._pasteIframe);
try{var g=this._pasteIframe.contentWindow.document;
var f=g.open("text/html","replace");
var d="<html><head><title>New Document</title></head><body contentEditable='true' style='overflow:hidden;margin:0px;padding:0px;height:100%'></html>";
f.write(d);
f.close();
}catch(h){}}}return this._pasteIframe;
},getPasteContainer:function(a){var b=this._getPasteIframe(a);
return $telerik.isSafari?b:b.contentWindow.document.body;
},clearPasteContainer:function(){this._pasteIframe.parentNode.removeChild(this._pasteIframe);
this._pasteIframe=null;
},getClipboardAsHtml:function(){var b=this.getPasteContainer();
b.innerHTML="";
if(b.setActive){b.setActive();
}document.execCommand("Paste",null);
var a=b.innerHTML;
b.innerHTML="";
return a;
},convertWordLists:function(h){var s=function(p,t){if(!p){return 0;
}if(typeof(p.length)!="undefined"){for(var v=0,u=p.length;
v<u;
v++){if(t.call(p,p[v],v,p)===false){return 0;
}}}return 1;
};
var r=function(t,p){if(t){for(var v=0,u=t.length;
v<u;
v++){if(t[v]===p){return v;
}}}return -1;
};
var o=function(u,t){var p=[];
if(u&&t){var i=u.parentNode;
while(i){if(i.tagName&&i.tagName.toLowerCase()==t.toLowerCase()){p.push(i);
}i=i.parentNode;
}}return p;
};
h=h.replace(/<!--\[if !supportLists\]-->/gi,"_TELERIK_I_");
h=h.replace(/(<span[^>]+:\s*symbol[^>]+>)/gi,"$1_TELERIK_I_");
h=h.replace(/(<span[^>]+mso-list:[^>]+>)/gi,"$1_TELERIK_I_");
h=h.replace(/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1_TELERIK_I_");
var c=document.createElement("div");
c.innerHTML=h;
var e=c.getElementsByTagName("P");
for(var m=e.length-1;
m>=0;
m--){var k=e[m];
if(!k.innerHTML){k.parentNode.removeChild(k);
}}var d,a,l=-1,n,q=[],g,b=[];
s(e,function(x){if(!x){return;
}var y="",A,J="",G="";
for(var F=x.firstChild;
F&&F.nodeType==3;
F=F.nextSibling){y+=F.nodeValue;
}y=x.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g,"\u00a0");
if(/^(_TELERIK_I_)+[\u2022\u00b7\u00a7\u00d8o]\s*\u00a0*/.test(y)){A="ul";
x.innerHTML=x.innerHTML.replace(/(<span[^>]+style="font[^>]+>)/gi,"$1_TELERIK_I_");
}if(/^_TELERIK_I_[\s\u00a0]*\w+\.\s*\u00a0{2,}/.test(y)){A="ol";
}if(A){n=parseFloat(x.style.marginLeft||0);
if(n>l){q.push(n);
}if(!d||A!=g){d=document.createElement(A);
var B=x.parentNode;
var t=x.nextSibling;
if(t){B.insertBefore(d,t);
}else{B.appendChild(d);
}}else{if(n>l){d=a.appendChild(document.createElement(A));
}else{if(n<l){var v=o(d.parentNode,A);
d=v[v.length-1-r(q,n)]||d;
}}}pChildsLength=x.childNodes.length;
if(pChildsLength>0){if(!$telerik.isFirefox){firstChild=x.childNodes[0];
if(firstChild.tagName=="SPAN"){if(firstChild.style.color){G=firstChild.style.color;
}for(var C=1;
C<pChildsLength;
C++){var E=$telerik.getOuterHtml(x.childNodes[C]);
J+=E;
}}}else{var K=x.getElementsByTagName("SPAN");
if(K.length>0){var w=K[0];
if(w.style.color){G=w.style.color;
}}var D=x.innerHTML;
var I=D.split("<!--[endif]-->");
if(I.length==2){J=I[1].replace("<o:p></o:p>","");
}}}if(!J){if(A=="ul"){J=y.replace(/_TELERIK_I_/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o]\s*(&nbsp;|\u00a0)+\s*/,"");
}else{J=y.replace(/_TELERIK_I_/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,"");
}}sElements=x.getElementsByTagName("SPAN");
if(sElements.length>0){var H=[];
s(sElements,function(i){if(!i){return;
}var p=i.innerHTML;
if(/^_TELERIK_I_[\s\S]*[?o]/.test(p)){H.push(i);
}if(A!="ul"&&/^[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(p)){H.push(i);
}});
for(var C=0,z=H.length;
C<z;
C++){var u=H[C];
if(u&&u.parentNode){u.parentNode.removeChild(u);
}}}a=document.createElement("li");
if(G){a.style.color=G;
}a.innerHTML=J;
d.appendChild(a);
b.push(x);
l=n;
g=A;
}else{d=l=0;
}});
for(var m=0;
m<b.length;
m++){var f=b[m];
f.parentNode.removeChild(f);
}return c.innerHTML.replace(/_TELERIK_I_/g,"");
},stripFormatting:function(b,a){switch(a){case"ALL":b=b.replace(new RegExp("<(SCRIPT|STYLE)([^>]*)>[\\s\\S]*?</(\\1)([^>]*)>","ig"),"");
b=b.replace(new RegExp("<!--[\\s\\S]*?-->","ig"),"");
b=b.replace(/<\/?[^>]*>/ig,"");
break;
case"ALL_NO_BRAKES":b=b.replace(/<!\[endif\]-->[\s\n\r]*</ig,"<![endif]--><");
b=b.replace(/<BR(\s[^>]*)?\/?>/ig,"~RADEDITORBRAKE~");
b=b.replace(new RegExp("<(SCRIPT|STYLE)([^>]*)>[\\s\\S]*?</(\\1)([^>]*)>","ig"),"");
b=b.replace(new RegExp("<!--[\\s\\S]*?-->","ig"),"");
b=b.replace(/<\/?[^>]*>/ig,"");
b=b.replace(/~RADEDITORBRAKE~/ig,"<br/>");
b=b.replace(/\n/ig,"<br/>");
b=b.replace(/\r/ig,"");
break;
case"WORD":case"WORD_ALL":case"WORD_NO_FONTS":b=this.stripWordFormatting(b,a);
break;
case"CSS":b=b.replace(new RegExp("(<[^>]+) class=[^ |^>]*([^>]*>)","ig"),"$1 $2");
b=b.replace(/(<[^>]+) style="[^"]*"([^>]*>)/ig,"$1 $2");
break;
case"FONT":b=b.replace(/<\/?font[^>]*>/ig,"");
break;
case"SPAN":b=b.replace(/<\/?span[^>]*>/ig,"");
break;
case"SCRIPT":b=b.replace(new RegExp("<(SCRIPT)([^>]*)/>","ig"),"");
b=b.replace(new RegExp("<(SCRIPT)([^>]*)>[\\s\\S]*?</(SCRIPT)([^>]*)>","ig"),"");
break;
default:break;
}return b;
},replaceNewLineWithBr:function(b){try{b=b.replace(/\n/g,"<br>");
return b;
}catch(a){}},convertText2Html:function(a){try{a=a.replace(/</g,"&lt;");
a=a.replace(/>/g,"&gt;");
a=a.replace(/\n/g,"<br>");
return a;
}catch(b){}},clearWordAttributesInElement:function(g,b){var e=$telerik.isIE?g.all:g.getElementsByTagName("*");
for(var a=0;
a<e.length;
a++){var c=e[a];
var f=new RegExp("mso","gi");
if(c.nodeType==1){if(f.exec(c.className)){c.className="";
}c.removeAttribute("lang","",0);
c.removeAttribute("stylw","",0);
c.style.cssText=c.style.cssText.replace(/(([\w-]*?mso[\w-]*?):(.+?)([;^$]|$))/gi,"");
if($telerik.isIE){c.style.removeAttribute("tab-stops",0);
c.style.removeAttribute("textIndent",0);
}if($telerik.isIE&&(b=="WORD_NO_FONTS"||b=="WORD_ALL")){c.style.removeAttribute("fontFamily",0);
c.removeAttribute("face",0);
}if(c.style&&c.style.fontFamily){c.style.fontFamily=c.style.fontFamily.replace(/('|"|&quot;)/g,"");
}for(j=c.attributes.length-1;
j>=0;
j--){var d=c.attributes[j];
if("null"!=d.value&&""!=d.value){if(f.exec(d.name)||f.exec(d.value)){c.removeAttribute(d.name);
}}}}}},stripWordFormatting:function(d,b){var c=d;
if(b=="WORD_ALL"){var e=/<SPAN[^>]*?>([\s\S]*?)<\/SPAN[^>]*?>/ig;
while(c.match(e)){c=c.replace(e,"$1");
}var a=/<FONT[^>]*?>([\s\S]*?)<\/FONT[^>]*?>/ig;
while(c.match(a)){c=c.replace(a,"$1");
}}c=c.replace(/<span>([^<>]+)<\/span>/gi,"<span EditorSaved='true'>$1</span>");
c=c.replace(/<font>([^<>]+)<\/font>/gi,"<font EditorSaved='true'>$1</font>");
if($telerik.isFirefox){c=c.replace(/<(?:link|meta) [^>]+>/ig,"");
c=c.replace(/<!--\[if [^\]]+]>[\s\S]+?<!\[endif\]-->/ig,"");
c=c.replace(/<style[^>]*?>[\s\S]*?<\/style>/ig,"");
}c=c.replace(/<o:p>&nbsp;<\/o:p>/gi,"");
c=c.replace(/<\/?o:[^>]*>/gi,"");
c=c.replace(/ class=\"(mso[^\"]*)\"/gi,"");
c=c.replace(/ class=(mso\w+)/gi,"");
c=c.replace(/<!--[\s\S]+?-->/gi,"");
c=c.replace(/<\\?\?xml[^>]*>/gi,"");
c=c.replace(/^(?:\s|&nbsp;)+/i,"");
c=c.replace(/(?:\s|&nbsp;)+$/i,"");
var f=document.createElement("div");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(f,c);
this.clearWordAttributesInElement(f,b);
c=f.innerHTML;
c=c.replace(/\t/g," ");
c=c.replace(/<\/?\w+:[^>]*>/gi,"");
c=c.replace(/<\\?\??xml[^>]>/gi,"");
c=c.replace(/<p>&nbsp;<\/p>/gi,"<BR><BR>");
c=c.replace(/[ ]+/g," ");
c=c.replace(/<st1:.*?>/gi,"");
c=c.replace(/<font>([^<>]+)<\/font>/gi,"$1");
c=c.replace(/<span>([^<>]+)<\/span>/gi,"$1");
c=c.replace(/[\s]+EditorSaved=[\'\"]true[\'\"]/gi,"");
c=this.cleanStylesOnStripWordFormatting(c);
c=c.replace(/style=(""|'')/ig,"");
c=c.replace(/class=(""|'')/ig,"");
c=c.replace(/v:shape="[^"]+"/ig,"");
c=c.replace(/<span[^>]*>\s*<\/span[^>]*>/ig," ");
c=c.replace(/<font[^>]*>\s*<\/font[^>]*>/ig," ");
c=c.replace(/\s+/ig," ");
return c;
},cleanStylesOnStripWordFormatting:function(a){var b=a+"";
b=b.replace(/(<[^>]*style=["'])([^"']*)(["'][^>]*>)/gi,function(d,e,f,c,g,h){var i=e;
f=f.replace(/(background|-webkit-background)-?[a-z]*: initial;/gi,"");
if($telerik.isFirefox){f=f.replace(/(background:) none repeat scroll 0% 0%/gi,"$1");
}f=f.replace(/line-height: normal;?/gi,"");
f=f.replace(/margin: 0[a-z]{2} 0[a-z]{2} 0[a-z]{2};?/gi,"");
if(!$telerik.isIe){f=f.replace(/margin-?[a-z]*: 0.0001[a-z]{2};?/gi,"");
}i+=f;
i+=c;
return i;
});
return b;
},createTable:function(g,d,b){if(!b){b=document;
}var a=b.createElement("table");
for(var e=0;
e<g;
e++){oRow=a.insertRow(-1);
for(var f=0;
f<d;
f++){oCell=oRow.insertCell(-1);
oCell.innerHTML="&nbsp;";
}}return a;
},getElementParentByTag:function(b,a){if(null==b){return null;
}if(null==a){return b;
}try{while(b&&null!=b.tagName&&b.tagName!=a){if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(b)){break;
}b=b.parentNode;
}return((b.tagName==a)?b:null);
}catch(c){return null;
}},getElementParentByTagWithConstraint:function(c,b,a){if(null==a){a="";
}if(null==c){return null;
}if(null==b){return c;
}try{while(c&&null!=c.tagName&&c.tagName!=b){if(a.indexOf(c.tagName)!=-1){return null;
}if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(c)){break;
}c=c.parentNode;
}return((c.tagName==b)?c:null);
}catch(d){return null;
}},isEditorContentArea:function(a){var b=(a&&(a.tagName=="BODY"||(a.tagName=="DIV"&&Sys.UI.DomElement.containsCssClass(a,"reContentArea"))))?true:false;
return b;
},selectElement:function(f,e){if(!e){return;
}var b=f.document;
var c=null;
if($telerik.isIE){switch(e.tagName){case"TABLE":case"IMG":case"HR":case"INPUT":c=b.body.createControlRange();
c.add(e);
break;
case"UL":case"OL":c=b.body.createTextRange();
c.moveToElementText(e);
var g=c.parentElement();
if(g.tagName!="UL"||g.tagName!="OL"){c.moveEnd("character",-1);
}break;
default:c=b.body.createTextRange();
c.moveToElementText(e);
break;
}if(c){try{c.select();
return true;
}catch(d){return false;
}}}else{if(f.getSelection){c=b.createRange();
c.selectNode(e);
if(window.opera){c.selectNodeContents(e);
}var a=f.getSelection();
if($telerik.isSafari){if(e.tagName!="TD"&&e.tagName!="TH"){a.setBaseAndExtent(c.startContainer,c.startOffset,c.endContainer,c.endOffset);
}}else{a.removeAllRanges();
a.addRange(c);
}return true;
}}return false;
},getOuterHtml:function(a){return $telerik.getOuterHtml(a);
},setElementInnerHtml:function(c,a){var b=$telerik.isIE?this.getStoredOriginalPathsAndAttributes(a):a;
c.innerHTML="<span>&nbsp;</span>"+b;
c.removeChild(c.firstChild);
if($telerik.isIE){this.restoreOriginalPathsAndAttributes(c);
}},removeNode:function(a){var b=a.parentNode;
if(b!=null){while(a.childNodes&&a.childNodes.length>0){b.insertBefore(a.childNodes[0],a);
}b.removeChild(a);
return b;
}return true;
},replaceNode:function(b,a){if(b&&a){var c=$telerik.$(b).wrap("<"+a+"></"+a+">").parent()[0];
$telerik.mergeElementAttributes(b,c);
Telerik.Web.UI.Editor.Utils.removeNode(b);
return c;
}else{return null;
}},MoveToNextCell:function(e,a){var c=Telerik.Web.UI.Editor.Utils.getElementParentByTag(e,"TR");
var d=c.cells[e.cellIndex+1];
if(typeof(d)=="undefined"){var b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(e,"TABLE");
var f=c.rowIndex+1;
nextRow=b.rows[f];
if(typeof(nextRow)!="undefined"){d=nextRow.cells[0];
}else{if(b.rows.length>0&&b.rows[0].cells.length>0){a.fire("InsertRowBelow",{});
d=b.rows[f].cells[0];
}}}if(typeof(d)!="undefined"){Telerik.Web.UI.Editor.Utils.selectCell(d,a);
}},MoveToPreviousCell:function(f,a){var c=Telerik.Web.UI.Editor.Utils.getElementParentByTag(f,"TR");
var h=null;
var e=f.cellIndex;
if(e>0){h=c.cells[e-1];
}else{var b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TABLE");
var g=c.rowIndex;
if(g>0){previousRow=b.rows[g-1];
var d=previousRow.cells;
h=d[d.length-1];
}}Telerik.Web.UI.Editor.Utils.selectCell(h,a);
},selectCell:function(d,c){if(!d||!c){return;
}var b=c.get_document();
if(b.createRange){range=c.get_document().createRange();
range.selectNodeContents(d);
var a=c.get_contentWindow().getSelection();
a.removeAllRanges();
a.addRange(range);
}else{var a=c.getSelection();
a.selectElement(d);
}},getStoredOriginalPathsAndAttributes:function(d){var a=function(l,o,p,f,g,h,i,m,k){if(!f){f="";
g=g+i;
var n=g.search(/(\s|>)/gi);
if(n>0){i=g.substring(n,g.length);
g=g.substring(0,n);
if(g=='""'){g="";
f='"';
}}else{return l;
}}return o+" "+p+"="+f+g+f+' originalAttribute="'+p+'" originalPath="'+g+'"'+i;
};
var e=new RegExp("(<[^>]*?)\\s(href|src)\\s*=\\s*('|\")?([^>]+?)(\\3)([^>]*?>)","ig");
d=d.replace(e,a);
var c=new RegExp('(<!--[^(-->)]+) originalAttribute="(?:href|src)" originalPath="[^"]+"([\\s\\S]*?-->)',"ig");
var b=d.length+1;
while(d.length<b){b=d.length;
d=d.replace(c,"$1$2");
}return d;
},restoreOriginalPathsAndAttributes:function(d){var a=d.getElementsByTagName("*");
for(var b=0;
b<a.length;
b++){var f=a[b];
var e=f.getAttribute("originalPath");
var c=f.getAttribute("originalAttribute");
if(e!=null&&c!=null){f.removeAttribute("originalPath");
f.removeAttribute("originalAttribute");
if(e.toLowerCase().indexOf("mailto:")==0){continue;
}e=e.replace(window.location.href+"#","#");
var g=f.innerHTML;
f.setAttribute(c,e,0);
if(g!=f.innerHTML){f.innerHTML=g;
}}}},_encodeHtmlContent:function(b,a){var d=new Array("%","<",">","!",'"',"#","$","&","'","(",")",",",":",";","=","?","[","]","\\","^","`","{","|","}","~","+");
var c=b;
var e;
if(a){for(e=0;
e<d.length;
e++){c=c.replace(new RegExp("\\x"+d[e].charCodeAt(0).toString(16),"ig"),"%"+d[e].charCodeAt(0).toString(16));
}}else{for(e=d.length-1;
e>=0;
e--){c=c.replace(new RegExp("%"+d[e].charCodeAt(0).toString(16),"ig"),d[e]);
}}return c;
},encodePostbackContent:function(a){return Telerik.Web.UI.Editor.Utils._encodeHtmlContent(a,true);
},decodePostbackContent:function(a){return Telerik.Web.UI.Editor.Utils._encodeHtmlContent(a,false);
},makeUrlAbsolute:function(b){b=b.split("&").join("&amp;").split('"').join("&quot;").split("<").join("&lt;");
var a=document.createElement("div");
a.innerHTML='<a href="'+b+'">a</a>';
return a.childNodes[0].href;
},addStyleSheet:function(a,f,c){if(!a){return;
}f=f||document;
var b=f.createElement("link");
b.setAttribute("href",a,0);
if($telerik.isIE&&b.href.indexOf("https://")==0&&a.indexOf("https://")!=0){b.setAttribute("href",b.href);
}else{if($telerik.isIE7&&a.indexOf("https://")!=0&&b.href.indexOf("https://")!=0&&window.location.protocol=="https:"){b.setAttribute("href",Telerik.Web.UI.Editor.Utils.makeUrlAbsolute(a),0);
}}b.setAttribute("type","text/css");
if(c){b.setAttribute("id",c);
}else{c="";
}b.setAttribute("rel","stylesheet",0);
var e=f.getElementsByTagName("head")[0];
if($telerik.isSafari){var d=function(){e.appendChild(b);
};
window.setTimeout(d,200);
}else{e.appendChild(b);
}},_copyElementsBetweenNodes:function(h,e,d){var f=h.getElementsByTagName(d);
var g=e.getElementsByTagName(d);
for(var a=0;
a<f.length;
a++){switch(d){case"script":case"title":g[a].text=f[a].text;
break;
case"style":if(g[a].innerHTML!=f[a].innerHTML){g[a].styleSheet.cssText=f[a].styleSheet.cssText;
}break;
case"select":g[a].selectedIndex=f[a].selectedIndex;
break;
case"iframe":var c=f[a].innerHTML;
if(c){var b=g[a].outerHTML;
if(b){var k=b.indexOf(">");
if(k>0){b=b.substr(0,k)+">"+c+b.substr(k+1);
g[a].outerHTML=b;
}}}break;
default:Telerik.Web.UI.Editor.Utils.setElementInnerHtml(g[a],f[a].innerHTML);
break;
}}},cloneNodeWithChildren:function(b){if(!b){return null;
}if($telerik.isIE&&b.getElementsByTagName){var a=b.cloneNode(true);
if(typeof(a.innerHTML)!="string"){this.setElementInnerHtml(a,b.innerHTML);
}this._copyElementsBetweenNodes(b,a,"script");
this._copyElementsBetweenNodes(b,a,"map");
this._copyElementsBetweenNodes(b,a,"style");
this._copyElementsBetweenNodes(b,a,"title");
this._copyElementsBetweenNodes(b,a,"select");
this._copyElementsBetweenNodes(b,a,"iframe");
return a;
}else{return b.cloneNode(true);
}},escapeRegExSpecialChars:function(a){var b=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");
return a.replace(b,"\\$&");
},getUniqueID:function(){if(!window.RadEditor_uniqueSeed){window.RadEditor_uniqueSeed=new Date()-101;
}if(!window.RadEditor_uniqueIdCounter){window.RadEditor_uniqueIdCounter=1;
}else{window.RadEditor_uniqueIdCounter++;
}var a=window.RadEditor_uniqueSeed-window.RadEditor_uniqueIdCounter;
return"UniqueID"+a;
},getTextContent:function(a){if(!a){return null;
}if(a.innerText!=null){return a.innerText;
}if(a.textContent!=null){var b=a.textContent;
b=b.replace(/<!--(.|\s)*?-->/gi,"");
return b;
}return null;
},execDocumentCommand:function(g,i,b){var a,e;
if(!g||!i){return false;
}try{if(i=="JustifyNone"&&!$telerik.isIE){return this.applyCustomJustifyNone(g);
}else{if($telerik.isFirefox&&this.isAlignCommand(i)){return this.firefoxCustomAlign(g,i);
}else{return g.execCommand(i,false,b);
}}}catch(f){var c=new Telerik.Web.UI.Editor.Selection(g.defaultView||window);
var h=c.getParentElement();
a=document.createElement("br");
h.insertBefore(a,h.firstChild);
var d=g.execCommand(i,false,b);
return d;
}finally{if(e){e.parentNode.removeChild(e);
}if(a){a.parentNode.removeChild(a);
}}},firefoxCustomAlign:function(c,e){var b=new Telerik.Web.UI.Editor.Selection(c.defaultView||window);
var d=b.getParentElement();
if(this.isBlockElement(d)){this.firefoxFirstChildAlign(c,e,d);
}else{var a=this.getFirstBlockElementUp(d);
if(this.isEditorContentArea(a)){this.firefoxFirstChildAlign(c,e,d);
}else{this.applyCustomAlign(a,e);
}}},applyCustomJustifyNone:function(b){var a=new Telerik.Web.UI.Editor.Selection(b.defaultView||window);
var c=this.getFirstBlockElementUp(a.getParentElement());
if($telerik.isSafari){this.cleanStylePorperty(c,"textAlign");
}else{c.removeAttribute("align");
}},applyCustomAlign:function(b,c){var a=c.toLowerCase().replace("justify","").replace("full","justify").replace("none","");
b.setAttribute("align",a);
},firefoxFirstChildAlign:function(d,h,a,c){var f=this.isEditorContentArea(a)?a:a.parentNode;
var b;
if(this.needsFirefoxEditableWorkaround(f,a)){b=document.createElement("br");
f.insertBefore(b,f.firstChild);
}try{return this.finallyExecuteAlignCommand(d,h);
}catch(g){if(!c){this.firefoxFirstChildAlign(d,h,a,true);
}}finally{if(b){b.parentNode.removeChild(b);
}}},finallyExecuteAlignCommand:function(a,b){return a.execCommand(b,false,null);
},needsFirefoxEditableWorkaround:function(b,a){return b==a||!this.checkForElement(b,/^(?:body|tr|thead|tbody|td)$/i);
},getFirstBlockElementUp:function(a){return this.isBlockElement(a)?a:this.getBlockParent(a);
},getBlockParent:function(a){var b=a.parentNode;
while(b&&!this.isBlockElement(b)){b=b.parentNode;
}return b;
},isBlockElement:function(a){return this.checkForElement(a,/^(?:body|p|div|h[1-6]|form|fieldset|table|td|ul|ol|li|dl|blockquote|address|hr)$/i);
},checkForElement:function(b,c){var a=b&&b.nodeName;
return !!a&&c.test(a);
},isAlignCommand:function(a){return/^Justify(?:None|Left|Center|Right|Full)$/.test(a);
},_rgbToHex:function(a){if(a.toLowerCase().indexOf("rgb")!=-1){var c="#";
var b=function(d){var e=parseInt(d,10).toString(16);
c+=(e.length==1?"0"+e:e);
return d;
};
a=a.replace(/(\d+)/gi,b);
b=null;
return c;
}else{return a;
}},removeFormattingNodes:function(b){if(!b){return;
}var a=b.getSelectedElement();
this.removeNonXhtmlCompliantParents(a);
},removeNonXhtmlCompliantParents:function(f){if(!f){return;
}f=f.parentNode;
var e=Telerik.Web.UI.Editor.Utils.isEditorContentArea;
var d=[];
while(f&&f.tagName!="TD"&&!e(f)&&!e(f.parentNode)){var b=f.tagName;
switch(b){case"P":case"SPAN":case"FONT":case"STRONG":case"EM":case"U":d.push(f);
break;
}f=f.parentNode;
}for(var a=0,c=d.length;
a<c;
a++){Telerik.Web.UI.Editor.Utils.removeNode(d[a]);
}},setTargetsForPreview:function(a){var c=a.get_contentArea();
var k=c.getElementsByTagName("A");
for(var b=0,d=k.length;
b<d;
b++){var f=k[b];
var g=f.getAttribute("target");
if(g!=null){f.setAttribute("re_target",g);
}if(g!="_blank"){f.setAttribute("target","blank");
}var e=f.getAttribute("href",2);
if(e){if(e.match(/^#/)!=null){var h=f.getAttribute("onclick");
if(h!=null){f.setAttribute("re_onclick",h);
}f.setAttribute("onclick","return false;");
}}}},restoreTargetsAfterPreview:function(a){var d=a.get_contentArea();
var h=d.getElementsByTagName("A");
for(var b=0,e=h.length;
b<e;
b++){var f=h[b];
var c=f.getAttribute("re_target");
if(c!=null&&c!="null"){f.setAttribute("target",c);
}else{f.removeAttribute("target");
}var g=f.getAttribute("re_onclick");
if(g!=null&&g!="null"){f.setAttribute("onclick",g);
}else{f.removeAttribute("onclick");
}f.removeAttribute("re_onclick");
f.removeAttribute("re_target");
}},checkForNonEmptyTextNodes:function(d){var c=d.childNodes;
for(var b=0,a=c.length;
b<a;
b++){return(c[b].nodeType==3&&c[b].nodeValue!="")?true:Telerik.Web.UI.Editor.Utils.checkForNonEmptyTextNodes(c[b]);
}return false;
},convertAttribute:function(a,d,g){var c=a.getAttribute(d);
var e=c;
if(d=="background"){c=a.getAttribute(d,2);
if(c){e="url("+c+")";
}}else{if(d=="width"||d=="height"||d=="vspace"||d=="hspace"){if(!(typeof(e)=="string"&&e.match("%"))){e=parseInt(e)+"px";
}}else{if(d=="noWrap"){c=a.noWrap;
e="nowrap";
}}}if(c){if(typeof(g)=="object"){var f=g.length;
for(var b=0;
b<f;
b++){pValue=a.style[g[b]];
if(!pValue){a.style[g[b]]=e;
}}}else{pValue=a.style[g];
if(!pValue){a.style[g]=e;
}}}},convertImgAlignAttribute:function(a){var c=a.getAttribute("align");
var b=($telerik.isIE)?"styleFloat":"cssFloat";
if(c){c=c.toLowerCase();
a.style.verticalAlign="";
a.style[b]="";
switch(c){case"left":a.style[b]="left";
break;
case"right":a.style[b]="right";
break;
case"bottom":case"baseline":case"absbottom":a.style[b]="";
a.style.verticalAlign="text-bottom";
break;
case"middle":case"absmiddle":a.style[b]="";
a.style.verticalAlign="middle";
break;
case"top":case"texttop":a.style[b]="";
a.style.verticalAlign="top";
break;
}}},convertTypeAttribute:function(a){var b=a.getAttribute("type");
if(b){if(!a.style.listStyleType){switch(b){case"1":a.style.listStyleType="decimal";
break;
case"a":a.style.listStyleType="lower-alpha";
break;
case"A":a.style.listStyleType="upper-alpha";
break;
case"i":a.style.listStyleType="lower-roman";
break;
case"I":a.style.listStyleType="upper-roman";
break;
case"disc":a.style.listStyleType="disc";
break;
case"circle":a.style.listStyleType="circle";
break;
case"square":a.style.listStyleType="square";
break;
}}}},convertBorderAttribute:function(a){var c=a.getAttribute("border");
if(c){if(!a.style.borderWidth){a.style.borderWidth=c+"px";
}if(!a.style.borderStyle){a.style.borderStyle="solid";
}}},convertCSSProperty:function(b,e,g){var a=b.style[g];
var d=a||b.getAttribute(e)||"";
if(g=="backgroundImage"){d=a.replace(/["']/g,"").slice(4,-1)||d;
}else{if(g=="width"||g=="height"){if(a&&!a.match("%")){d=parseInt(a);
}}else{if(g=="whiteSpace"){d="nowrap";
}else{if(e=="vspace"||e=="hspace"){var f=g.length;
for(var c=0;
c<f;
c++){if(c==0){a=b.style[g[c]];
d=parseInt(a);
}else{if(a!=b.style[g[c]]){a=false;
break;
}}}}}}}if(e.toLowerCase()=="bgcolor"){d=Telerik.Web.UI.Editor.Utils._rgbToHex(d);
}if(d){b.setAttribute(e,d);
}else{b.removeAttribute(e);
}Telerik.Web.UI.Editor.Utils.cleanStylePorperty(b,g);
},cleanStylePorperty:function(d,c){if(Object.prototype.toString.call(c)==="[object Array]"){for(var b=0,a=c.length;
b<a;
b++){d.style[c[b]]="";
}}else{d.style[c]="";
}if(!d.style.cssText){d.removeAttribute("style");
}},convertImgCssAlignProperty:function(a){var b=($telerik.isIE)?a.style.styleFloat:a.style.cssFloat;
if(b){a.setAttribute("align",b);
}else{var c=a.style.verticalAlign;
if(c){c=c.replace(/text-/i,"");
a.setAttribute("align",c);
}}},convertListStyleTypeStyle:function(c){var b=c.style.listStyleType;
var a=c.getAttribute("type");
if(b&&!a){switch(b){case"decimal":c.type="1";
break;
case"lower-alpha":c.type="a";
break;
case"upper-alpha":c.type="A";
break;
case"lower-roman":c.type="i";
break;
case"upper-roman":c.type="I";
break;
case"disc":c.type="disc";
break;
case"circle":c.type="circle";
break;
case"square":c.type="square";
break;
default:c.type=b;
break;
}c.style.listStyleType="";
}},stripHtmlHeadBodyTags:function(a){return a.replace(/^[\s\S]*<html[\s\S]+?<body[^>]*>([\s\S]*?)<\/body>[\s\S]*$/gi,"$1");
}};
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.CommandBase=function(c,b,a,d){this.isSafari=$telerik.isSafari;
this.isIE=$telerik.isIE;
this.isOpera=$telerik.isOpera;
this.isFirefox=$telerik.isFirefox;
this._title=c;
this._window=b;
this._isExecuted=false;
this._canUnexecute=(a!=false);
this._editor=d;
};
Telerik.Web.UI.Editor.CommandBase.prototype={get_argument:function(){return null;
},getState:function(a){return Telerik.Web.UI.Editor.CommandStates.Off;
},getValue:function(a){return null;
},set_window:function(a){this._window=a;
},get_window:function(){return this._window;
},get_title:function(){return this._title;
},set_title:function(a){this._title=a;
},get_editor:function(){if(Telerik.Web.UI.RadEditor.isInstanceOfType(this._editor)){return this._editor;
}else{return null;
}},set_editor:function(a){this._editor=a;
},get_editorContentArea:function(){var b=this.get_editor();
var a=(b)?b.get_contentArea():null;
return a;
},get_enableUndoRedo:function(){var a=this.get_editor();
if(a){return a.get_enableUndoRedo();
}else{return true;
}},execute:function(){this._isExecuted=false;
if(null==this.onExecute||null==this.get_window()){return false;
}try{if(this.get_enableUndoRedo()){if(!this.RestorePoint1){this.RestorePoint1=new Telerik.Web.UI.Editor.RestorePoint(this.get_window(),this.get_editorContentArea());
}else{this.RestorePoint1.select();
}}return(this._isExecuted=this.onExecute());
}catch(a){}return false;
},onExecute:function(){if(this.isIE&&null!=this.OnExecuteIE){return this.OnExecuteIE();
}else{if(null!=window.getSelection&&null!=this.OnExecuteMoz){return this.OnExecuteMoz();
}}return false;
},unexecute:function(){try{if(this._canUnexecute&&this._isExecuted){this.RestorePoint1.restore();
}}catch(a){}}};
Telerik.Web.UI.Editor.CommandBase.registerClass("Telerik.Web.UI.Editor.CommandBase",null);
Telerik.Web.UI.Editor.PasteHtmlCommand=function(c,b,a,e,d){Telerik.Web.UI.Editor.PasteHtmlCommand.initializeBase(this,[(c||"Insert Html"),b,true,d]);
this.HtmlText=a;
this.SelectText=(true==e);
this.editor=d;
};
Telerik.Web.UI.Editor.PasteHtmlCommand.prototype={clone:function(){return new Telerik.Web.UI.Editor.PasteHtmlCommand(this.get_title(),this.get_window(),this.HtmlText,null,this.get_editor());
},onExecute:function(){var a=new Telerik.Web.UI.Editor.Selection(this.get_window());
a.pasteHtml(this.HtmlText,this.SelectText);
return true;
}};
Telerik.Web.UI.Editor.PasteHtmlCommand.registerClass("Telerik.Web.UI.Editor.PasteHtmlCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.GenericCommand=function(b,a,c){Telerik.Web.UI.Editor.GenericCommand.initializeBase(this,[b,a,true,c]);
if(this.get_enableUndoRedo()){this.RestorePoint1=new Telerik.Web.UI.Editor.RestorePoint(this.get_window(),this.get_editorContentArea());
}};
Telerik.Web.UI.Editor.GenericCommand.prototype={execute:function(){if(this.get_enableUndoRedo()){if(null==this.RestorePoint2){this.RestorePoint2=new Telerik.Web.UI.Editor.RestorePoint(this.get_window(),this.get_editorContentArea());
}else{this.RestorePoint2.restore();
}}return true;
},unexecute:function(){if(this.get_enableUndoRedo()){this.RestorePoint1.restore(true);
}}};
Telerik.Web.UI.Editor.GenericCommand.registerClass("Telerik.Web.UI.Editor.GenericCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.TextTypeCommand=function(b,a,c){Telerik.Web.UI.Editor.TextTypeCommand.initializeBase(this,[(b||"Typing"),a,c]);
};
Telerik.Web.UI.Editor.TextTypeCommand.prototype={update:function(){if(this.RestorePoint2){this.RestorePoint2.update();
}}};
Telerik.Web.UI.Editor.TextTypeCommand.registerClass("Telerik.Web.UI.Editor.TextTypeCommand",Telerik.Web.UI.Editor.GenericCommand);
Telerik.Web.UI.Editor.BrowserCommand=function(e,f,c,a,b){var d=true;
switch(this.CommandID){case"Copy":case"SelectAll":case"Print":d=false;
break;
}Telerik.Web.UI.Editor.BrowserCommand.initializeBase(this,[(e||c),f,d,b]);
this.CommandID=c;
this.Value=a;
};
Telerik.Web.UI.Editor.BrowserCommand.prototype={get_argument:function(){return this.Value;
},clone:function(){return new Telerik.Web.UI.Editor.BrowserCommand(this._title,this.get_window(),this.CommandID,this.Value);
},getState:function(c){try{c=c||this.get_window();
var a=c.document;
if(null==a){return Telerik.Web.UI.Editor.CommandStates.Disabled;
}var d=true;
if(!$telerik.isIE7||"Paste"!=this.CommandID){d=a.queryCommandEnabled(this.CommandID);
}if(!this.isOpera&&!d){if(!this.isSafari||!this.CommandID=="RealFontSize"){return Telerik.Web.UI.Editor.CommandStates.Disabled;
}}var e=null;
if(!$telerik.isIE7||"Paste"!=this.CommandID){e=a.queryCommandState(this.CommandID);
}return e?Telerik.Web.UI.Editor.CommandStates.On:Telerik.Web.UI.Editor.CommandStates.Off;
}catch(b){return Telerik.Web.UI.Editor.CommandStates.Off;
}},getValue:function(a){try{a=a||this.get_window();
return a.document.queryCommandValue(this.CommandID);
}catch(b){}return null;
},onExecute:function(){var f=this.get_window();
if(!f){return false;
}var a=f.document;
if("AbsolutePosition"==this.CommandID){a.execCommand("2D-Position",false,true);
}var c=true;
if(this.CommandID=="BackColor"&&(this.isOpera||this.isFirefox)){this.CommandID="HiliteColor";
c=false;
}if(this.CommandID=="FontSize"&&this.isSafari2){var b=parseInt(this.Value);
switch(b){case 1:this.Value="8pt";
break;
case 2:this.Value="10pt";
break;
case 3:this.Value="12pt";
break;
case 4:this.Value="14pt";
break;
case 5:this.Value="18pt";
break;
case 6:this.Value="24pt";
break;
case 7:this.Value="36pt";
break;
}}try{a.execCommand("UseCSS",false,(false!=c));
a.execCommand("styleWithCSS",false,(false==c));
}catch(d){}if(!this.isIE&&!this.Value&&(this.CommandID=="ForeColor"||this.CommandID=="BackColor"||this.CommandID=="HiliteColor")){this.removeColorMozilla(this.CommandID);
}var g=Telerik.Web.UI.Editor.Utils.execDocumentCommand(a,this.CommandID,this.Value);
if($telerik.isIE&&!$telerik.isIE9Mode){switch(this.CommandID){case"JustifyLeft":case"JustifyRight":case"JustifyNone":case"JustifyCenter":case"JustifyFull":this.ieFixAlignCommandsParagraphBraking();
break;
}}if($telerik.isFirefox&&(this.CommandID=="BackColor"||this.CommandID=="HiliteColor")&&this._editor.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){this.mozFixContentAreaBackColor();
}try{a.execCommand("UseCSS",false,true);
a.execCommand("styleWithCSS",false,false);
}catch(d){}return g;
},ieFixAlignCommandsParagraphBraking:function(){var c=this.get_editor();
var d=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c.getSelectedElement(),"P");
if(d&&d.firstChild){var b=d.firstChild;
var a=b.innerHTML;
if(a.indexOf("</P>")!=-1&&a.indexOf("<P>")==-1){Telerik.Web.UI.Editor.Utils.setElementInnerHtml(b,a.replace("</P>",""));
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(d,d.innerHTML+"</P>");
}}},mozFixContentAreaBackColor:function(){var c=this._editor.get_contentArea();
var h=c.style.backgroundColor;
if(h!=""){c.style.backgroundColor="";
var a=document.evaluate('.//text()[normalize-space(.) != ""]',c,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);
for(var b=0,d=a.snapshotLength;
b<d;
b++){var g=a.snapshotItem(b);
var e=document.createElement("span");
e.innerHTML=g.nodeValue;
e.style.backgroundColor=h;
var f=g.parentNode;
f.insertBefore(e,g);
f.removeChild(g);
}}},removeColorMozilla:function(b){var e=new Telerik.Web.UI.Editor.Selection();
e._window=this._window;
var a=e.getHtml();
if(a!=""){var h=e.GetParentElement();
if(h.innerHTML.trim()==a.trim()){this.removeNodeColor(h,b);
}var d=window.document.createElement("div");
d.innerHTML=a;
for(var c=0,f=d.childNodes.length;
c<f;
c++){var g=d.childNodes[c];
this.removeNodeColor(g,b);
}e.PasteHtml(d.innerHTML);
}},removeNodeColor:function(a,b){switch(b){case"ForeColor":if(a.style){a.style.color="";
}if(a.removeAttribute){a.removeAttribute("color");
}break;
case"BackColor":case"HiliteColor":if(a.style){a.style.backgroundColor="";
}if(a.removeAttribute){a.removeAttribute("bgColor");
}break;
}}};
Telerik.Web.UI.Editor.BrowserCommand.registerClass("Telerik.Web.UI.Editor.BrowserCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.StyleRuleCommand=function(c,f,d,e,g,a){Telerik.Web.UI.Editor.StyleRuleCommand.initializeBase(this,[(c||sCmdID),f,true,a]);
if(!d){var b=new Telerik.Web.UI.Editor.Selection(this._window);
d=b.getParentElement();
}this._nodeBookmark=new Telerik.Web.UI.Editor.SelectionBookmark(this._window,d);
this._styleAttributeName=e;
this._newValue=g;
};
Telerik.Web.UI.Editor.StyleRuleCommand.prototype={get_argument:function(){return this._newValue;
},clone:function(){return new Telerik.Web.UI.Editor.StyleRuleCommand(this._title,this._window,null,this._styleAttributeName,this._newValue);
},execute:function(){var a=this._nodeBookmark.select();
if(!a){return false;
}if(!this._isExecuted){this._oldValue=a.style[this._styleAttributeName];
}a.style[this._styleAttributeName]=this._newValue;
this._isExecuted=true;
return true;
},unexecute:function(){var a=this._nodeBookmark.select();
a.style[this._styleAttributeName]=this._oldValue;
}};
Telerik.Web.UI.Editor.StyleRuleCommand.registerClass("Telerik.Web.UI.Editor.StyleRuleCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.AttributeCommand=function(c,f,e,d,g,a){Telerik.Web.UI.Editor.AttributeCommand.initializeBase(this,[(c||sCmdID),f,true,a]);
if(!e){var b=new Telerik.Web.UI.Editor.Selection(this._window);
e=b.getParentElement();
}this._nodeBookmark=new Telerik.Web.UI.Editor.SelectionBookmark(this._window,e);
this._attribName=d;
this._newValue=g;
};
Telerik.Web.UI.Editor.AttributeCommand.prototype={get_argument:function(){return this._newValue;
},clone:function(){return new Telerik.Web.UI.Editor.AttributeCommand(this._title,this._window,null,this._attribName,this._newValue);
},execute:function(){var a=this._nodeBookmark.select();
if(!a){return false;
}if(!this._isExecuted){if(this._attribName=="style"){this._oldValue=a.style.cssText;
}else{this._oldValue=a.getAttribute(this._attribName);
}}if(this._attribName&&this._attribName.toLowerCase()=="name"&&document.all){a.name=this._newValue;
a.removeAttribute("name");
a.removeAttribute("NAME");
}var b=this._newValue.trim();
if(""==b){a.removeAttribute(this._attribName,0);
if("className"==this._attribName){a.removeAttribute("class",0);
}}else{if(this._attribName=="style"){a.style.cssText=this._newValue;
}else{a[this._attribName]=this._newValue;
if(this._attribName.toLowerCase()=="nowrap"||this._attribName=="borderColor"){a.setAttribute(this._attribName,this._newValue);
}}}this._isExecuted=true;
return true;
},unexecute:function(){var a=this._nodeBookmark.select();
if(this._attribName=="style"){a.style.cssText=this._oldValue;
}else{a[this._attribName]=this._oldValue;
}}};
Telerik.Web.UI.Editor.AttributeCommand.registerClass("Telerik.Web.UI.Editor.AttributeCommand",Telerik.Web.UI.Editor.CommandBase);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.ClassNameCommand=function(c,b,a,d){Telerik.Web.UI.Editor.ClassNameCommand.initializeBase(this,[(c||"Classname"),b,true,d]);
};
Telerik.Web.UI.Editor.ClassNameCommand.prototype={getValue:function(a){a=a||this._window;
if($telerik.isIE){return this._getValueIE(a);
}else{return this._getValueMoz(a);
}},_getValueIE:function(b){var c=new Telerik.Web.UI.Editor.Selection(b);
var a=c.getParentElement();
if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(a)){return"";
}else{return(""==a.className?"":a.className);
}},_getValueMoz:function(f){if(!f){return"";
}var g=f.getSelection();
if(!g){return"";
}if(g.rangeCount!=1){return"";
}var b=(g.focusNode.nodeType!=3?g.focusNode:g.focusNode.parentNode);
var e=(g.anchorNode.nodeType!=3?g.anchorNode:g.anchorNode.parentNode);
if(b!=e){return"";
}var c=new Telerik.Web.UI.Editor.Selection(f);
var a="",d;
if(null!=c&&null!=(d=c.getParentElement())){a=d.className;
}return(""==a?"":a);
}};
Telerik.Web.UI.Editor.ClassNameCommand.registerClass("Telerik.Web.UI.Editor.ClassNameCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.FormatBlockCommand=function(c,b,a,d){Telerik.Web.UI.Editor.FormatBlockCommand.initializeBase(this,[(c||"Format Block"),b,true,d]);
this.FormatValue=(a)?a:"<p>";
this._editor=d;
};
Telerik.Web.UI.Editor.FormatBlockCommand.prototype={get_argument:function(){try{return this.FormatValue.substring(1,this.FormatValue.length-1).toUpperCase();
}catch(a){}},clone:function(){return new Telerik.Web.UI.Editor.FormatBlockCommand(this.Title,this._window,this.FormatValue,this._editor);
},getValue:function(b){try{b=b||this._window;
var a=b.document.queryCommandValue("FormatBlock");
if(!document.all){switch(a){case"x":case"":a="Normal";
break;
}}return a;
}catch(c){}return null;
},onExecute:function(){var u=this._window.document;
var a=this.FormatValue;
var c=this._editor;
var p=null;
if("<p>"==a.toLowerCase()&&!$telerik.isOpera){u.execCommand("FormatBlock",false,"Normal");
}var t=true;
var j=this._getTagName();
var q=new Telerik.Web.UI.Editor.Selection(this._window);
var w=q.getHtml();
if(w){var d=Telerik.Web.UI.Editor.CommandList._markEditorSelection(c);
var v=d.newElements;
var n=d.oldElements;
var m=Function.createDelegate(this,function(i,C){var A=i.parentNode;
if(!$telerik.isFireFox&&C&&A.tagName=="A"&&A.childNodes.length==1){var z=u.createElement(i.tagName);
Telerik.Web.UI.Editor.Utils.removeNode(i);
A.parentNode.insertBefore(z,A);
z.appendChild(A);
i=z;
A=i.parentNode;
}var z=u.createElement(j);
var x=(C)?i.innerHTML:$telerik.getOuterHtml(i);
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(z,x);
A.replaceChild(z,i);
if(/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(A.tagName)&&true!=Telerik.Web.UI.Editor.Utils.isEditorContentArea(A)){$telerik.mergeElementAttributes(A,z,false);
if(A.childNodes.length==1){Telerik.Web.UI.Editor.Utils.removeNode(A);
}else{var B=A.parentNode;
if(!z.previousSibling){B.insertBefore(z,A);
}else{if(!z.nextSibling){var l=A.nextSibling;
if(l){B.insertBefore(z,l);
}else{B.appendChild(z);
}}else{var y=A.cloneNode(false);
while(z.nextSibling){y.appendChild(z.nextSibling);
}var l=A.nextSibling;
if(l){A.parentNode.insertBefore(z,l);
A.parentNode.insertBefore(y,l);
}else{A.parentNode.appendChild(z);
A.parentNode.appendChild(y);
}}}}}Telerik.Web.UI.Editor.Utils.removeNonXhtmlCompliantParents(z);
p=z;
this._applyAttributes(z);
});
for(var g=0,o=v.length;
g<o;
g++){m(v[g],true);
}for(var g=0,o=n.length;
g<o;
g++){m(n[g],false);
}}else{t=u.execCommand("FormatBlock",false,"<"+j+">");
var b=u.createElement("DIV");
b.innerHTML=a+"</"+j+">";
var s=b.getElementsByTagName(j)[0];
var h=c.getSelectedElement();
if(h.tagName==s.tagName){$telerik.mergeElementAttributes(s,h);
}}var q=new Telerik.Web.UI.Editor.Selection(this._window);
var e=q.getParentElement();
if(e&&e.tagName!=j){q.collapse(true);
q=new Telerik.Web.UI.Editor.Selection(this._window);
e=q.getParentElement();
}var r=$telerik.getPreviousHtmlNode(e);
if(r&&r.tagName=="BR"){r.parentNode.removeChild(r);
}var k=$telerik.getNextHtmlNode(e);
if(k&&k.tagName=="BR"){k.parentNode.removeChild(k);
}if(w){if($telerik.isFirefox&&p){var q=c.getSelection();
var f=q.getRange();
f.selectNodeContents(p);
f.setStart(f.endContainer,f.endOffset);
q.selectRange(f);
}else{Telerik.Web.UI.Editor.Utils.selectElement(this._window,e);
q=new Telerik.Web.UI.Editor.Selection(this._window);
q.collapse(false);
}}return t;
},_getTagName:function(){var a=this.FormatValue.replace(/.*?<([^\s]+)(\s|\/|>).*/i,"$1");
return a.toUpperCase();
},_applyAttributes:function(c){if(!c){return;
}var a=this.FormatValue;
var d=document.createElement("div");
d.innerHTML=a+"</"+this._getTagName()+">";
if(d.firstChild){var b=d.firstChild;
if(b.className){c.className=b.className;
}if(b.style.cssText){c.style.cssText=b.style.cssText;
}}}};
Telerik.Web.UI.Editor.FormatBlockCommand.registerClass("Telerik.Web.UI.Editor.FormatBlockCommand",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.InsertListCommand=function(d,e,c,f,b,a){Telerik.Web.UI.Editor.InsertListCommand.initializeBase(this,[(d||"Insert List"),e,true,a]);
this._newLineModeBr=(c==true);
this._commandName=f;
this._listType=(f=="InsertOrderedList")?"OL":"UL";
this._listStyle=b;
this._document=this._window.document;
};
Telerik.Web.UI.Editor.InsertListCommand.prototype={_insertList:function(){var f=Telerik.Web.UI.Editor.Utils.execDocumentCommand(this._document,this._commandName);
var a=this.get_editor();
if(a){var e=a.get_html();
var c=/(<ul>\s*<\/ul>)|(<ol>\s*<\/ol>)/gi;
if(e.match(c)){a.set_html(e.replace(c,""));
}}if($telerik.isSafari){var b=a.getSelectedElement();
var d=b;
while(d||!Telerik.Web.UI.Editor.Utils.isEditorContentArea(d)){if(d.tagName=="P"){Telerik.Web.UI.Editor.Utils.removeNode(d);
a.selectElement(b);
break;
}d=d.parentNode;
}}return f;
},OnExecuteMoz:function(){return this._insertList();
},OnExecuteIE:function(){if(!this._newLineModeBr){return this._insertList();
}var l=new Telerik.Web.UI.Editor.Selection(this._window),z=l.getHtml(),c=this.get_editor(),a=l.getParentElement(),t=a.nodeName,x,w="",o,f=Telerik.Web.UI.Editor.Utils.getElementParentByTag;
if(t=="P"||t=="DIV"){o=c.getSelection().getRange();
Telerik.Web.UI.Editor.Utils.selectElement(this._window,a);
w=l.getHtml();
if(w==z){var g=new RegExp("^\\s*<"+t+"[^>]*>","i"),b=new RegExp("</"+t+">s*$","i");
a.parentNode.removeChild(a);
w=w.replace(g,"");
w=w.replace(b,"");
}else{l.selectRange(o);
w="";
}}if("OL"==a.tagName||"UL"==a.tagName||f(a,"UL")||f(a,"OL")||(!w&&z.match(/<P\s*>/i))){this._insertList();
l=new Telerik.Web.UI.Editor.Selection(this._window);
z=l.getHtml();
x=l.getParentElement();
if(x.tagName=="P"){z=x.outerHTML;
}var y=this._document.createElement("span");
y.innerHTML=z;
if(y.getElementsByTagName("P").length>0){var r=new RegExp("<p>([\\s\\S]+?)</p>","gi");
z=z.replace(r,"$1<br/>");
if(x.tagName=="P"){x.innerHTML="";
}l.pasteHtml(z,true);
l=new Telerik.Web.UI.Editor.Selection(this._window);
a=l.getParentElement();
if(a.tagName=="P"){var s=a.parentNode;
while(a.childNodes.length>0){s.insertBefore(a.childNodes[0],a);
}s.removeChild(a);
}}return true;
}z=w||((l.getBrowserSelection().type=="None")?"":l.getHtml());
if(a.tagName=="P"&&z.match(/^\s*<p[^>]*>/i)&&z.match(/<\/p>\s*$/i)){var A=z.replace(/^\s*<p[^>]*>/i,"");
A=A.replace(/<\/p>\s*$/i,"");
if(a.innerHTML==A){z=A;
}}if(z.toLowerCase().trim()=="<p>&nbsp;</p>"){return this._insertList();
}else{if(!z){o=l.getRange();
var s=o.parentElement();
if(!s.currentStyle.hasLayout){while(!s.currentStyle.hasLayout&&s.tagName!="P"){s=s.parentNode;
}}var m=o.duplicate();
var k=o.duplicate();
var u=s.children;
var q=0;
if(u.length==0){m.moveToElementText(s);
m.collapse(true);
}else{for(q=0;
q<u.length;
q++){var d=u[q];
k.moveToElementText(d);
if(k.inRange(o)){m.moveToElementText(d);
m.collapse(true);
break;
}else{if(k.compareEndPoints("StartToStart",o)>0){if(q==0){m.moveToElementText(s);
m.collapse(true);
break;
}m.moveToElementText(u[q-1]);
m.collapse(false);
m.move("character",1);
m.move("character",-1);
break;
}}}}var j=null;
if(q==u.length){q=0;
}for(;
q<u.length;
q++){var d=u[q];
k.moveToElementText(d);
if(k.compareEndPoints("StartToStart",o)>0){j=d;
break;
}}if(!j){j=s;
}k.moveToElementText(j);
if(j!=s){k.collapse(true);
k.move("character",-1);
k.move("character",1);
}else{k.collapse(false);
}m.setEndPoint("EndToStart",k);
m.select();
z=m.htmlText;
z=this.removeFirstParagraph(z);
var h=m.parentElement();
m.execCommand("Delete",null,false);
if(m.parentElement()!=h){m.move("character",-1);
m.select();
}else{if(m.htmlText){m.text="";
if(m.parentElement()!=h){m.move("character",-1);
m.select();
}}}z=z.replace(/^\s*<br\s*\/?\s*>/i,"");
}}z=this.getLiElementsHtml(z);
z="<"+this._listType+">"+z+"</"+this._listType+">";
l.pasteHtml("");
l.pasteHtml(z,true);
var v=l.getParentElement();
if(v){if(v.tagName!=this._listType){v=Telerik.Web.UI.Editor.Utils.getElementParentByTag(v,this._listType);
}if(v){var p=v.nextSibling;
if(p&&p.tagName=="BR"){p.parentNode.removeChild(p);
}if(typeof(m)!="undefined"){var e=v.getElementsByTagName("LI"),n=e.length;
if(liNodesLength>0){m.moveToElementText(e[n-1]);
m.collapse(false);
m.select();
}}}}return true;
},removeFirstParagraph:function(c){var a=c+"";
if(a.match(/^\s*<P/i)){var d=document.createElement("DIV");
d.innerHTML=a.replace(/^\s\s*/,"");
var b=d.firstChild;
if(b&&b.tagName=="P"){Telerik.Web.UI.Editor.Utils.removeNode(b);
}a=d.innerHTML;
}return a;
},getLiElementsHtml:function(c){var d="",f,a,b,e=this._document.createElement("div");
c=$telerik.$.trim(c||"");
if(c.match(/<br[^>]*>/ig)){Telerik.Web.UI.Editor.Utils.setElementInnerHtml(e,c);
$telerik.$("br",e).each(function(h,g){g.setAttribute("re_br_"+h,h);
});
c=e.innerHTML;
$telerik.$("br",e).each(function(m,g){var k="<BR>",i,h,l,j=g.parentNode;
while(j&&j!==e){i=j.cloneNode();
h=$telerik.getOuterHtml(i).match(/<[^>]*>/i);
k="</"+i.tagName.toLowerCase()+">"+k+h;
j=j.parentNode;
}if(!g.nextSibling){k="";
}l=new RegExp("<br[^>]*re_br_"+m+"=[^>]*>","ig");
c=c.replace(l,k);
});
f=c.split("<BR>");
for(a=0,b=f.length;
a<b;
a++){d+="<li>"+f[a]+"</li>";
}}else{d+="<li>"+c+"</li>";
}return d;
}};
Telerik.Web.UI.Editor.InsertListCommand.registerClass("Telerik.Web.UI.Editor.InsertListCommand",Telerik.Web.UI.Editor.CommandBase);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.EnterNewLineCommand=function(c,b,a,d,e){Telerik.Web.UI.Editor.EnterNewLineCommand.initializeBase(this,[(c||"Enter pressed"),b,true,d]);
this._newLineMode=(e)?e:d.get_newLineMode();
this.editor=d;
};
Telerik.Web.UI.Editor.EnterNewLineCommand.prototype={execute:function(){var a=this.editor;
if(a.get_mode()==Telerik.Web.UI.EditModes.Preview){return false;
}switch(this._newLineMode){case Telerik.Web.UI.EditorNewLineModes.P:case Telerik.Web.UI.EditorNewLineModes.Div:result=this.enterBlockElement();
break;
default:result=this.enterBr();
break;
}if($telerik.isSafari||$telerik.isOpera){this.moveScroll(a);
}return true;
},moveScroll:function(){var a=this.editor,b=a.get_contentArea().scrollTop,e=a.get_newLineMode(),c=Telerik.Web.UI.EditorNewLineModes;
try{var d=null,g=0;
if(e==c.Br){a.pasteHtml("<span id='_radEditor_new_line'>&nbsp;</span>","",null,null,false);
d=a.get_document().getElementById("_radEditor_new_line");
g=d.offsetHeight+1;
}else{d=a.getSelectedElement();
g=(e==c.Div)?Telerik.Web.UI.Editor.Utils.getElementParentByTag(d,"DIV").offsetHeight:Telerik.Web.UI.Editor.Utils.getElementParentByTag(d,"P").offsetHeight+20;
}if(d.offsetTop-b+5>a.get_contentAreaElement().offsetHeight){a.get_contentArea().scrollTop=b+g;
}if(d&&d.id=="_radEditor_new_line"){var f=d.previousSibling;
d.parentNode.removeChild(d);
a.selectElement(f);
a.getSelection().collapse();
}}finally{if(e==c.Br){$telerik.$("#_radEditor_new_line").remove();
}}},enterBr:function(){var a=true;
if(this.isFirefox){a=this.enterBrMozilla();
}else{if($telerik.isOpera11){a=this.enterBrOpera();
}else{if(this.isSafari){a=this.enterBrSafari();
}else{if(this.isIE){a=this.enterBrIE();
}else{this.editor.bubbleKeyEventToBrowser();
}}}}return a;
},enterBrMozilla:function(){var b=this.editor;
var a=b.getSelectedElement();
var c=Telerik.Web.UI.Editor.Utils.getElementParentByTagWithConstraint(a,"P","TD,DIV,LI");
if(c!=null){b.pasteHtml("<br />");
}else{b.bubbleKeyEventToBrowser();
return true;
}},enterBrIE:function(){var a=this.editor;
var f=a.getSelectedElement();
if("LI"==f.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(f,"LI")!=null){a.bubbleKeyEventToBrowser();
return false;
}try{var c=a.get_document().selection.createRange();
if(c.pasteHTML){var e=f.tagName;
if(e.charAt(0)=="H"&&parseInt(e.charAt(1))>0){var b=c.duplicate();
b.moveToElementText(f);
a.bubbleKeyEventToBrowser();
return false;
}else{if(e.toLowerCase()=="textarea"){a.bubbleKeyEventToBrowser();
return false;
}}c.pasteHTML("<br>");
c.select();
c.moveEnd("character",1);
c.moveStart("character",1);
c.collapse(false);
}else{if(c(0)){c.execCommand("Delete");
}}}catch(d){alert(d.message);
}return false;
},enterBrOpera:function(){var c=this.editor;
var b=c.getSelectedElement();
if("LI"==b.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"LI")!=null){c.bubbleKeyEventToBrowser();
return false;
}else{c.pasteHtml("<br />");
selection=c.getSelection();
var a=selection.getRange();
a.collapse(false);
selection.selectRange(a);
}return true;
},enterBrSafari:function(){var b=this.editor;
var a=b.getSelectedElement();
if("LI"==a.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(a,"LI")!=null){b.bubbleKeyEventToBrowser();
return false;
}b.executeBrowserCommand("InsertLineBreak",true,"");
return false;
},enterBlockElement:function(){var a=true;
if(this.isFirefox){a=this.enterBlockElementMozilla();
}else{if(this.isSafari||$telerik.isOpera11){a=this.enterBlockElementSafari();
}else{if(this.isIE){a=this.enterBlockElementIE();
}else{this.editor.bubbleKeyEventToBrowser();
}}}return a;
},enterBlockElementMozilla:function(){var b=this.editor;
var c=b.getSelectedElement();
if(c.tagName=="A"||"LI"==c.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"LI")!=null){b.bubbleKeyEventToBrowser();
return false;
}function g(q){if(!q){return null;
}var o=q;
var p=o.tagName;
while(p!="TD"&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(o)){p=o.tagName;
if(!p){p="";
}if(p=="P"||(p.charAt(0)=="H"&&!isNaN(parseInt(p.charAt(1))))||p=="DIV"||p=="ADDRESS"||p=="PRE"){return o;
}o=o.parentNode;
if(!o){return null;
}}}var k=g(c);
var m=false;
if(k){var f=k.tagName;
m=(f.charAt(0)=="H"&&!isNaN(parseInt(f.charAt(1))));
if(f!="P"&&!m&&f!="DIV"){b.bubbleKeyEventToBrowser();
return false;
}}if(!k){b.get_document().execCommand("InsertParagraph",null,false);
k=g(b.getSelectedElement());
}var e=new Telerik.Web.UI.Editor.GenericCommand("Enter",b.get_contentWindow(),b);
var i=b.getSelection().getRange();
i.deleteContents();
var a=i.startOffset;
var j=i.startContainer;
var d=i.cloneRange();
d.setStart(k,0);
d.setEnd(j,a);
var l=d.extractContents();
if(k.tagName=="P"&&k.innerHTML==""){k.innerHTML=(k.tagName=="P")?"&nbsp;":"<br />";
}var n=k.cloneNode(false);
n.appendChild(l);
k.parentNode.insertBefore(n,k);
if(!Telerik.Web.UI.Editor.Utils.getTextContent(n)){n.innerHTML=(k.tagName=="P")?"&nbsp;":"<br />";
}if(m){if(k.innerHTML==""||Telerik.Web.UI.Editor.Utils.checkForNonEmptyTextNodes(k)==false){var h=b.get_document().createElement("P");
h.innerHTML="&nbsp;";
k.parentNode.insertBefore(h,k);
k.parentNode.removeChild(k);
b.getSelection().moveToElementText(h);
}}this.ensureModeElement();
b.executeCommand(e);
return false;
},enterBlockElementSafari:function(){var a=this.editor;
a.executeBrowserCommand("InsertParagraph",true,"");
this.ensureModeElement();
return true;
},enterBlockElementIE:function(){var a=this.editor;
a.bubbleKeyEventToBrowser();
a.get_contentWindow().setTimeout(Function.createDelegate(this,function(){this.ensureModeElement();
}),0);
return true;
},ensureModeElement:function(){var a=this.editor;
var b=a.getSelectedElement();
var c="P";
var d="DIV";
if(this._newLineMode==Telerik.Web.UI.EditorNewLineModes.P){c="DIV";
d="P";
}if($telerik.isFirefox&&b.innerHTML==""){b.innerHTML="<br />";
}var e=Telerik.Web.UI.Editor.Utils.getElementParentByTagWithConstraint(b,c,"TD");
if(e&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(e)){var g=e.previousSibling;
if(g){var h=g.nodeName;
if(h==c){Telerik.Web.UI.Editor.Utils.replaceNode(g,d);
}}var f=Telerik.Web.UI.Editor.Utils.replaceNode(e,d);
if(f.innerHTML.match(/^\s*$/)){f.innerHTML="&nbsp;";
}while(f.firstChild&&f.firstChild.nodeType!=3){f=f.firstChild;
}a.getSelection().moveToElementText(f);
}}};
Telerik.Web.UI.Editor.EnterNewLineCommand.registerClass("Telerik.Web.UI.Editor.EnterNewLineCommand",Telerik.Web.UI.Editor.CommandBase);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.TableCommandBase=function(b,a,c){Telerik.Web.UI.Editor.TableCommandBase.initializeBase(this,[(b||"Table Command"),a,true,c]);
};
Telerik.Web.UI.Editor.TableCommandsBase_Static={};
Telerik.Web.UI.Editor.TableCommandBase.prototype={getLayoutBuilderEngine:function(b,c){if(!Telerik.Web.UI.Editor.TableCommandsBase_Static._tableBuilder){Telerik.Web.UI.Editor.TableCommandsBase_Static._tableBuilder=new Telerik.Web.UI.LayoutBuilderEngine();
}var a=Telerik.Web.UI.Editor.TableCommandsBase_Static._tableBuilder;
a.set_selectedTable(b);
a.set_selectedCell(c);
return a;
},configureLayoutBuilderEngine:function(){var c=this.getSelectedCell();
if(!c){return false;
}var a=c.parentNode;
var b=this.getParentTable(a);
return this.getLayoutBuilderEngine(b,c);
},getState:function(a){return this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled;
},getSelectedCell:function(b){var c=new Telerik.Web.UI.Editor.Selection(b||this._window);
var a;
if(c){a=c.getParentElement();
}while(null!=a&&a.tagName!="TD"&&a.tagName!="TH"&&a.tagName!="BODY"){a=a.parentNode;
}if(!a||!a.tagName){return null;
}return(a.tagName=="TD"||a.tagName=="TH"?a:null);
},getSelectedRow:function(b){var c=new Telerik.Web.UI.Editor.Selection(this._window||b);
var a;
if(c){a=c.getParentElement();
}if(!a){return null;
}while(null!=a&&a.tagName!="TR"&&a.tagName!="BODY"){a=a.parentNode;
}return(a&&a.tagName=="TR"?a:null);
},getParentTable:function(a){if(!a){return null;
}while(null!=a&&a.parentNode!=a&&"TABLE"!=a.tagName){a=a.parentNode;
}return(a&&a.tagName=="TABLE"?a:null);
}};
Telerik.Web.UI.Editor.TableCommandBase.registerClass("Telerik.Web.UI.Editor.TableCommandBase",Telerik.Web.UI.Editor.CommandBase);
Telerik.Web.UI.Editor.TableInsertRow=function(b,a,d,c){Telerik.Web.UI.Editor.TableInsertRow.initializeBase(this,[(b||"Insert row"),a,c]);
this._direction=d||"above";
};
Telerik.Web.UI.Editor.TableInsertRow.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableInsertRow(this._title,this._window,this._direction);
},getState:function(a){return(this.getSelectedRow(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand(("below"==this._direction)?"insertRowBelow":"insertRowAbove");
}};
Telerik.Web.UI.Editor.TableInsertRow.registerClass("Telerik.Web.UI.Editor.TableInsertRow",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableDeleteRow=function(b,a,c){Telerik.Web.UI.Editor.TableDeleteRow.initializeBase(this,[(b||"Delete Row"),a,c]);
};
Telerik.Web.UI.Editor.TableDeleteRow.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableDeleteRow(this._title,this._window);
},getState:function(a){return(this.getSelectedRow(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("deleteRow");
}};
Telerik.Web.UI.Editor.TableDeleteRow.registerClass("Telerik.Web.UI.Editor.TableDeleteRow",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableInsertColumn=function(b,a,d,c){Telerik.Web.UI.Editor.TableInsertColumn.initializeBase(this,[(b||"Insert column"),a,c]);
this._direction=d||"left";
};
Telerik.Web.UI.Editor.TableInsertColumn.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableInsertColumn(this._title,this._window,this._direction);
},getState:function(a){return(this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
if($telerik.isRightToLeft(a._selectedTable)){this._direction=("right"==this._direction)?"left":"right";
}return a.executeCommand(("right"==this._direction)?"insertColumnToTheRight":"insertColumnToTheLeft");
}};
Telerik.Web.UI.Editor.TableInsertColumn.registerClass("Telerik.Web.UI.Editor.TableInsertColumn",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableDeleteColumn=function(b,a,c){Telerik.Web.UI.Editor.TableDeleteColumn.initializeBase(this,[(b||"Delete column"),a,c]);
};
Telerik.Web.UI.Editor.TableDeleteColumn.prototype={clone:function(){return Telerik.Web.UI.Editor.TableDeleteColumn.New(this._title,this._window);
},getState:function(a){return(this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("deleteColumn");
}};
Telerik.Web.UI.Editor.TableDeleteColumn.registerClass("Telerik.Web.UI.Editor.TableDeleteColumn",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableMergeRows=function(b,a,c){Telerik.Web.UI.Editor.TableMergeRows.initializeBase(this,[(b||"Merge rows"),a,c]);
};
Telerik.Web.UI.Editor.TableMergeRows.prototype={clone:function(){return Telerik.Web.UI.Editor.TableMergeRows.New(this._title,this._window);
},getState:function(f){var e=this.getSelectedCell(f);
var c=false;
if(e){var b=e.parentNode;
var a=this.getParentTable(b);
var d=this.getLayoutBuilderEngine(a,e);
c=d.canMergeDown();
}if(c){return Telerik.Web.UI.Editor.CommandStates.Off;
}else{return Telerik.Web.UI.Editor.CommandStates.Disabled;
}},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("mergeDown");
},getLowerCell:function(f){if(!f){return null;
}var c=this.getParentTable(f);
var d=f.parentNode;
var a=c.rows[d.rowIndex+f.rowSpan];
if(!a){return null;
}var e=a.cells[f.cellIndex];
if(!e){for(var b=a.cells.length-1;
b>=0;
b--){if(a.cells[b].offsetLeft==f.offsetLeft){return a.cells[b];
}}}return e;
}};
Telerik.Web.UI.Editor.TableMergeRows.registerClass("Telerik.Web.UI.Editor.TableMergeRows",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableMergeColumns=function(b,a,c){Telerik.Web.UI.Editor.TableMergeColumns.initializeBase(this,[(b||"Merge columns"),a,c]);
};
Telerik.Web.UI.Editor.TableMergeColumns.prototype={clone:function(){return Telerik.Web.UI.Editor.TableMergeColumns.New(this._title,this._window);
},getState:function(f){var e=this.getSelectedCell(f);
var c=false;
if(e){var b=e.parentNode;
var a=this.getParentTable(b);
var d=this.getLayoutBuilderEngine(a,e);
c=d.canMergeRight();
}if(c){return Telerik.Web.UI.Editor.CommandStates.Off;
}else{return Telerik.Web.UI.Editor.CommandStates.Disabled;
}},getNextSiblingCell:function(c){if(!c){return null;
}var a=c.parentNode;
var b=a.cells[c.cellIndex+1];
if(null!=b&&c.rowSpan==b.rowSpan){return b;
}else{return null;
}},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("mergeRight");
}};
Telerik.Web.UI.Editor.TableMergeColumns.registerClass("Telerik.Web.UI.Editor.TableMergeColumns",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableSplitCell=function(b,a,d,c){Telerik.Web.UI.Editor.TableSplitCell.initializeBase(this,[(b||"Split cell"),a,c]);
this._direction=d||"vertical";
};
Telerik.Web.UI.Editor.TableSplitCell.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableSplitCell(this._title,this._window);
},getState:function(a){return(this.getSelectedCell(a)?Telerik.Web.UI.Editor.CommandStates.Off:Telerik.Web.UI.Editor.CommandStates.Disabled);
},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand(("vertical"==this._direction)?"splitCellVertically":"splitCellHorizontally");
},getRealCellIndex:function(e){if(!e){return 0;
}var a=e.parentNode;
var b=0;
var c=0;
while(a.cells.length>b&&a.cells[b]!=e){var d=a.cells[b];
if(d.colSpan>1){c+=d.colSpan;
}else{c++;
}b++;
}return c;
}};
Telerik.Web.UI.Editor.TableSplitCell.registerClass("Telerik.Web.UI.Editor.TableSplitCell",Telerik.Web.UI.Editor.TableCommandBase);
Telerik.Web.UI.Editor.TableDeleteCell=function(b,a,c){Telerik.Web.UI.Editor.TableDeleteCell.initializeBase(this,[(b||"Delete cell"),a,c]);
};
Telerik.Web.UI.Editor.TableDeleteCell.prototype={clone:function(){return new Telerik.Web.UI.Editor.TableDeleteCell(this._title,this._window);
},getState:function(f){var e=this.getSelectedCell(f);
var c=false;
if(e){var b=e.parentNode;
var a=this.getParentTable(b);
var d=this.getLayoutBuilderEngine(a,e);
c=d.canDeleteCell();
}if(c){return Telerik.Web.UI.Editor.CommandStates.Off;
}else{return Telerik.Web.UI.Editor.CommandStates.Disabled;
}},onExecute:function(){var a=this.configureLayoutBuilderEngine();
return a.executeCommand("deleteCell");
}};
Telerik.Web.UI.Editor.TableDeleteCell.registerClass("Telerik.Web.UI.Editor.TableDeleteCell",Telerik.Web.UI.Editor.TableCommandBase);
Type.registerNamespace("Telerik.Web.UI");
(function(){var b=$telerik.$;
var a=Telerik.Web.UI;
a.EditorButton=function(c){a.EditorButton.initializeBase(this,[c]);
this._enabled=true;
this._text="";
this._isOn=false;
this._contentAreaMode="";
this._enableAriaSupport=false;
};
a.EditorButton.createToolWrapper=function(f,e){var c=f.get_enableAriaSupport();
var g=document.createElement("ul");
var h=document.createElement("li");
h.innerHTML="&nbsp;";
h.className="reGrip grip_first";
g.appendChild(h);
g.className="reToolbar "+e;
if(c){h.setAttribute("role","presentation");
}h=document.createElement("li");
g.appendChild(h);
var d=f.get_element();
h.appendChild(d);
h=document.createElement("li");
h.innerHTML="&nbsp;";
h.className="reGrip grip_last";
g.appendChild(h);
if(c){h.setAttribute("role","presentation");
g.setAttribute("role","presentation");
}return g;
};
a.EditorButton.getToolRootNode=function(c){while(c&&c.tagName!="A"){c=c.parentNode;
}return c;
};
a.EditorButton._createButton=function(e){var c=document.createElement("a");
c.className=e.showText==true?"reTool_text":"reTool";
var f=e.text;
c.title=f?f:e.name;
c.href="#";
c.setAttribute("unselectable","on");
if(e.showIcon!=false){var d=document.createElement("span");
d.className=e.name;
d.innerHTML="&nbsp;";
d.setAttribute("unselectable","on");
c.appendChild(d);
}if(e.showText==true){var d=document.createElement("span");
d.className="reButton_text";
d.innerHTML=e.text?e.text:e.name;
d.setAttribute("unselectable","on");
c.appendChild(d);
}return c;
};
a.EditorButton.createTool=function(d,j,h,c,g){if(!h){h=a.EditorButton;
}if(!c){c=a.EditorButton._createButton(d);
if(c.tagName=="A"){var i=c;
if(h==a.EditorSplitButton||h.inheritsFrom(a.EditorSplitButton)){Sys.UI.DomElement.addCssClass(i,"reSplitButton");
var f=document.createElement("span");
f.className="split_arrow";
f.innerHTML="&nbsp;";
i.appendChild(f);
}else{if(h==a.EditorDropDown||h.inheritsFrom(a.EditorDropDown)){Sys.UI.DomElement.removeCssClass(i,"reTool");
Sys.UI.DomElement.addCssClass(i,"reDropdown");
i.innerHTML="";
var f=document.createElement("span");
f.innerHTML="&nbsp;";
var e=d.width?d.width:"50px";
f.style.width=e;
i.appendChild(f);
}}}}var k=$create(h,d,j,null,c);
if(g&&g.appendChild){g.appendChild(c);
}return k;
};
a.EditorButton.prototype={initialize:function(){var c=this.getAnchorElement();
if(c){c.setAttribute("unselectable","on");
}var e=this.getSpanElement();
if(e){e.setAttribute("unselectable","on");
}if(this.get_addClickHandler()){var d=this.get_element();
$addHandlers(d,{click:this.click},this);
}},dispose:function(){var c=this.get_element();
if(c){$clearHandlers(c);
}a.EditorButton.callBaseMethod(this,"dispose");
},click:function(c){this.raiseEvent("valueSelected");
return $telerik.cancelRawEvent(c);
},add_valueSelected:function(c){this.get_events().addHandler("valueSelected",c);
},remove_valueSelected:function(c){this.get_events().removeHandler("valueSelected",c);
},raiseEvent:function(d,e){var c=this.get_events().getHandler(d);
if(c){if(!e){e=Sys.EventArgs.Empty;
}c(this,e);
}},set_width:function(d){var c=this.getSpanElement();
if(c){c.style.width=d;
}},get_width:function(){return this.get_element().offsetWidth;
},set_height:function(d){var c=this.getSpanElement();
if(c){c.style.height=d;
}},get_height:function(){return this.get_element().offsetHeight;
},isTarget:function(c){return $telerik.isDescendantOrSelf(this.get_element(),c.target);
},setState:function(c){this.set_enabled(c!=a.Editor.CommandStates.Disabled);
this.setOn(c==a.Editor.CommandStates.On);
},setFocus:function(){var c=this.getAnchorElement();
if(c&&c.focus){c.focus();
}},get_enabled:function(){return this._enabled;
},set_enabled:function(c){if(this._enabled!=c){this._enabled=c;
var e=this.getAnchorElement();
var d=this.get_enableAriaSupport();
if(!this._enabled){this._addAnchorCssClass("reTool_disabled");
e.setAttribute("disabled","disabled");
if(d){e.setAttribute("aria-disabled","true");
}}else{this._removeAnchorCssClass("reTool_disabled");
e.removeAttribute("disabled");
if(d){e.removeAttribute("aria-disabled");
}}}},get_enableAriaSupport:function(){return this._enableAriaSupport;
},set_enableAriaSupport:function(c,d){if(this.get_enableAriaSupport()!=c){this._enableAriaSupport=c;
var e=this.getAnchorElement();
if(!e){return;
}if(this.get_enableAriaSupport()){var d=d?d:"button";
e.setAttribute("role",d);
}}},isOn:function(){return this._isOn;
},setOn:function(c,g){if(this._isOn!=c){var d=this.get_enableAriaSupport();
var e=this.getAnchorElement();
var f=g?g:"aria-pressed";
this._isOn=c;
if(this._isOn){this._addAnchorCssClass("reTool_selected");
if(e&&d){e.setAttribute(f,"true");
}}else{this._removeAnchorCssClass("reTool_selected");
if(e&&d){e.removeAttribute(f);
}}}},get_text:function(){if(this._text){return this._text;
}var c=this.getAnchorElement();
if(c&&c.getAttribute("title")){return c.getAttribute("title");
}return this.get_name();
},set_text:function(c){if(this._text!=c){this._text=c;
if(this.get_showText()){this.getSpanElement().innerHTML=c;
}}},get_contentAreaMode:function(){if(this._contentAreaMode!=""){return this._contentAreaMode;
}else{return a.EditorContentAreaMode.Iframe;
}},set_contentAreaMode:function(c){this._contentAreaMode=c;
},_addAnchorCssClass:function(c){Sys.UI.DomElement.addCssClass(this.getAnchorElement(),c);
},_removeAnchorCssClass:function(c){Sys.UI.DomElement.removeCssClass(this.getAnchorElement(),c);
},getAnchorElement:function(){return this.get_element();
},getSpanElement:function(){var d=this.getAnchorElement();
var c=d.firstChild;
while(c!=null&&(c.tagName==null||c.tagName.toLowerCase()!="span")){c=c.nextSibling;
}return c;
}};
b.registerControlProperties(a.EditorButton,{clientStateFieldID:null,attributes:{},addClickHandler:false,autoPostBack:false,name:"",shortCut:"",showIcon:true,showText:false,skin:"",type:null,clientTypeName:"Telerik.Web.UI.EditorButton"});
b.registerControlEvents(a.EditorButton,["valueSelected"]);
a.EditorButton.registerClass("Telerik.Web.UI.EditorButton",Sys.UI.Control);
Telerik.Web.UI.EditorSpinBoxEventArgs=function(d,c){Telerik.Web.UI.EditorSpinBoxEventArgs.initializeBase(this);
this._newValue=d;
this._oldValue=c;
};
Telerik.Web.UI.EditorSpinBoxEventArgs.prototype={get_oldValue:function(){return this._oldValue;
},get_newValue:function(){return this._newValue;
}};
Telerik.Web.UI.EditorSpinBoxEventArgs.registerClass("Telerik.Web.UI.EditorSpinBoxEventArgs",Sys.CancelEventArgs);
Telerik.Web.UI.EditorSpinBox=function(c){Telerik.Web.UI.EditorSpinBox.initializeBase(this,[c]);
this._width="50px";
this._className="reSpinBox";
this._selectedItem="";
this._initialValue="";
this._visibleInput=true;
this._enabledIncrease=true;
this._enabledDecrease=true;
};
Telerik.Web.UI.EditorSpinBox.prototype={dispose:function(){this._inputElement.onchange=null;
this._inputElement.onkeypress=null;
this._inputElement.onclick=null;
this._inputElement=null;
this._increaseButton.onclick=null;
this._increaseButton=null;
this._decreaseButton.onclick=null;
this._decreaseButton=null;
Telerik.Web.UI.EditorSpinBox.callBaseMethod(this,"dispose");
},initialize:function(){this._createControls();
},_createControls:function(){var d=document.createElement("table");
d.cellSpacing=0;
d.cellPadding=0;
d.className=this.get_visibleInput()?this._className:"reTableWizardSpinBox";
d.insertRow(-1);
var f=d.rows[0].insertCell(-1);
var g=document.createElement("input");
g.className="radfd_skipme";
g.type="text";
g.onclick=function(j){this.focus();
};
g.onkeypress=Function.createDelegate(this,this._onKeyPressHandler);
g.onchange=Function.createDelegate(this,this._onChangeHandler);
this._inputElement=g;
f.appendChild(g);
if(!this.get_visibleInput()){this.set_visibleInput(false);
}if(this.get_visibleInput()){f=d.rows[0].insertCell(-1);
var e=document.createElement("table");
e.cellSpacing=0;
e.cellPadding=0;
e.insertRow(-1);
var h=e.rows[0].insertCell(-1);
var i=this._createAnchorElement("Increase");
this._increaseButton=i;
h.appendChild(i);
e.insertRow(-1);
h=e.rows[1].insertCell(-1);
i=this._createAnchorElement("Decrease");
this._decreaseButton=i;
h.appendChild(i);
f.appendChild(e);
}else{f=d.rows[0].insertCell(-1);
var i=this._createAnchorElement_noinput("Increase");
this._increaseButton=i;
f.appendChild(i);
f=d.rows[0].insertCell(-1);
i=this._createAnchorElement_noinput("Decrease");
this._decreaseButton=i;
f.appendChild(i);
}var c=this.get_element();
c.appendChild(d);
c.style.width=this.get_width();
},_createAnchorElement:function(e){var c=document.createElement("a");
var d=typeof(localization)!="undefined"&&localization[e]?localization[e]:e;
c.title=d;
c.href="javascript:void(0);";
c.innerHTML=d;
c.className="reSpinBox"+e;
c.onclick=Function.createDelegate(this,this._onPlusMinusClickHandler);
return c;
},_createAnchorElement_noinput:function(e){var c=document.createElement("a");
var d=typeof(localization)!="undefined"&&localization[e]?localization[e]:e;
c.title=d;
c.href="javascript:void(0);";
c.innerHTML="<span class='reTableWizardSpinBox_"+e+"'>"+d+"</span>";
c.onclick=Function.createDelegate(this,this._onPlusMinusClickHandler);
return c;
},_executeFunction:function(h,f,d){if(d){if(f.Executed){f.Executed=false;
return $telerik.cancelRawEvent(h);
}}f.Executed=true;
var c=(this._selectedItem!="")?this._selectedItem:this._initialValue;
this._selectedItem=f.value;
var g=new Telerik.Web.UI.EditorSpinBoxEventArgs(f.value,c);
this.raiseEvent("valueSelected",g);
},_onPlusMinusClickHandler:function(h){var d=null;
if(!h){d=window.event.srcElement;
}else{d=h.target;
}while(d&&d.tagName.toLowerCase()!="a"){d=d.parentNode;
}if(!d){return;
}var c=this.get_value();
c=c.replace(/^0+(\d)/ig,"$1");
if(""==c){c="0";
}var g=parseInt(c);
var f=g+"";
if(isNaN(g)){return;
}else{f=c.substring(f.length);
}if(d==this._increaseButton){if(this._enabledIncrease){g++;
}else{return;
}}else{if(d==this._decreaseButton){if(this._enabledDecrease){g--;
}else{return;
}}else{d=null;
}}if(d&&g>=0){this.set_value(g+f);
this._executeFunction(h,this._inputElement);
}return false;
},_onChangeHandler:function(c){if(!c){c=window.event;
}this._executeFunction(c,this._inputElement);
},_onKeyPressHandler:function(c){if(!c){c=window.event;
}if(c.keyCode==13){this._executeFunction(c,this._inputElement);
return $telerik.cancelRawEvent(c);
}},_onKeyDownHandler:function(c){if(!c){var c=window.event;
}c.returnValue=this._isKeyValid(c);
},_onKeyUpHandler:function(g){if(!g){var g=window.event;
}if(this._isKeyValid(g,true)){var c=this._selectedItem;
var d=this.get_value();
var f=new Telerik.Web.UI.EditorSpinBoxEventArgs(d,c);
this.raiseEvent("valueSelected",f);
}},_isKeyValid:function(g,f){try{if(!f){f=false;
}if(!g){g=window.event;
}var d=((48<=g.keyCode&&g.keyCode<=57)||(96<=g.keyCode&&g.keyCode<=105)||(13==g.keyCode)||(8==g.keyCode)||(46==g.keyCode)||(9==g.keyCode));
if(!f){d|=((35<=g.keyCode&&g.keyCode<=40));
}return d;
}catch(c){return true;
}},get_selectedItem:function(){return this._selectedItem;
},get_value:function(){return this._inputElement.value;
},set_value:function(c){if(null==c){c="";
}this._inputElement.value=c;
if(this._initialValue==""){this._initialValue=c;
}},get_width:function(){return this._width;
},set_width:function(d){this._width=d;
var c=this.get_element();
c.style.width=this._width;
},get_enabledIncrease:function(){return this._enabledIncrease;
},set_enabledIncrease:function(c){this._enabledIncrease=c;
this._setButtonState(this._increaseButton,c);
},get_enabledDecrease:function(){return this._enabledDecrease;
},set_enabledDecrease:function(c){this._enabledDecrease=c;
this._setButtonState(this._decreaseButton,c);
},_setButtonState:function(c,d){if(!d){Sys.UI.DomElement.addCssClass(c,"disabled-button");
}else{Sys.UI.DomElement.removeCssClass(c,"disabled-button");
}},get_visibleInput:function(){return this._visibleInput;
},set_visibleInput:function(c){this._visibleInput=c;
if(this._inputElement){if(!this._visibleInput){this._inputElement.style.display="none";
}else{this._inputElement.style.display="";
}}}};
Telerik.Web.UI.EditorSpinBox.registerClass("Telerik.Web.UI.EditorSpinBox",Telerik.Web.UI.EditorButton);
Telerik.Web.UI.EditorCheckBox=function(c){Telerik.Web.UI.EditorCheckBox.initializeBase(this,[c]);
this._selectedItem=false;
};
Telerik.Web.UI.EditorCheckBox.prototype={dispose:function(){this._inputElement.onclick=null;
this._inputElement.Parent=null;
this._inputElement=null;
Telerik.Web.UI.EditorCheckBox.callBaseMethod(this,"dispose");
},get_selectedItem:function(){return this._selectedItem;
},set_value:function(c){if(this._inputElement.checked!=c){this._inputElement.checked=c;
}},initialize:function(){var c=document.createElement("input");
c.setAttribute("type","CHECKBOX");
c.Parent=this;
c.onclick=function(d){var f=this.Parent;
f._selectedItem=!f._selectedItem;
this.checked=f._selectedItem;
f._selectedItem=this.checked;
f.raiseEvent("valueSelected");
};
this._inputElement=c;
this.get_element().appendChild(c);
}};
Telerik.Web.UI.EditorCheckBox.registerClass("Telerik.Web.UI.EditorCheckBox",Telerik.Web.UI.EditorButton);
Telerik.Web.UI.EditorTextBox=function(c){Telerik.Web.UI.EditorTextBox.initializeBase(this,[c]);
this._width="100px";
this._selectedItem="";
};
Telerik.Web.UI.EditorTextBox.prototype={dispose:function(){this._inputElement.onchange=null;
this._inputElement.onkeypress=null;
this._inputElement.onclick=null;
this._inputElement.Parent=null;
this._inputElement=null;
Telerik.Web.UI.EditorTextBox.callBaseMethod(this,"dispose");
},get_width:function(){return this._width;
},set_width:function(c){this._width=c;
},initialize:function(){var d=document.createElement("input");
d.style.width=this.get_width();
d.Parent=this;
var c=function(h,g,f){if(f){if(g.Executed){g.Executed=false;
return $telerik.cancelRawEvent(h);
}}g.Executed=true;
g.Parent._selectedItem=g.value;
g.Parent.raiseEvent("valueSelected");
return $telerik.cancelRawEvent(h);
};
d.onchange=function(f){if(!f){f=window.event;
}return c(f,this,true);
};
d.onclick=function(f){this.focus();
};
d.onkeypress=function(f){if(!f){f=window.event;
}if(f.keyCode==13){return c(f,this);
}};
this._inputElement=d;
this.get_element().appendChild(d);
},get_selectedItem:function(){return this._selectedItem;
},get_value:function(){return this._inputElement.value;
},set_value:function(c){if(null==c){c="";
}this._inputElement.value=c;
}};
Telerik.Web.UI.EditorTextBox.registerClass("Telerik.Web.UI.EditorTextBox",Telerik.Web.UI.EditorButton);
a.ImageDialogCaller=function(c){a.ImageDialogCaller.initializeBase(this,[c]);
};
a.ImageDialogCaller.prototype={dispose:function(){this._inputElement=null;
var c=this.get_pushButton();
if(c){c.onclick=null;
}this.set_pushButton(null);
this.set_editor(null);
a.ImageDialogCaller.callBaseMethod(this,"dispose");
},initialize:function(){var c=this.get_element();
this._inputElement=c.getElementsByTagName("INPUT")[0];
var d=c.getElementsByTagName("A")[0];
this.set_pushButton(d);
if(d){d.onclick=Function.createDelegate(this,this._onButtonClickHandler);
}},_onButtonClickHandler:function(c){this.callImageDialog();
},_dialogCallbackFunction:function(f,d){var e=d&&d.get_value?d.get_value():null;
var c="";
if(e&&e.getAttribute){c=e.getAttribute("src",2);
}if(c){this._inputElement.value=c;
this.raiseEvent("valueSelected");
}},callImageDialog:function(){var d=Function.createDelegate(this,this._dialogCallbackFunction);
var c=this.get_editor();
var h=null;
if(c){h=c.get_dialogOpener();
}else{if(a.Dialogs&&a.Dialogs.CommonDialogScript&&a.Dialogs.CommonDialogScript.get_windowReference()){h=a.Dialogs.CommonDialogScript.get_windowReference().get_dialogOpener();
}}var k=null;
if(h){var e=h.get_additionalQueryString();
var j=this._inputElement.value;
if(j){var f=j;
h.set_additionalQueryString(e+"&rndnum="+(new Date()-100)+"&PreselectedItemUrl="+encodeURIComponent(f));
var i=c?c.get_document():document;
k=i.createElement("img");
k.setAttribute("src",f);
}}var g=new a.EditorCommandEventArgs("ImageManager",null,k);
a.Editor.CommandList._getDialogArguments(g,"IMG",c,"ImageManager");
if(c){c.showDialog("ImageManager",g,d);
}else{if(h){h.open("ImageManager",g,d);
}}if(h){h.set_additionalQueryString(e);
}},get_value:function(){return this._inputElement.value;
},set_value:function(c){if(null==c){c="";
}this._inputElement.value=c;
}};
b.registerControlProperties(a.ImageDialogCaller,{pushButton:null,editor:null,width:""});
a.ImageDialogCaller.registerClass("Telerik.Web.UI.ImageDialogCaller",a.EditorButton);
})();
Type.registerNamespace("Telerik.Web.UI");
(function(){var b=$telerik.$;
var a=Telerik.Web.UI;
a.EditorDropDown=function(c){a.EditorDropDown.initializeBase(this,[c]);
this.isIE=$telerik.isIE;
this._popupVisible=false;
this._rendered=false;
this._childrenRendered=false;
this._popupElement=null;
this._itemRootElement=null;
this._onPopupClickDelegate=null;
this._onPopupMouseDownDelegate=null;
this._onPopupMouseOverDelegate=null;
this._items=[];
this._isArrayCollection=false;
this._selectedIndex=-1;
this._activeIndex=-1;
};
a.EditorDropDown.prototype={click:function(c){this.show();
return $telerik.cancelRawEvent(c);
},dispose:function(){a.EditorDropDown.callBaseMethod(this,"dispose");
this.disposeChildren();
this.detachEventHandlers();
},isExpanded:function(){return this._popupVisible;
},show:function(){if(this._popupVisible){return;
}if(this.get_clearSelectedOnShow()){this.set_selectedIndex(-1);
}var c=false;
if(!this._rendered){this.render();
c=true;
}this.raiseEvent("show");
if(!this._childrenRendered){this.renderChildren();
this._childrenRendered=true;
c=true;
}if(c){this._makeAllItemsUnselectable();
}this._show();
if(this.get_enableAriaSupport()){this._popupElement.removeAttribute("aria-hidden");
}},configurePopupPropertiesBeforeShow:function(){this._popupBehavior.set_positioningMode(Telerik.Web.PositioningMode.BottomLeft);
},hide:function(){if(this._popupBehavior){this._popupBehavior.hide(true);
}this._popupVisible=false;
this._getPopupVisibilityController().notifyPopupClosed(this);
this.raiseEvent("hide");
if(this.get_enableAriaSupport()){this._popupElement.setAttribute("aria-hidden","true");
}},onPopupMouseOver:function(c){var d=this.resolveActiveIndex(c);
if(d>-1){this.set_activeIndex(d,c);
}$telerik.cancelRawEvent(c);
},_onPopupClick:function(c){var d=this.resolveActiveIndex(c);
$telerik.cancelRawEvent(c);
if(d>-1){this._selectedIndex=d;
if(this.get_enableAriaSupport()){this.selectUIItem(null,null,true);
}this.hide();
this.raiseEvent("valueSelected");
}},get_activeIndex:function(){return this._activeIndex;
},set_activeIndex:function(d,c){this._activeIndex=d;
this.selectUIItem(c);
},selectPreviousItem:function(){var c=this.get_activeIndex();
if(c-1>=0){this.set_activeIndex(c-1);
}},selectNextItem:function(){var c=this.get_activeIndex();
if(c+1<this._items.length){this.set_activeIndex(c+1);
}},selectUIItem:function(n,f,m){if(!this._popupElement){return;
}var h=this.get_popupElement();
var k=h.getElementsByTagName("TD");
var j=k.length;
var g=this.get_activeIndex();
var l=null;
var c=this.get_enableAriaSupport()&&m;
for(var d=0;
d<j;
d++){var o=k[d];
if(c){o.removeAttribute("aria-selected");
}if(o.item_index==g){o.className="reItemOver";
l=o;
if(c){l.setAttribute("aria-selected","true");
h.setAttribute("aria-activedescendant",l.getAttribute("id"));
h.childNodes[0].setAttribute("aria-activedescendant",l.getAttribute("id"));
}}else{if(f&&o.item_index<=g){o.className="reItemOver";
}else{o.className="";
}}}if(l&&!n){this._scrollIntoView(l);
}return l;
},_scrollIntoView:function(c){$telerik.scrollIntoView(c);
},attachEventHandlers:function(){if(!this._popupElement){return;
}this.detachEventHandlers();
this._onPopupMouseOverDelegate=Function.createDelegate(this,this.onPopupMouseOver);
$addHandler(this._popupElement,"mouseover",this._onPopupMouseOverDelegate);
this._onPopupClickDelegate=Function.createDelegate(this,this._onPopupClick);
if($telerik.isIE||this.get_contentAreaMode()==a.EditorContentAreaMode.Div){$addHandler(this._popupElement,"mousedown",this._onPopupClickDelegate);
}else{$addHandler(this._popupElement,"click",this._onPopupClickDelegate);
}},detachEventHandlers:function(){if(null!=this._onPopupMouseOverDelegate){$removeHandler(this._popupElement,"mouseover",this._onPopupMouseOverDelegate);
this._onPopupMouseOverDelegate=null;
}if(null!=this._onPopupClickDelegate){if($telerik.isIE){$removeHandler(this._popupElement,"mousedown",this._onPopupClickDelegate);
}else{$removeHandler(this._popupElement,"click",this._onPopupClickDelegate);
}this._onPopupClickDelegate=null;
}},disposeChildren:function(){this._childrenRendered=false;
if(this._itemRootElement&&this._itemRootElement.parentNode){var c=this._itemRootElement;
this.renderItemRoot();
c.parentNode.replaceChild(this._itemRootElement,c);
}},render:function(){this._createUI();
this.renderHeader();
this.renderChildren();
this.renderFooter();
this._rendered=true;
this._childrenRendered=true;
},renderHeader:function(){},renderFooter:function(){},renderItemRoot:function(){this._itemRootElement=this._getTable();
return this._itemRootElement;
},renderNewRow:function(){return(this._itemRootElement.insertRow(-1));
},renderItemContainer:function(){var d=this._itemRootElement.rows[this._itemRootElement.rows.length-1];
var c=d.insertCell(-1);
return c;
},renderChildren:function(){for(var d=0;
d<this._items.length;
d++){if(0==(d%this.get_itemsperrow())){this.renderNewRow();
}var c=this.renderItemContainer();
this.markItemContainer(c,d);
this.renderChild(c,this._items[d],d);
}},renderChild:function(e,g,i){var d=document.createElement("span");
if(g){var c=null;
var j=null;
if(g instanceof Array){c=g[1];
j=g[2];
}else{c=g;
}if(j){var f=document.createElement("span");
f.innerHTML="&nbsp;";
f.className=j;
d.appendChild(f);
}if(c){d.innerHTML+=c;
d.noWrap=true;
}}e.innerHTML=d.innerHTML;
if(this.get_enableAriaSupport()){var h=this._popupBehavior.get_id()+"_"+i;
e.setAttribute("id",h);
e.setAttribute("role","option");
}},resolveActiveIndex:function(f){var d=f.target;
var c=-1;
while(d&&d!=this._itemRootElement){if(null!=d.item_index){c=d.item_index;
break;
}d=d.parentNode;
}return c;
},markItemContainer:function(d,c){d.item_index=c;
},_makeAllItemsUnselectable:function(){if(!this._popupElement){return;
}this._popupElement.setAttribute("unselectable","on");
var e=this._popupElement.getElementsByTagName("*");
var d=e.length;
for(var c=0;
c<d;
c++){e[c].unselectable="on";
}},_show:function(){this.configurePopupPropertiesBeforeShow();
var f=this._popupElement;
var e=this.get_sizetofit();
var g=f.style.overflow;
if(e){f.style.overflowY="hidden";
}f.style.width=this.get_popupwidth();
f.style.height=this.get_popupheight();
this._itemRootElement.style.width="100%";
this._popupBehavior.show();
var c=this._getPopupChildrenHeight();
if(c!="0px"){c=this._getQuirksModeHeight(f,c);
}if(e){f.style.width=this._getPopupChildrenWidth();
f.style.height=c;
}else{var h=parseInt(c);
var d=parseInt(f.style.height);
if(h<d&&h>(d/2)){f.style.height=c;
}}this._popupBehavior.show();
this._getPopupVisibilityController().set_activePopup(this);
f.style.zIndex="100000";
if(e){f.style.overflowY=g;
}this._popupVisible=true;
},_getQuirksModeHeight:function(g,e){try{if($telerik.quirksMode){var f=$telerik.getBorderBox(g);
var d=$telerik.getPaddingBox(g);
var c=parseInt(e)+(f.top*2);
c+=d.top+d.bottom;
e=c+"px";
}}catch(i){}return e;
},_getPopupChildrenWidth:function(){var f=this.get_popupElement().childNodes;
var e=0;
for(var c=0;
c<f.length;
c++){var d=f[c].offsetWidth;
if(d&&d>e){e=d;
}}return e+"px";
},_getPopupChildrenHeight:function(){var d=this.get_popupElement().childNodes;
var c=0;
for(var e=0;
e<d.length;
e++){if(d[e].offsetHeight){c+=d[e].offsetHeight;
}}return c+"px";
},_getPopupVisibilityController:function(){return a.Editor.PopupController;
},getUniqueID:function(){if(!window.RadEditor_uniqueSeed){window.RadEditor_uniqueSeed=new Date()-101;
}if(!window.RadEditor_uniqueIdCounter){window.RadEditor_uniqueIdCounter=1;
}else{window.RadEditor_uniqueIdCounter++;
}var c=window.RadEditor_uniqueSeed-window.RadEditor_uniqueIdCounter;
return"UniqueID"+c;
},_createUI:function(){if(this._popupBehavior){return;
}var d=this.get_element();
if(!this._popupElement){var c=document.createElement("div");
$telerik.addCssClasses(c,[this.get_skin(),this.get_rootpopupclassname(),this.get_popupclassname()]);
this._popupElement=c;
this._popupElement.style.display="none";
this._popupElement.style.position="absolute";
document.body.appendChild(this._popupElement);
}this.renderItemRoot();
this._popupElement.appendChild(this._itemRootElement);
this._popupBehavior=$create(Telerik.Web.PopupBehavior,{id:this.getUniqueID(),parentElement:d},null,null,this._popupElement);
if(this.get_enableAriaSupport()){var e=this.get_popupElement();
e.setAttribute("role","listbox");
e.setAttribute("aria-hidden","true");
e.setAttribute("aria-label",this.get_element().title);
}this.attachEventHandlers();
},_getTable:function(){var c=document.createElement("table");
c.border=0;
c.cellPadding=0;
c.setAttribute("unselectable","on");
c.style.cursor="default";
if(this.get_enableAriaSupport()){c.setAttribute("role","presentation");
}return c;
},get_popupElement:function(){return this._popupElement;
},get_selectedItem:function(){if(this._items&&this._selectedIndex>-1){var c=this._items[this._selectedIndex];
var d=((true==this._isArrayCollection)||(c instanceof Array))?c[0]:c;
return d;
}return null;
},get_selectedIndex:function(){return this._selectedIndex;
},set_selectedIndex:function(c){this._selectedIndex=c;
this.set_activeIndex(c);
},get_items:function(){return this._items;
},set_items:function(c){this.disposeChildren();
this._items=c;
},set_enableAriaSupport:function(d){a.EditorDropDown.callBaseMethod(this,"set_enableAriaSupport",[d]);
var c=this.getAnchorElement();
if(c&&this.get_enableAriaSupport()){c.setAttribute("aria-haspopup","true");
}}};
b.registerControlProperties(a.EditorDropDown,{popupheight:"200px",popupwidth:"200px",rootpopupclassname:"reDropDownBody",popupclassname:"",sizetofit:false,itemsperrow:1,clearSelectedOnShow:true});
b.registerControlEvents(a.EditorDropDown,["show","hide"]);
a.EditorDropDown.registerClass("Telerik.Web.UI.EditorDropDown",a.EditorButton);
Telerik.Web.UI.EditorUpdateableDropDown=function(c){Telerik.Web.UI.EditorUpdateableDropDown.initializeBase(this,[c]);
};
Telerik.Web.UI.EditorUpdateableDropDown.prototype={updateValue:function(c){if(null==c){return;
}try{if(!c){c=this.get_text();
}var f=this.getSpanElement();
if(f){this._value=c;
f.innerHTML=(""+c).replace(/\s+/ig,"&nbsp;");
}}catch(d){}},get_value:function(){if(!this._value||this._value==this.get_text()){return"";
}return this._value;
},set_value:function(c){this.updateValue(c);
}};
Telerik.Web.UI.EditorUpdateableDropDown.registerClass("Telerik.Web.UI.EditorUpdateableDropDown",Telerik.Web.UI.EditorDropDown);
Telerik.Web.UI.EditorSelfUpdateableDropDown=function(c){Telerik.Web.UI.EditorSelfUpdateableDropDown.initializeBase(this,[c]);
this._clientStateFieldID=null;
};
Telerik.Web.UI.EditorSelfUpdateableDropDown.prototype={_onPopupClick:function(f){var d=this.resolveActiveIndex(f);
$telerik.cancelRawEvent(f);
if(d>-1){this._selectedIndex=d;
this.hide();
var c=this.get_selectedItem();
if(c){this.updateValue(c);
}this.raiseEvent("valueSelected");
}}};
Telerik.Web.UI.EditorSelfUpdateableDropDown.registerClass("Telerik.Web.UI.EditorSelfUpdateableDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.EditorSplitButton=function(c){Telerik.Web.UI.EditorSplitButton.initializeBase(this,[c]);
this._updateHeader=true;
};
Telerik.Web.UI.EditorSplitButton.prototype={click:function(f){var d=this.isArrowClicked(f.target);
if(d||!this._updateHeader){this.show();
}else{var c=this.get_selectedItem();
if(null==c){this.show();
}else{this.raiseEvent("valueSelected");
}}return $telerik.cancelRawEvent(f);
},initialize:function(){Telerik.Web.UI.EditorSplitButton.callBaseMethod(this,"initialize");
this.set_clearSelectedOnShow(false);
},isArrowClicked:function(c){var d=this._getArrowElement();
if(c==d){return true;
}return false;
},_getArrowElement:function(){var d=this.getAnchorElement().getElementsByTagName("SPAN");
var c=d[d.length-1];
return c;
},get_updateHeader:function(){return this._updateHeader;
},set_updateHeader:function(c){this._updateHeader=c;
}};
Telerik.Web.UI.EditorSplitButton.registerClass("Telerik.Web.UI.EditorSplitButton",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.EditorToolStrip=function(c){Telerik.Web.UI.EditorToolStrip.initializeBase(this,[c]);
this._tools=[];
};
Telerik.Web.UI.EditorToolStrip.prototype={selectUIItem:function(g){for(var c=0;
c<this._items.length;
c++){var d=this._items[c];
if(c==this._activeIndex&&d.get_enabled()){d.setOn(true,"aria-selected");
var f=d.getAnchorElement();
if(f&&this.get_enableAriaSupport()){this.get_popupElement().setAttribute("aria-activedescendant",f.getAttribute("id"));
}}else{d.setOn(false,"aria-selected");
}}},set_selectedIndex:function(i){Telerik.Web.UI.EditorToolStrip.callBaseMethod(this,"set_selectedIndex",[i]);
if(this.get_updateHeader()){var h=this.get_selectedItem();
if(!h||!h.getSpanElement){return;
}var e=h.getSpanElement();
if(e){var f=e.cloneNode(true);
var c=this.getSpanElement();
var g=c.parentNode;
g.replaceChild(f,c);
var d=h.getAnchorElement();
if(d){g.setAttribute("title",d.getAttribute("title"));
}}}},hide:function(){Telerik.Web.UI.EditorToolStrip.callBaseMethod(this,"hide");
if(this.isIE){var d=this.get_selectedItem();
if(!d||!d.get_element){return;
}var c=d.get_element();
if(c){var e=c.cloneNode(true);
c.replaceNode(e);
d._element=e;
}}},show:function(){var f=this._items;
for(var c=0,e=f.length;
c<e;
c++){var d=f[c];
d.setOn(false,"aria-selected");
}Telerik.Web.UI.EditorToolStrip.callBaseMethod(this,"show");
},_onPopupClick:function(f){var c=this._resolveSelectedTool(f);
$telerik.cancelRawEvent(f);
if(c){var d=Array.indexOf(this._items,c);
if($telerik.isSafari){this._selectedIndex=d;
this.set_activeIndex(d);
}else{this.set_selectedIndex(d);
}this.hide();
this.raiseEvent("valueSelected");
}},renderItemRoot:function(){var c=document.createElement("div");
c.className="reTlbVertical";
c.style.cssFloat="left";
c.style.width="100%";
this._itemRootElement=c;
return this._itemRootElement;
},renderChildren:function(){var n=this.get_itemsperrow();
var f=this.get_tools();
var l=document.createElement("ul");
l.setAttribute("onmousedown","return false;");
l.className="reToolbar "+this.get_skin();
this._itemRootElement.appendChild(l);
for(var d=0;
d<f.length;
d++){if(n>1&&d>1&&(d%this.get_itemsperrow()==0)){l=document.createElement("ul");
l.className="reToolbar "+this.get_skin();
this._itemRootElement.appendChild(l);
}var e=f[d];
if(null==e.showText){e.showText=true;
}var c=document.createElement("li");
l.appendChild(c);
var m=Telerik.Web.UI.EditorButton.createTool(e,null,null,null,c);
var j=this.get_enableAriaSupport();
if(j){var h=m.getAnchorElement();
if(h){m.set_enableAriaSupport(j,"option");
h.setAttribute("aria-posinset",d+1);
var g=this._popupBehavior.get_id()+"_"+e.name;
c.setAttribute("role","presentation");
h.setAttribute("id",g);
var k=$telerik.getChildByClassName(h,"reButton_text");
if(k){k.setAttribute("id",g+"_text");
h.setAttribute("aria-describedby",k.id);
}}l.setAttribute("role","presentation");
}this._items[this._items.length]=m;
}},_resolveSelectedTool:function(f){for(var c=0;
c<this._items.length;
c++){var d=this._items[c];
if(d.isTarget(f)){if(d.get_enabled()){return d;
}else{return null;
}}}},get_tools:function(){return this._tools;
},set_tools:function(c){this._tools=Array.clone(c);
}};
Telerik.Web.UI.EditorToolStrip.registerClass("Telerik.Web.UI.EditorToolStrip",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.EditorContextMenu=function(c){Telerik.Web.UI.EditorContextMenu.initializeBase(this,[c]);
this._parentElement=null;
this._eventObject=null;
};
Telerik.Web.UI.EditorContextMenu.prototype={initialize:function(){this.set_updateHeader(false);
this.set_clearSelectedOnShow(true);
},show:function(){this.set_activeIndex(-1);
Telerik.Web.UI.EditorContextMenu.callBaseMethod(this,"show");
},configurePopupPropertiesBeforeShow:function(){var d=this._popupBehavior;
d.set_positioningMode(Telerik.Web.PositioningMode.Absolute);
var c=this.get_parentElement();
if(c){if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(c)&&c.tagName=="DIV"){c=document.body;
}d.set_parentElement(c);
}var f=this._eventObject;
if(f){d.set_x(f.clientX+10);
d.set_y(f.clientY+10);
}},set_eventObject:function(c){this._eventObject=c;
},get_tagName:function(){return this._tagName;
},set_tagName:function(c){this._tagName=c;
},get_parentElement:function(){return this._parentElement;
},set_parentElement:function(c){this._parentElement=c;
}};
Telerik.Web.UI.EditorContextMenu.registerClass("Telerik.Web.UI.EditorContextMenu",Telerik.Web.UI.EditorToolStrip);
})();
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.AlignmentSelector=function(a){Telerik.Web.UI.Editor.AlignmentSelector.initializeBase(this,[a]);
this._tagName="TD";
this._selectedTuple=null;
this._noAlignmentIndex=0;
this._onValueSelectedDelegate=null;
this._clientStateFieldID=null;
};
Telerik.Web.UI.Editor.AlignmentSelector.prototype={initialize:function(){Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"initialize");
this.set_popupwidth("78px");
this.set_popupheight("100px");
this.set_popupclassname("reAlignmentSelector");
this.set_itemsperrow(3);
this._onValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this.add_valueSelected(this._onValueSelectedDelegate);
this.setTagName(this._tagName);
},dispose:function(){this.remove_valueSelected(this._onValueSelectedDelegate);
Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"dispose");
},_imgAlignment:[["",""],["none",""],["",""],["",""],["top",""],["",""],["left",""],["absmiddle",""],["right",""],["",""],["bottom",""],["",""]],_cellAlignment:[["",""],["none",""],["",""],["left","top"],["center","top"],["right","top"],["left","middle"],["center","middle"],["right","middle"],["left","bottom"],["center","bottom"],["right","bottom"]],_tableAlignment:[["",""],["none",""],["",""],["left",""],["center",""],["right",""],["",""],["",""],["",""],["",""],["",""],["",""]],_captionAlignment:[["",""],["none",""],["",""],["left","top"],["center","top"],["right","top"],["",""],["",""],["",""],["left","bottom"],["center","bottom"],["right","bottom"]],_alignmentClassName:["reNoAlignment","reNoAlignment","reNoAlignment","reTopLeft","reTopCenter","reTopRight","reMiddleLeft","reMiddleCenter","reMiddleRight","reBottomLeft","reBottomCenter","reBottomRight"],_getLookupTableByTagName:function(a){switch(a.toUpperCase()){case"IMG":return this._imgAlignment;
case"TABLE":return this._tableAlignment;
case"TD":return this._cellAlignment;
case"TH":return this._cellAlignment;
case"CAPTION":return this._captionAlignment;
default:return null;
}},_configureAlignmentTable:function(d){if(!this._rendered){this.render();
}var c=this._itemRootElement;
var e=0;
for(var a=0;
a<c.rows.length;
a++){var f=false;
for(var b=0;
b<c.rows[a].cells.length;
b++){var h=c.rows[a].cells[b];
var g=this._isAvailable(e++);
h.style.visibility=g?"visible":"hidden";
f|=g;
}if(null!=document.all){c.rows[a].style.display=f?"":"none";
}}},_isAvailable:function(a){var b=false;
if(this._items){var c=this._items[a];
b=((null!=c)&&(""!=c[0]||""!=c[1]));
}return b;
},renderChild:function(b,c,a){var d=document.createElement("div");
if(c){d.innerHTML="&nbsp;";
d.className=this._alignmentClassName[a];
}b.appendChild(d);
},_onDropDownValueSelected:function(){this.set_selectedIndex(this.get_selectedIndex());
},_selectAlignment:function(f,e){f=(""==f||!f)?"none":f.toUpperCase();
e=!e?"":e.toUpperCase();
if(this._items){var d=-1;
for(var a=0;
a<this._items.length;
a++){if(this._isAvailable(a)){var c=this._items[a][0].toUpperCase();
var b=this._items[a][1].toUpperCase();
if(-1==d){d=a;
}if((f==c||f==b)&&(e==c||e==b)){this.set_selectedIndex(a);
return;
}}}this.set_selectedIndex(d);
}},set_selectedIndex:function(a){Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"set_selectedIndex",[a]);
var c=this.getSpanElement();
var b=this._alignmentClassName[a];
c.className=b;
},setTagName:function(a){this._tagName=a;
this._items=this._getLookupTableByTagName(this._tagName);
this.set_selectedIndex(this._noAlignmentIndex);
},updateValue:function(a,b){this._selectAlignment(a,b);
},getAlign:function(){var b=this._items[this._selectedIndex];
var a=(b?b[0]:"");
if("none"==a){a="";
}return a;
},getVAlign:function(){var b=this._items[this._selectedIndex];
var a=(b?b[1]:"");
if("none"==a){a="";
}return a;
},show:function(){Telerik.Web.UI.Editor.AlignmentSelector.callBaseMethod(this,"show");
this._itemRootElement.cellSpacing=0;
this._configureAlignmentTable(this._tagName);
},get_clientStateFieldID:function(){return this._clientStateFieldID;
},set_clientStateFieldID:function(a){this._clientStateFieldID=a;
}};
Telerik.Web.UI.Editor.AlignmentSelector.registerClass("Telerik.Web.UI.Editor.AlignmentSelector",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.Editor.InsertTableHelper=function(a){Telerik.Web.UI.Editor.InsertTableHelper.initializeBase(this,[a]);
};
Telerik.Web.UI.Editor.InsertTableHelper.prototype={initialize:function(){var a=new Array(this.get_itemsperrow()*this.get_itemsperrow());
for(var b=0;
b<a.length;
b++){a[b]=b;
}this._items=a;
},hide:function(){},renderChild:function(c,d,a){var e=document.createElement("div");
e.innerHTML="&nbsp;";
c.appendChild(e);
var b=this._getDimensionByIndex(a);
c.setAttribute("title"," "+b.rows+" x "+b.cols+" ");
},_getDimensionByIndex:function(b){var d=0;
var e=0;
var f=this.get_itemsperrow();
for(var a=0;
a<this._items.length;
a++){if(a%f==0){d++;
e=0;
}e++;
if(b==a){break;
}}var c={rows:d,cols:e};
return c;
},get_selectedItem:function(){var a=this.get_selectedIndex();
return this._getDimensionByIndex(a);
},selectUIItem:function(k,f){var h=this._popupElement.getElementsByTagName("TD");
var g=h.length;
var d=this.get_activeIndex();
var l=this._getDimensionByIndex(d);
var j=l.cols;
for(var a=0;
a<g;
a++){var c=h[a];
var b=c.item_index;
if(b<=d&&c.cellIndex<j){c.className="reItemOver";
}else{c.className="";
}}}};
Telerik.Web.UI.Editor.InsertTableHelper.registerClass("Telerik.Web.UI.Editor.InsertTableHelper",Telerik.Web.UI.EditorDropDown);
Telerik.Web.UI.Editor.InsertTable=function(a){Telerik.Web.UI.Editor.InsertTable.initializeBase(this,[a]);
};
Telerik.Web.UI.Editor.InsertTable.prototype={initialize:function(){Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"initialize");
this._onTableHelperValueSelectedDelegate=Function.createDelegate(this,this._onTableHelperValueSelected);
this._tableHelper=null;
this._tableHelperItemsPerRow=this.get_itemsperrow();
this.set_itemsperrow(6);
this.set_popupwidth("140px");
this.set_updateHeader(false);
var a=this.get_tools();
this._longTool=a[0];
Array.removeAt(a,0);
for(var b=0;
b<a.length;
b++){a[b].showText=false;
}},show:function(){Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"show");
this._tableHelper.set_selectedIndex(-1);
},_onPopupClick:function(a){this._tableHelperClicked=false;
Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"_onPopupClick",[a]);
},_onTableHelperValueSelected:function(){this._tableHelperClicked=true;
this.set_selectedIndex(-1);
var a=this.getSpanElement();
a.className="InsertTable";
this.hide();
this.raiseEvent("valueSelected");
},get_selectedItem:function(){if(this._tableHelperClicked){return this._tableHelper.get_selectedItem();
}else{return Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"get_selectedItem");
}},renderHeader:function(){var c={skin:this.get_skin(),itemsperrow:this._tableHelperItemsPerRow,sizetofit:true};
var a={valueSelected:this._onTableHelperValueSelectedDelegate};
var b=$create(Telerik.Web.UI.Editor.InsertTableHelper,c,a,null,document.createElement("div"));
b.set_rootpopupclassname("");
this._tableHelper=b;
b.render();
var e=b.get_popupElement();
e.style.display="";
e.style.visibility="visible";
e.style.position="";
e.style.cssFloat="left";
var d=this.get_popupElement();
d.insertBefore(e,d.firstChild);
},renderChildren:function(){Telerik.Web.UI.Editor.InsertTable.callBaseMethod(this,"renderChildren");
var d=this._itemRootElement;
if(this._longTool){var b=document.createElement("ul");
d.insertBefore(b,d.firstChild);
this._longTool.showText=true;
var c=document.createElement("li");
b.appendChild(c);
var a=Telerik.Web.UI.EditorButton.createTool(this._longTool,null,null,null,c);
a.get_element().style.width="auto";
this._items[this._items.length]=a;
}}};
Telerik.Web.UI.Editor.InsertTable.registerClass("Telerik.Web.UI.Editor.InsertTable",Telerik.Web.UI.EditorToolStrip);
Telerik.Web.UI.Editor.ColorPicker=function(a){Telerik.Web.UI.Editor.ColorPicker.initializeBase(this,[a]);
this._clientStateFieldID=null;
this._addCustomColorText="Add Custom Color";
};
Telerik.Web.UI.Editor.ColorPicker.prototype={initialize:function(){Telerik.Web.UI.Editor.ColorPicker.callBaseMethod(this,"initialize");
this.set_popupclassname("reColorPicker");
this.set_sizetofit(true);
this.set_itemsperrow(10);
this._onValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this.add_valueSelected(this._onValueSelectedDelegate);
},dispose:function(){this.remove_valueSelected(this._onValueSelectedDelegate);
Telerik.Web.UI.Editor.ColorPicker.callBaseMethod(this,"dispose");
},_onDropDownValueSelected:function(){var a=this.get_selectedItem();
this.set_color(a);
},get_value:function(){return this.get_color();
},set_value:function(a){this.set_color(a);
},set_color:function(c){if(!c){c="";
}var b=this.getSpanElement();
b.style.borderBottom="0px";
b.style.height="";
if(c){var a=b.offsetHeight;
if(a){b.style.height=(a-3)+"px";
}try{b.style.borderBottom="3px solid "+c;
}catch(d){}}this._color=c;
},get_color:function(){return this._color;
},onPopupMouseOver:function(c){Telerik.Web.UI.Editor.ColorPicker.callBaseMethod(this,"onPopupMouseOver",[c]);
var b=this.get_activeIndex();
var a=this._items[b];
if(null==a){return;
}if(this._infoSpan1){this._infoSpan1.innerHTML=a;
this._infoSpan1.style.backgroundColor=a;
}if(this._infoSpan2){this._infoSpan2.innerHTML=a;
this._infoSpan2.style.color=a;
}},_customColorClicked:function(f){var a=prompt(this.get_addCustomColorText(),"#");
if(a){var c=document.createElement("a");
try{c.style.borderBottom="3px solid "+a;
}catch(f){a="";
}finally{c=null;
}}if(a){this._items[this._items.length]=a;
var b=(this._items.length-1);
if(0==(b%this.get_itemsperrow())){this.renderNewRow();
}var d=this.renderItemContainer();
this.markItemContainer(d,b);
this.renderChild(d,this._items[b],b);
this.set_selectedIndex(b);
this.hide();
this.raiseEvent("valueSelected");
}$telerik.cancelRawEvent(f);
},renderFooter:function(){var e=document.createElement("div");
e.style.textAlign="center";
var b=document.createElement("a");
b.className="reCustomColor";
b.setAttribute("href","#");
b.innerHTML=this.get_addCustomColorText();
$addHandlers(b,{click:this._customColorClicked},this);
e.appendChild(b);
this.get_popupElement().appendChild(e);
var c=document.createElement("div");
c.className="reColorPickerFooter";
var d=document.createElement("span");
d.className="reDarkColor";
var a=document.createElement("span");
a.className="reLightColor";
d.innerHTML=a.innerHTML="&nbsp";
c.appendChild(d);
c.appendChild(a);
this.get_popupElement().appendChild(c);
this._infoSpan1=d;
this._infoSpan2=a;
},renderChild:function(b,c,a){var d=document.createElement("div");
if(null!=c){d.style.backgroundColor=c;
d.setAttribute("title",c);
d.innerHTML="&nbsp;";
}b.appendChild(d);
},get_clientStateFieldID:function(){return this._clientStateFieldID;
},set_clientStateFieldID:function(a){this._clientStateFieldID=a;
},get_addCustomColorText:function(){return this._addCustomColorText;
},set_addCustomColorText:function(a){this._addCustomColorText=a;
}};
Telerik.Web.UI.Editor.ColorPicker.registerClass("Telerik.Web.UI.Editor.ColorPicker",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.Editor.UndoRedoDropDown=function(a){Telerik.Web.UI.Editor.UndoRedoDropDown.initializeBase(this,[a]);
};
Telerik.Web.UI.Editor.UndoRedoDropDown.prototype={renderFooter:function(){},get_selectedItem:function(){var a=Telerik.Web.UI.Editor.UndoRedoDropDown.callBaseMethod(this,"get_selectedItem");
if(!a){a=1;
}return a;
},selectUIItem:function(a,b){return Telerik.Web.UI.Editor.UndoRedoDropDown.callBaseMethod(this,"selectUIItem",[a,true]);
}};
Telerik.Web.UI.Editor.UndoRedoDropDown.registerClass("Telerik.Web.UI.Editor.UndoRedoDropDown",Telerik.Web.UI.EditorSplitButton);
Telerik.Web.UI.Editor.ApplyClassDropDown=function(a){Telerik.Web.UI.Editor.ApplyClassDropDown.initializeBase(this,[a]);
this._onValueSelectedDelegate=null;
this._clientStateFieldID=null;
this._clearclasstext="Clear Class";
this._isArrayCollection=true;
};
Telerik.Web.UI.Editor.ApplyClassDropDown.prototype={initialize:function(){Telerik.Web.UI.Editor.ApplyClassDropDown.callBaseMethod(this,"initialize");
this.set_popupclassname("reApplyClass");
this._onValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this.add_valueSelected(this._onValueSelectedDelegate);
this._cssClassRegex=/[^\{]*\{([^\}]+)\}/gi;
},dispose:function(){this.remove_valueSelected(this._onValueSelectedDelegate);
Telerik.Web.UI.Editor.ApplyClassDropDown.callBaseMethod(this,"dispose");
},_onDropDownValueSelected:function(){this.updateValue(this.get_selectedItem());
},_getClassIcon:function(b){if(!b){b="";
}else{b=b.toLowerCase();
}var a=document.createElement("span");
a.innerHTML="&nbsp;"+b;
a.className="reClass_"+b;
return a;
},_getClassTag:function(a){var b=a&&a.selectorText?a.selectorText:"";
var d=b.lastIndexOf(".");
if(d==0){return"ALL";
}var c=b.lastIndexOf(" ",d);
return b.substring((c+1),d);
},_getClassCss:function(a){var b=this._cssClassRegex;
var c="";
if(null!=a.cssText){c=a.cssText;
c=c.replace(b,"$1");
}else{c=a.style.cssText;
}return c;
},_getDisplayName:function(c){if(!c||!c.selectorText){return"";
}var d=c.selectorText;
var a=d.indexOf(".");
if(-1==a){a=0;
}else{a+=1;
}var b=d.indexOf(":");
if(-1==b){b=d.length;
}return d.substring(a,b);
},_getClassName:function(a){var b=a&&a.selectorText?a.selectorText:"";
var d=b.lastIndexOf(".");
if(d==-1){return"";
}var c=b.indexOf(" ",d);
if(-1==c){c=b.indexOf(":",d);
}if(-1==c){c=b.length;
}return b.substring((d+1),c);
},_getChild:function(b,c,e){var d=document.createElement("div");
if(c.toLowerCase()=="a"){d=document.createElement("a");
d.href="#";
d.onmouseover="window.status = ''; return false;";
d.onclick=new Function("return false;");
d.style.cursor="default";
}if(null!=d.style.cssText){d.style.cssText=b;
}d.setAttribute("style",b);
d.innerHTML=e;
var a=d.style;
a.visibility="visible";
a.marginLeft="0px";
a.overflowX="hidden";
a.clear="none";
a.position="";
a.cssFloat="";
a.styleFloat="";
a.width="";
return d;
},set_items:function(a){Telerik.Web.UI.Editor.ApplyClassDropDown.callBaseMethod(this,"set_items",[a]);
if(this._items.length==0||this._items[0][0]!=""){this._items.splice(0,0,["",{cssText:"",selectorText:this.get_clearclasstext()}]);
}},renderChild:function(h,e,i){var a=e[1];
if(a){var d=this._getClassTag(a);
var b=this._getClassCss(a);
var f=e[2]?e[2]:this._getDisplayName(a);
h.setAttribute("title",a.selectorText);
var g=this._getClassIcon(d);
h.appendChild(g);
var c=this._getChild(b,d,f);
h.appendChild(c);
}},get_clientStateFieldID:function(){return this._clientStateFieldID;
},set_clientStateFieldID:function(a){this._clientStateFieldID=a;
},get_clearclasstext:function(){return this._clearclasstext;
},set_clearclasstext:function(a){this._clearclasstext=a;
}};
Telerik.Web.UI.Editor.ApplyClassDropDown.registerClass("Telerik.Web.UI.Editor.ApplyClassDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.Editor.FontNameDropDown=function(a){Telerik.Web.UI.Editor.FontNameDropDown.initializeBase(this,[a]);
};
Telerik.Web.UI.Editor.FontNameDropDown.prototype={updateValue:function(a){try{if(!a){a=this.get_text();
}if(null==a||"AZBY"==a){return;
}var c=this.getSpanElement();
if(c){this._value=(""+a).replace(/\s+/ig,"&nbsp;");
c.innerHTML=this._value;
}}catch(b){}},renderChildren:function(){var c=this._items;
if(c&&c[0]&&!(c[0] instanceof Array)){for(var a=0;
a<c.length;
a++){var b=itemName=c[a];
if(itemName=="Wingdings"||itemName=="Webdings"){itemName="Arial";
}c[a]=[b,String.format("<span style='font:normal 13px {0};'>",itemName)+b+"</span>"];
}}return Telerik.Web.UI.Editor.FontNameDropDown.callBaseMethod(this,"renderChildren");
}};
Telerik.Web.UI.Editor.FontNameDropDown.registerClass("Telerik.Web.UI.Editor.FontNameDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.Editor.FontSizeDropDown=function(a){Telerik.Web.UI.Editor.FontSizeDropDown.initializeBase(this,[a]);
};
Telerik.Web.UI.Editor.FontSizeDropDown.prototype={renderChildren:function(){var c=this._items;
if(c&&c[0]&&!(c[0] instanceof Array)){for(var a=0;
a<c.length;
a++){var b=c[a];
c[a]=[b,String.format("<font size={0}>",b)+b+"</font>"];
}}return Telerik.Web.UI.Editor.FontSizeDropDown.callBaseMethod(this,"renderChildren");
}};
Telerik.Web.UI.Editor.FontSizeDropDown.registerClass("Telerik.Web.UI.Editor.FontSizeDropDown",Telerik.Web.UI.EditorUpdateableDropDown);
Telerik.Web.UI.Editor.InsertCustomLinkDropDown=function(a){Telerik.Web.UI.Editor.InsertCustomLinkDropDown.initializeBase(this,[a]);
};
Telerik.Web.UI.Editor.InsertCustomLinkDropDown.prototype={renderItemRoot:function(){var a=document.createElement("ul");
a.className="reCustomLinks";
this._itemRootElement=a;
return this._itemRootElement;
},show:function(){this._linkCounter=0;
return Telerik.Web.UI.Editor.InsertCustomLinkDropDown.callBaseMethod(this,"show");
},renderChildren:function(){this.FlatLinksArray=[];
for(var b=0;
b<this._items.length;
b++){var a=this._items[b];
this._parseSubtree(a,this._itemRootElement);
}},get_selectedItem:function(){var a=this.FlatLinksArray[this.get_selectedIndex()];
return{innerHTML:a.name,href:a.href,target:a.target,title:a.toolTip};
},_parseSubtree:function(h,l){var d=this._linkCounter;
this.FlatLinksArray[d]=h;
var m=document.createElement("li");
l.appendChild(m);
var k=h.childLinks&&h.childLinks.length;
var f=document.createElement("span");
f.innerHTML="&nbsp;";
f.className=k?"reCustomLinksIcon reIcon_plus":"reCustomLinksIcon reIcon_empty";
if(k){function b(p){var q=Sys.UI.DomElement.containsCssClass(this,"reIcon_plus");
var i=this.parentNode.getElementsByTagName("UL")[0];
if(i){i.style.display=q?"":"none";
var o=q?"reIcon_plus":"reIcon_minus";
var n=q?"reIcon_minus":"reIcon_plus";
Sys.UI.DomElement.removeCssClass(this,o);
Sys.UI.DomElement.addCssClass(this,n);
}return false;
}$addHandler(f,"click",b);
}m.appendChild(f);
var g=null;
if(h.href){g=document.createElement("a");
g.href="#";
g.innerHTML=h.name;
m.appendChild(g);
this.markItemContainer(g,this._linkCounter);
}else{g=document.createElement("span");
g.innerHTML=h.name;
m.appendChild(g);
}this._linkCounter++;
if(k){var j=document.createElement("ul");
m.appendChild(j);
var a=h.childLinks;
for(var c=0;
c<h.childLinks.length;
c++){var e=a[c];
this._parseSubtree(e,j);
}j.style.display="none";
}}};
Telerik.Web.UI.Editor.InsertCustomLinkDropDown.registerClass("Telerik.Web.UI.Editor.InsertCustomLinkDropDown",Telerik.Web.UI.EditorDropDown);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor._PopupController=function(){this._activePopup=null;
this._registerGlobalBodyEventHandlers();
};
Telerik.Web.UI.Editor._PopupController.prototype={_registerGlobalBodyEventHandlers:function(){function b(f,h){var j=window.frames;
for(var d=0;
d<j.length;
d++){var g=null;
try{g=j[d].window.document;
}catch(c){}if(!g){continue;
}try{if(false!=f){h.attachToDocument(g);
}else{h.detachFromDocument(g);
}}catch(c){}}}var a=Function.createDelegate(null,function(c){if(c.keyCode==27){Telerik.Web.UI.Editor.PopupController.hideActivePopup();
}});
$telerik.addExternalHandler(document.body,"keydown",a);
b(true,this);
$telerik.addExternalHandler(document.body,"mousedown",this._hideHandler);
Sys.Application.add_unload(function(){b(false,Telerik.Web.UI.Editor.PopupController);
$telerik.removeExternalHandler(document.body,"mousedown",Telerik.Web.UI.Editor.PopupController._hideHandler);
$telerik.removeExternalHandler(document.body,"keydown",a);
});
},attachToDocument:function(a){$telerik.addExternalHandler(a,"mousedown",this._hideHandler);
},detachFromDocument:function(a){try{$telerik.removeExternalHandler(a,"mousedown",this._hideHandler);
}catch(b){}},_hideHandler:function(a){Telerik.Web.UI.Editor.PopupController._hideIfOutsidePopup(a);
},hideActivePopup:function(){if(this._activePopup!=null){this._activePopup.hide();
this._activePopup=null;
}},_hideIfOutsidePopup:function(b){if(this._activePopup!=null){if(!this._activePopup.get_popupElement){return;
}var a=this._activePopup.get_popupElement();
if(!this._isMouseOverElement(b,a)){this.hideActivePopup();
}}},_isMouseOverElement:function(d,c){var b=null;
try{b=$telerik.getBounds(c);
}catch(d){return false;
}if(d&&d.target&&d.target.tagName=="SELECT"&&d.clientX<0){return true;
}var a=$telerik.getDocumentRelativeCursorPosition(d);
return $telerik.containsPoint(b,a.left,a.top);
},notifyPopupClosed:function(a){if(this._activePopup==a){this._activePopup=null;
}},set_activePopup:function(a){if(this._activePopup&&(a!=this._activePopup)){this._activePopup.hide();
}this._activePopup=a;
},get_activePopup:function(){return this._activePopup;
}};
Telerik.Web.UI.Editor._PopupController.registerClass("Telerik.Web.UI.Editor._PopupController",null);
if(!Telerik.Web.UI.Editor.PopupController){var createEditorPopupController=function(){window.setTimeout(function(){Telerik.Web.UI.Editor.PopupController=new Telerik.Web.UI.Editor._PopupController();
},100);
};
createEditorPopupController();
}Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.DefaultToolAdapter=function(a){Telerik.Web.UI.Editor.DefaultToolAdapter.initializeBase(this,[a]);
this._editor=null;
this._toolJSON=[];
this._tools=[];
this._contextMenusEnabled=true;
this.isIE=$telerik.isIE;
this._editorIEFirstShow=false;
this._contentAreaMode="";
};
Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper=null;
Telerik.Web.UI.Editor.DefaultToolAdapter.prototype={initialize:function(){this._onEditorSelectionChangeDelegate=Function.createDelegate(this,this._onEditorSelectionChange);
this._onEditorModeChangeDelegate=Function.createDelegate(this,this._onEditorModeChange);
this._onToolAdapterClickDelegate=Function.createDelegate(this,this._onToolBarClick);
this._onToolAdapterKeyDownDelegate=Function.createDelegate(this,this._onKeyDownHandler);
this._onDropDownValueSelectedDelegate=Function.createDelegate(this,this._onDropDownValueSelected);
this._onDropDownBeforeShowDelegate=Function.createDelegate(this,this._onDropDownBeforeShow);
this._onDropDownHideDelegate=Function.createDelegate(this,this._onDropDownHide);
this._onClientDragStartDelegate=Function.createDelegate(this,this._onClientDragStart);
this._initContextMenus();
this._registerEditorHandlers();
var b=Telerik.Web.UI.EditorToolbarMode;
var a=this.get_editor();
switch(a.get_toolbarMode()){case b.Default:a.add_firstShow(Function.createDelegate(this,function(){this._hookToolbarJson2Html();
var d=this.get_editor();
var c=d.get_element().style.height;
d._updateEditorSize(c);
}));
break;
case b.Floating:this._createFloatingButton();
break;
case b.PageTop:case b.ShowOnFocus:this._hookToolbarModeEventHandlers();
break;
}this._registerHolderHandlers();
},_hookToolbarJson2Html:function(){if(this._initializedToolbars){return;
}this._initializedToolbars=true;
var l=this.get_toolJSON();
var k=this._getToolBarElements();
var f=[];
for(var h=0;
h<l.length;
h++){var e=l[h];
var c=k[h];
this._initializeToolbar(e,c);
var a=e.attributes;
var g=a?a.dockingzone:null;
if(g){f[f.length]=[g,c];
}}if($telerik.isIE){var d=this.get_element();
d.style.height="";
}var b=this.get_editor();
var j=b.get_id();
for(var h=0;
h<f.length;
h++){var n=f[h][0];
var g=n.charAt(0).toUpperCase()+n.substring(1);
var m=$get(j+g);
if(!m){m=$get(n);
}if(m){if(m.innerHTML=="&nbsp;"){m.innerHTML="";
}m.appendChild(f[h][1]);
}}},_initNonDefaultToolbarMode:function(){var d=this.get_editor();
var c=Telerik.Web.UI.EditorToolbarMode;
var b=d.get_toolbarMode();
var a=this._toolbarHolder;
var e=Telerik.Web.UI.WindowBehaviors;
switch(b){case c.ShowOnFocus:a.set_behaviors(e.None);
a.set_visibleTitlebar(false);
break;
case c.PageTop:a.set_behaviors(e.None);
a.set_visibleTitlebar(false);
break;
default:a.set_behaviors(e.Move+e.Close+e.Pin);
break;
}this.get_element().style.visibility="visible";
},_showToolbarHolder:function(d){var e=this.get_editor();
var c=Telerik.Web.UI.EditorToolbarMode;
if(!d){if(this._toolbarHolder){this._toolbarHolder.hide();
}return;
}else{if($telerik.isIE&&!this._editorIEFirstShow){if(e.get_toolbarMode()!=c.Floating){this._editorIEFirstShow=true;
return;
}}}if(e.isFullScreen()){return;
}var b=Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper;
if(b==this&&b._toolbarHolder&&b._toolbarHolder.isVisible()){b.get_toolbarHolder().setActive(true);
return;
}if(b&&b._showToolbarHolder){b._showToolbarHolder(false);
}Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper=this;
this.get_window();
this._initNonDefaultToolbarMode();
this._toolbarHolder.show();
if($telerik.isIE){var a=e.get_toolbarMode();
switch(a){case c.ShowOnFocus:case c.PageTop:e.get_TopZone().firstChild.style.display="none";
break;
}}},_positionWindow:function(){var b=Telerik.Web.UI.EditorToolbarMode;
var c=this.get_editor();
var a=c.get_toolbarMode();
if(a==b.ShowOnFocus){this._positionToolbarAboveEditor();
}else{if(a==b.PageTop){this._positionOnPageTop();
}else{if(a==b.Floating){if(!this._wasShown){this._positionToolbarAboveEditor();
this._wasShown=true;
}}}}},get_window:function(){if(!this._toolbarHolder){var b=this.get_editor(),a=b.get_toolbarMode(),c=Telerik.Web.UI.EditorToolbarMode,e=b.get_dialogOpener(),f,d;
if(!e){return;
}f=e.get_container();
if(!f){return;
}d=f.clone(b.get_id()+"_toolbarMode");
d.set_visibleStatusbar(false);
d.set_keepInScreenBounds(a==c.RibbonBarFloating||a==c.Floating);
d.setSize(this.get_element().offsetWidth+10,1);
d.add_show(Function.createDelegate(this,function(k,m){var g=k.get_contentElement(),j,i,l,h;
if(!g){return;
}j=k.get_popupElement();
j.style.zIndex="10000";
k.setActive(true);
Sys.UI.DomElement.addCssClass(j,"reToolbarWindow");
this._hookToolbarJson2Html();
g.style.overflow="";
g.style.height="";
i=g.offsetWidth;
g.style.width=i+"px";
l=b.get_toolsWidth();
if(!l){h=k.getWindowBounds();
l=h.width;
}k.setSize(l,null);
g.style.width="100%";
this._positionWindow();
}));
this._toolbarHolder=d;
this._moveToolbarsToEditor(false);
}return this._toolbarHolder;
},_moveToolbarsToEditor:function(e){var b=this.get_element();
if(!e){if(!this._fakeToolbarParentCreated){var d=b.ownerDocument.createElement("div");
d.control=b.control;
b.parentNode.appendChild(d);
this._fakeToolbarParentCreated=true;
b.control=null;
var a=d.style;
a.height=a.fontSize=a.lineHeight="1px";
a.border="1px solid red";
a.visibility="hidden";
if(!$telerik.isIE){a.display="none";
}}var c=this.get_toolbarHolder();
c.set_contentElement(b);
b.style.width="100%";
}else{b.style.width="";
var f=this.get_editor().get_TopZone();
f.appendChild(b);
}},_positionToolbarAboveEditor:function(){var c=this._toolbarHolder;
var e=c.get_popupElement();
if(e){e.style.height="";
}var b=this.get_editor();
var g=$telerik.getBounds(b.get_element());
var a=g.x;
var f=$telerik.getBounds(c.get_popupElement()).height;
var d=g.y-f;
c.moveTo(a,d);
},_positionOnPageTop:function(){var b=this._toolbarHolder;
var d=b._getViewportBounds();
var c=d.scrollLeft;
var e=d.scrollTop;
b.moveTo(c,e);
var a=this.get_editor().get_toolsWidth();
if(a&&a.indexOf("%")==-1){b.set_width(a);
}else{b.get_popupElement().style.width="";
}if(!b.isPinned()){b.togglePin();
}},_createFloatingButton:function(){this._onToggleFloatingToolbarDelegate=Function.createDelegate(this,this._onToggleFloatingToolbar);
var b=this.get_editor();
var d=b.get_skin();
var f=b.getLocalizedString("ToggleFloatingToolbar");
var c={name:"ToggleFloatingToolbar",text:(null==f)?"ToggleFloatingToolbar":f,addClickHandler:true,skin:d};
var h={valueSelected:this._onToggleFloatingToolbarDelegate};
var a=Telerik.Web.UI.EditorButton.createTool(c,h);
var e=Telerik.Web.UI.EditorButton.createToolWrapper(a,d);
var g=$get(b.get_id()+"Top");
if(g){g.appendChild(e);
}},_onToggleFloatingToolbar:function(){var a=!this._toolbarHolder||!this._toolbarHolder.isVisible();
this._showToolbarHolder(a);
},_hookToolbarModeEventHandlers:function(){var c=this;
var a=function(){c._showToolbarHolder(true);
};
var b=this.get_editor();
if(b.isIE){this.get_editor().add_editReady(function(){b.attachEventHandler("beforeeditfocus",a);
});
}else{b.add_selectionChange(a);
}b.add_modeChange(function(){c._showToolbarHolder(c.get_editor().get_mode()==Telerik.Web.UI.EditModes.Design);
});
b.add_submit(function(){c._showToolbarHolder(false);
});
b.add_toggleScreenMode(function(){var f=c.get_editor();
var e=f.isFullScreen();
c._moveToolbarsToEditor(e);
if(f.get_toolbarMode()!=Telerik.Web.UI.EditorToolbarMode.Default){f._updateEditorSize(f.get_element().style.height);
}var d=c.get_toolbarHolder();
if(e){d.hide();
}else{d.show();
}});
this._bodyClickDelegate=Function.createDelegate(this,this._onBodyClick);
$telerik.addExternalHandler(document.body,"click",this._bodyClickDelegate);
},_disposeToolbarModeHandlers:function(){if(this._bodyClickDelegate){$telerik.removeExternalHandler(document.body,"click",this._bodyClickDelegate);
this._bodyClickDelegate=null;
}},onContextMenu:function(i){if(!this._contextMenusEnabled){return;
}var a=this.get_editor();
if(a.get_mode()!=Telerik.Web.UI.EditModes.Design){return;
}this.createContextMenus();
var b=i.srcElement?i.srcElement:i.target;
var j=b.tagName;
var c=this._contextMenus[j];
if("TH"==j&&!c){c=this._contextMenus.TD;
}var d="";
if(!c){var h=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"A");
if(!h){h=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"TD");
}if(!h){h=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"TABLE");
}if(h){d=h.tagName;
b=h;
}else{d="*";
}c=this._contextMenus[d];
}if(c&&j=="IMG"&&b&&"true"==b.getAttribute("isflash")){c=null;
}if(!this.isIE&&d=="*"){return;
}if(c){c.set_eventObject(i);
c.show();
if($telerik.isSafari){try{var f=b.tagName;
if(f=="IMG"||f=="TABLE"||f=="TD"||f=="TR"){a.selectElement(b);
}}catch(g){}}}return $telerik.cancelRawEvent(i);
},enableContextMenus:function(a){this._contextMenusEnabled=a;
},_initContextMenus:function(){var a=Function.createDelegate(this,this.onContextMenu);
var b=this.get_editor();
b.add_editReady(function(){b.attachEventHandler("contextmenu",a);
});
},createContextMenus:function(){if(this._contextMenus){return;
}this._contextMenus={};
var a=this.get_editor();
var c=a.get_skin();
var f=a.get_contextMenusJSON();
var d={valueSelected:this._onDropDownValueSelectedDelegate,show:this._onDropDownBeforeShowDelegate,hide:this._onDropDownHideDelegate};
for(var b=0;
b<f.length;
b++){var h=f[b];
h.sizetofit=true;
h.parentElement=a.get_contentAreaElement();
h.skin=c;
var g=$create(Telerik.Web.UI.EditorContextMenu,h,d,null,document.createElement("span"));
var e=h.tagName?h.tagName:"*";
this._contextMenus[e]=g;
}},dispose:function(){var c=this._getToolBarElements();
if(c){for(var a=0;
a<c.length;
a++){$clearHandlers(c[a]);
}}this._tools=[];
this._disposeToolbarModeHandlers();
var b=this._toolbarHolder;
if(b&&b.dispose){b.dispose();
}Telerik.Web.UI.Editor.DefaultToolAdapter.callBaseMethod(this,"dispose");
},setFocus:function(){var a=this._tools[0];
window.setTimeout(function(){if(a){a.setFocus();
}},100);
return false;
},getContextMenuByTagName:function(a){this.createContextMenus();
return this._contextMenus[a];
},getToolByName:function(c){for(var a=0;
a<this._tools.length;
a++){var b=this._tools[a];
if(b&&b.get_name()==c){return b;
}}return null;
},setToolState:function(f,g){if(!f){f=this._tools;
}var b=this.get_editor();
for(var a=0;
a<f.length;
a++){var e=f[a];
if(e.get_name){var d=e.get_name();
if(e.setState){var c=g;
if(null==c){c=b.getToolState(d);
}if(null!=c){e.setState(c);
}}if(e.updateValue){e.updateValue(b.getToolValue(d));
}}}},_convertCommandsArray:function(f){var d=[];
for(var a=0;
a<f.length;
a++){var e=f[a];
var c=(a+1)+". "+e.get_title();
if(e.get_argument){var b=e.get_argument();
if(b){c+=' ["'+b+'"]';
}}d[a]=[a+1,c];
}return d;
},_onDropDownHide:function(c,b){var a=this.get_editor();
a.enableContentArea(true);
},_onClientDragStart:function(a,b){Telerik.Web.UI.Editor.PopupController.hideActivePopup();
},_onDropDownBeforeShow:function(e,d){var f=this.get_editor();
if($telerik.isIE&&Telerik.Web.UI.EditorSplitButton.isInstanceOfType(e)&&e.isArrowClicked(event?event.srcElement:null)){f.setFocus();
}if(Telerik.Web.UI.EditorToolStrip.isInstanceOfType(e)){this.setToolState(e.get_items());
}if(!f.getSelection().isControl()&&!Telerik.Web.UI.EditorContextMenu.isInstanceOfType(e)){f.enableContentArea(false);
}var l=e.get_name();
if(l=="Undo"){var b=f.get_commandsManager().getCommandsToUndo();
b=this._convertCommandsArray(b);
e.set_items(b);
}else{if(l=="Redo"){var o=f.get_commandsManager().getCommandsToRedo();
o=this._convertCommandsArray(o);
e.set_items(o);
}else{if(l=="ModuleManager"){var g=f.get_modulesManager();
if(!g){return;
}var a=g.get_modules();
var p=[];
for(var k=0;
k<a.length;
k++){var j=a[k];
var c=j.get_name();
var n=j.get_title();
if(!n){n=c;
}cssClass=j.get_visible()?"reModule_visible_icon":"reModule_hidden_icon";
p[k]=[c,n,cssClass];
}e.set_updateHeader(false);
e.set_items(p);
}}}var h=e.get_items();
if(h&&h.length>0){return;
}var m=null;
switch(l){case"ApplyClass":m=f.getCssArray();
break;
case"FontName":m=Array.clone(f.get_fontNames());
break;
case"FontSize":m=f.get_fontSizes();
break;
case"InsertSymbol":m=f.get_symbols();
if(($telerik.isIE||$telerik.isSafari)&&m&&m.length){for(var k=0;
k<m.length;
k++){if(m[k]=="<"){m[k]="&lt;";
}}}break;
case"BackColor":case"ForeColor":m=f.get_colors();
break;
case"RealFontSize":m=f.get_realFontSizes();
break;
case"InsertSnippet":m=f.get_snippets();
break;
case"Zoom":m=["10%","20%","50%","100%","150%","200%","300%","500%"];
break;
case"FormatBlock":m=f.get_paragraphs();
break;
case"InsertCustomLink":m=f.get_links();
break;
case"AjaxSpellCheck":case"SpellCheck":m=f.get_languages();
break;
}if(m){e.set_items(m);
}},_initializeToolbar:function(r,b){var l=this._getToolBarItemElements(b);
var v=r.tools;
var a=this.get_editor();
var k=a.get_skin();
var x=0;
if(v){var e=0;
var j=v.length;
for(var n=0;
n<j;
n++){var t=this._getItemElementByIndex(l,n);
if(typeof(t)=="undefined"){break;
}var d=this._getToolElement(t);
e+=t.offsetWidth;
var f=v[n];
var z=f.type;
var o=f.name;
var h=Telerik.Web.UI.EditorToolType;
var m=Telerik.Web.UI.EditorButton;
var s=null;
var p=false;
var q=a.get_enableAriaSupport();
if(q){l[n].setAttribute("role","presentation");
var u=l[j+1];
if(u){u.setAttribute("role","presentation");
}if(z!=h.Separator){t.setAttribute("role","presentation");
}}if(z){switch(z){case h.Button:break;
case h.Separator:if(!x){x+=parseInt($telerik.getCurrentStyle(t,"marginLeft"));
x+=parseInt($telerik.getCurrentStyle(t,"marginRight"));
if(q){t.setAttribute("role","separator");
}}e+=x;
m=null;
break;
case h.DropDown:m=Telerik.Web.UI.EditorDropDown;
if(o=="FontName"){m=Telerik.Web.UI.Editor.FontNameDropDown;
}else{if(o=="FontSize"){m=Telerik.Web.UI.Editor.FontSizeDropDown;
}else{if(o=="FormatBlock"||o=="RealFontSize"||o=="Zoom"){m=Telerik.Web.UI.EditorUpdateableDropDown;
}else{if(o=="ApplyClass"){m=Telerik.Web.UI.Editor.ApplyClassDropDown;
}else{if(o=="InsertCustomLink"){m=Telerik.Web.UI.Editor.InsertCustomLinkDropDown;
}}}}}p=true;
break;
case h.SplitButton:m=Telerik.Web.UI.EditorSplitButton;
if(o=="ForeColor"||o=="BackColor"){m=Telerik.Web.UI.Editor.ColorPicker;
f.addCustomColorText=a.getLocalizedString("AddCustomColor");
}else{if(o=="Undo"||o=="Redo"){m=Telerik.Web.UI.Editor.UndoRedoDropDown;
}}p=true;
break;
case h.ToolStrip:m=Telerik.Web.UI.EditorToolStrip;
if(o=="InsertTable"){m=Telerik.Web.UI.Editor.InsertTable;
}p=true;
break;
case h.Custom:break;
}}if(f.attributes){for(var y in f.attributes){f[y.toLowerCase()]=f.attributes[y];
}}if(m){var w=null;
if(p){w={valueSelected:this._onDropDownValueSelectedDelegate,show:this._onDropDownBeforeShowDelegate,hide:this._onDropDownHideDelegate};
f.skin=k;
}s=$create(m,f,w,null,d);
if(this.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){s.set_contentAreaMode(Telerik.Web.UI.EditorContentAreaMode.Div);
}if(s.set_enableAriaSupport&&z!=h.Separator){s.set_enableAriaSupport(q);
}}if(s){Array.add(this._tools,s);
var g=s.get_shortCut();
if(g){var c=s.get_name();
if(Telerik.Web.UI.EditorDropDown.isInstanceOfType(s)&&c!="Undo"&&c!="Redo"){c="reToolAdapter_"+c;
Telerik.Web.UI.Editor.CommandList[c]=this._toolAdapterDropDownExpander;
}a.setShortCut(c,g);
}this._attachHandlerToToolElementParent(d);
}}this._toolbarSizeFixIE(l,b,e);
this._attachHandlerToToolbarElement(b);
}},_getToolBarItemElements:function(a){return a.getElementsByTagName("li");
},_getItemElementByIndex:function(a,b){return a[b+1];
},_getToolElement:function(a){return a.firstChild;
},_attachHandlerToToolbarElement:function(a){if($telerik.isSafari){a.setAttribute("onmousedown","return false;");
}$addHandlers(a,{click:this._onToolAdapterClickDelegate,keydown:this._onToolAdapterKeyDownDelegate},this);
},_attachHandlerToToolElementParent:function(a){},_toolbarSizeFixIE:function(c,b,a){var d=b;
if(this.isIE&&d&&a){d.style.width=(a+(c[0].offsetWidth)*2)+"px";
}},_toolAdapterDropDownExpander:function(c,b){var a=b.getToolByName(c.replace("reToolAdapter_",""));
a.setFocus();
a.show();
a.selectNextItem();
return false;
},_onEditorModeChange:function(d,c){var e=Telerik.Web.UI.EditModes;
var a=d.get_mode();
this._setEnabled(a==e.Design);
if(!$telerik.isFirefox&&!$telerik.isOpera&&a==e.Html){var b=this.getToolByName("FindAndReplace");
if(b){this._setToolEnabled(b,true);
}}},_onEditorSelectionChange:function(a,b){this.setToolState();
},_setEnabled:function(a){var b=this._tools;
for(var c=0;
c<b.length;
c++){this._setToolEnabled(b[c],a);
}},_setToolEnabled:function(b,a){b.set_enabled(a);
},_registerEditorHandlers:function(){var a=this.get_editor();
a.add_selectionChange(this._onEditorSelectionChangeDelegate);
a.add_modeChange(this._onEditorModeChangeDelegate);
},_registerHolderHandlers:function(){var b=this.get_editor();
if(b.get_toolbarMode()==Telerik.Web.UI.EditorToolbarMode.Floating){var a=this.get_toolbarHolder();
if(typeof(a)!="undefined"){a.add_dragStart(this._onClientDragStartDelegate);
}}},_onBodyClick:function(c){var b=this.get_editor();
if(b&&b.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){if(!c){c=window.event;
}var a=(c.srcElement)?c.srcElement:c.originalTarget;
if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(a)||$telerik.isDescendant(this.get_editor().get_contentArea(),a)){this._preventToolbarFromHiding=true;
}}if(this._preventToolbarFromHiding){this._preventToolbarFromHiding=false;
return;
}this._showToolbarHolder(false);
},_onDropDownValueSelected:function(b,c){this._preventToolbarFromHiding=true;
var a=b.get_selectedItem();
if(Telerik.Web.UI.EditorButton.isInstanceOfType(a)){this._raiseEditorEvent(a,null);
}else{this._raiseEditorEvent(b,a);
}},_onKeyDownHandler:function(f){var d=f.keyCode;
if(9==d||37==d||39==d||121==d){if(Telerik.Web.UI.Editor.PopupController){Telerik.Web.UI.Editor.PopupController.hideActivePopup();
}}if(121==d){var a=this.get_editor();
window.setTimeout(function(){if(a){a.setFocus();
}},100);
if(f.rawEvent){$telerik.cancelRawEvent(f.rawEvent);
}return $telerik.cancelRawEvent(f);
}if(9==d){return;
}var b=this._getSelectedTool(f);
if(!Telerik.Web.UI.EditorButton.isInstanceOfType(b)){return;
}if(37==d||39==d){var g=b;
while(true){g=(37==d)?this._getPreviousTool(g):this._getNextTool(g);
if(null==g){break;
}if(g.get_enabled()){break;
}}if(g&&g.get_enabled()){g.setFocus();
}}if(13==d&&b&&!b.get_selectedItem){this._raiseEditorEvent(b,null);
return;
}if(!Telerik.Web.UI.EditorDropDown.isInstanceOfType(b)){return;
}if(38==d||40==d){var c=false;
if(!b.isExpanded()){b.show();
c=true;
}if(c||40==d){b.selectNextItem();
}else{b.selectPreviousItem();
}}else{if(13==d){b.hide();
if(b.get_activeIndex){b.set_selectedIndex(b.get_activeIndex());
}this._onDropDownValueSelected(b);
}else{if(27==d){b.hide();
}}}},_onToolBarClick:function(b){var a=this._getSelectedTool(b);
if(a){if(Telerik.Web.UI.EditorDropDown.isInstanceOfType(a)){a.click(b);
}else{if(false){}else{this._raiseEditorEvent(a);
}}}$telerik.cancelRawEvent(b);
},_raiseEditorEvent:function(b,a){var c=this.get_events().getHandler("ToolClick");
if(c){var e=b.get_name?b.get_name():"";
var d=new Telerik.Web.UI.EditorCommandEventArgs(e,b,a);
c(b,d);
}},_getPreviousTool:function(a){var b=Array.indexOf(this._tools,a);
return this._tools[b-1];
},_getNextTool:function(a){var b=Array.indexOf(this._tools,a);
return this._tools[b+1];
},_getSelectedTool:function(c){var a=Telerik.Web.UI.EditorButton.getToolRootNode(c.target);
if(null==a){return;
}var b=a.control;
if(null==b){return;
}if(b.get_enabled&&b.get_enabled()==false){return;
}if(c&&b){c.preventDefault();
c.stopPropagation();
}return b;
},_getToolBarElements:function(){var b=this.get_element();
if(!b){return null;
}var a=b.getElementsByTagName("ul");
return a;
},get_tools:function(){return this._tools;
},get_toolbarHolder:function(){return this.get_window();
},get_editor:function(){return this._editor;
},set_editor:function(a){if(this._editor!=a){this._editor=a;
}},get_contentAreaMode:function(){return(this._contentAreaMode!="")?this._contentAreaMode:Telerik.Web.UI.EditorContentAreaMode.Iframe;
},set_contentAreaMode:function(a){if(this._contentAreaMode!=a){this._contentAreaMode=a;
}},get_toolJSON:function(){return this._toolJSON;
},set_toolJSON:function(a){this._toolJSON=a;
},add_toolClick:function(a){this.get_events().addHandler("ToolClick",a);
},remove_toolClick:function(a){this.get_events().removeHandler("ToolClick",a);
}};
Telerik.Web.UI.Editor.DefaultToolAdapter.registerClass("Telerik.Web.UI.Editor.DefaultToolAdapter",Sys.UI.Control);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.RibbonBarToolAdapter=function(a){Telerik.Web.UI.Editor.RibbonBarToolAdapter.initializeBase(this,[a]);
this._ribbonBar=null;
this._toolsWrapper=null;
this._ribbonBarButtons=[];
this._ribbonBarSplitButtons=[];
this._ribbonBarItems=[];
this._toolbarEnum=Telerik.Web.UI.EditorToolbarMode;
this._toolBarMode=null;
};
Telerik.Web.UI.Editor.RibbonBarToolAdapter.prototype={initialize:function(){var b=this.get_toolbarMode(),a;
Telerik.Web.UI.Editor.RibbonBarToolAdapter.callBaseMethod(this,"initialize");
this._moveRibbonBarInToolsWrapper();
this._initializeRibbonBarButtons();
this._onRibbonBarButtonClickedDelegate=Function.createDelegate(this,this._onRibbonBarButtonClick);
this._registerribbonBarHandlers();
this._filterToolbarJson();
this._hookToolbarJson2Html();
if(b!=this._toolbarEnum.RibbonBar){a=this.get_window();
switch(b){case this._toolbarEnum.RibbonBarFloating:this._createFloatingButton();
break;
case this._toolbarEnum.RibbonBarPageTop:case this._toolbarEnum.RibbonBarShowOnFocus:this._hookToolbarModeEventHandlers();
break;
}}this._initializeToolsWrapper();
},_moveRibbonBarInToolsWrapper:function(){var a=this.get_ribbonBar();
this.get_toolsWrapper().appendChild(a.get_element());
a.repaint();
},_initializeToolsWrapper:function(){var c=this.get_toolsWrapper(),a=this.get_toolbarMode();
c.style.paddingTop="1px";
var b="128px";
if($telerik.isOpera){b="124px";
}c.style.height=b;
c.style.visibility="visible";
c.style.overflow="visible";
if(a!=this._toolbarEnum.RibbonBar){Sys.UI.DomElement.addCssClass(c,"RadEditor");
c.parentNode.style.overflow="hidden";
}},_positionWindow:function(){var a=this.get_toolbarMode();
switch(a){case this._toolbarEnum.RibbonBarShowOnFocus:this._positionToolbarAboveEditor();
break;
case this._toolbarEnum.RibbonBarPageTop:this._positionOnPageTop();
break;
case this._toolbarEnum.RibbonBarFloating:if(!this._wasShown){this._positionToolbarAboveEditor();
this._wasShown=true;
}break;
}},_positionOnPageTop:function(){var a=this._toolbarHolder;
var c=a._getViewportBounds();
var b=c.scrollLeft;
var d=c.scrollTop;
a.moveTo(b,d);
a.get_popupElement().style.width="100%";
if(!a.isPinned()){a.togglePin();
}},_initNonDefaultToolbarMode:function(){var a=this.get_toolbarMode();
var b=this._toolbarHolder;
var c=Telerik.Web.UI.WindowBehaviors;
switch(a){case this._toolbarEnum.RibbonBarShowOnFocus:b.set_behaviors(c.None);
b.set_visibleTitlebar(false);
break;
case this._toolbarEnum.RibbonBarPageTop:b.set_behaviors(c.None);
b.set_visibleTitlebar(false);
break;
default:b.set_behaviors(c.Move+c.Close+c.Pin);
break;
}this.get_element().style.visibility="visible";
},_showToolbarHolder:function(c){var d=this.get_editor(),a=this.get_toolbarMode();
if(!c){if(this._toolbarHolder){this._toolbarHolder.hide();
}return;
}else{if($telerik.isIE&&!this._editorIEFirstShow){if(a!=this._toolbarEnum.RibbonBarFloating){this._editorIEFirstShow=true;
return;
}}}if(d.isFullScreen()){return;
}var b=Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper;
if(b==this&&b._toolbarHolder&&b._toolbarHolder.isVisible()){b.get_toolbarHolder().setActive(true);
return;
}if(b&&b._showToolbarHolder){b._showToolbarHolder(false);
}Telerik.Web.UI.Editor.DefaultToolAdapter._visibleWrapper=this;
this.get_window();
this._initNonDefaultToolbarMode();
this._toolbarHolder.show();
if($telerik.isIE){switch(a){case this._toolbarEnum.RibbonBarShowOnFocus:case this._toolbarEnum.RibbonBarPageTop:d.get_TopZone().firstChild.style.display="none";
break;
}}},_filterToolbarJson:function(){var g=this.get_toolJSON(),b,e,c,f,a,d,h;
for(b=0,e=g.length;
b<e;
b++){f=g[b];
a=f.tools;
for(c=a.length-1;
c>-1;
c--){d=false;
h=a[c];
if(typeof(h.name)=="undefined"||!h.type||(h.type==Telerik.Web.UI.EditorToolType.ToolStrip&&h.name!="InsertTable")){a.splice(c,1);
}}}},_initializeRibbonBarButtons:function(){var a=this.get_ribbonBar();
var d=a.get_tabs();
for(var e=0,h=d.get_count();
e<h;
e++){var c=d.getTab(e);
var q=c.get_groups(e);
for(var f=0,o=q.get_count();
f<o;
f++){var n=q.getGroup(f);
var b=n.get_items();
for(var g=0,m=b.get_count();
g<m;
g++){var p=b.getItem(g);
if(p.get_value){this._ribbonBarButtons.push(p);
this._ribbonBarItems.push(p);
this._addSetOnMethodToButton(p);
}else{if(p instanceof Telerik.Web.UI.RibbonBarSplitButton){this._ribbonBarSplitButtons.push(p);
this._ribbonBarItems.push(p);
}}}}}},_addSetOnMethodToButton:function(a){a.setOn=function(b){if(this.set_toggled){this.set_toggled(b);
}};
},_registerribbonBarHandlers:function(){var a=this.get_ribbonBar();
a.add_buttonToggled(this._onRibbonBarButtonClickedDelegate);
a.add_splitButtonClicked(this._onRibbonBarButtonClickedDelegate);
},_onRibbonBarButtonClick:function(d,c){var a=c.get_button();
if(a.set_toggled){a.set_toggled(false);
}var e=a.get_value();
var b=new Telerik.Web.UI.EditorCommandEventArgs(e,null,null);
this.get_editor().fire(e,b);
},get_toolsWrapper:function(){if(this._toolsWrapper==null){this._toolsWrapper=this.get_editor().get_TopZone().firstChild;
}return this._toolsWrapper;
},get_ribbonBar:function(){if(!this._ribbonBar){this._ribbonBar=this.get_editor().get_ribbonBar();
}return this._ribbonBar;
},get_toolsWrapper:function(){if(!this._toolsWrapper){this._toolsWrapper=this.get_editor().get_TopZone().firstChild;
}return this._toolsWrapper;
},getToolByName:function(e){var a=this.get_ribbonBar();
var d=a.findButtonByValue(e);
if(null==d){d=a.findToggleButtonByValue(e);
}if(null!=d){return d;
}for(var b=0;
b<this._tools.length;
b++){var c=this._tools[b];
if(c&&c.get_name()==e){return c;
}}return null;
},_setEnabled:function(a){this._setRibbonBarItemsEnabled(a);
this._setEditorToolsEnabled(a);
},_setRibbonBarItemsEnabled:function(b){var d=this._ribbonBarItems;
for(var e=0,c=d.length;
e<c;
e++){var a=d[e];
this._setToolEnabled(a,b);
}},_setEditorToolsEnabled:function(a){var b=this._tools;
for(var c=0;
c<b.length;
c++){this._setToolEnabled(b[c],a);
}},_setToolEnabled:function(b,a){b.set_enabled(a);
var c=b.get_element();
if(!a){Sys.UI.DomElement.addCssClass(c,"rrbImagePlaceholderDisabled");
}else{Sys.UI.DomElement.removeCssClass(c,"rrbImagePlaceholderDisabled");
}},_getToolBarElements:function(){var b=this.get_ribbonBar().get_element();
if(!b){return null;
}var a=$telerik.$(b).find("div.rrbButtonGroup").get();
return a;
},_getToolBarItemElements:function(a){return $telerik.$(a).find("div.rrbTemplateItem").get();
},_getItemElementByIndex:function(a,b){return a[b];
},_getToolElement:function(a){return a.getElementsByTagName("A")[0];
},_attachHandlerToToolElementParent:function(b){var a=b.parentNode;
if($telerik.isSafari){a.setAttribute("onmousedown","return false;");
}$addHandlers(a,{click:this._onToolAdapterClickDelegate,keydown:this._onToolAdapterKeyDownDelegate},this);
},_attachHandlerToToolbarElement:function(a){},_toolbarSizeFixIE:function(c,b,a){},_onEditorSelectionChange:function(a,b){this.get_ribbonBar()._hideMenus();
this.setRibbonBarToolState();
this.setToolState();
},setRibbonBarToolState:function(f,g){if(!f){f=this._ribbonBarButtons;
}var b=this.get_editor();
for(var a=0;
a<f.length;
a++){var e=f[a];
var d=e.get_value();
var c=g;
if(null==c){c=b.getToolState(d);
}if(null!=c){this._setRibbonBarButtonState(e,c);
}}},_setRibbonBarButtonState:function(a,b){if(b==Telerik.Web.UI.Editor.CommandStates.Disabled){this._setToolEnabled(a,false);
}else{this._setToolEnabled(a,true);
if(b==Telerik.Web.UI.Editor.CommandStates.Off){a.set_toggled(false);
}else{a.set_toggled(true);
}}},get_toolbarMode:function(){if(!this._toolbarMode){this._toolbarMode=this.get_editor().get_toolbarMode();
}return this._toolbarMode;
},set_toolbarMode:function(a){this._toolbarMode=a;
}};
Telerik.Web.UI.Editor.RibbonBarToolAdapter.registerClass("Telerik.Web.UI.Editor.RibbonBarToolAdapter",Telerik.Web.UI.Editor.DefaultToolAdapter);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
with(Telerik.Web.UI.Editor){Telerik.Web.UI.Editor.UpdateCommandsArray={InsertOrderedList:new BrowserCommand(null,null,"InsertOrderedList",null),InsertUnorderedList:new BrowserCommand(null,null,"InsertUnorderedList",null),Unlink:new BrowserCommand(null,null,"Unlink",null),Bold:new BrowserCommand(null,null,"Bold",null),Italic:new BrowserCommand(null,null,"Italic",null),Underline:new BrowserCommand(null,null,"Underline",null),FontName:new BrowserCommand(null,null,"FontName",null),FontSize:new BrowserCommand(null,null,"FontSize",null),Paste:new BrowserCommand(null,null,"Paste",null),Cut:new BrowserCommand(null,null,"Cut",null),Copy:new BrowserCommand(null,null,"Copy",null),JustifyLeft:new BrowserCommand(null,null,"JustifyLeft",null),JustifyRight:new BrowserCommand(null,null,"JustifyRight",null),JustifyCenter:new BrowserCommand(null,null,"JustifyCenter",null),JustifyNone:new BrowserCommand(null,null,"JustifyNone",null),JustifyFull:new BrowserCommand(null,null,"JustifyFull",null),Indent:new BrowserCommand(null,null,"Indent",null),Outdent:new BrowserCommand(null,null,"Outdent",null),Subscript:new BrowserCommand(null,null,"Subscript",null),Superscript:new BrowserCommand(null,null,"Superscript",null),StrikeThrough:new BrowserCommand(null,null,"StrikeThrough",null),AbsolutePosition:new BrowserCommand(null,null,"AbsolutePosition",null),FormatBlock:new FormatBlockCommand(null,null,null,null),InsertRowAbove:new TableInsertRow(null,null,"above",null),InsertRowBelow:new TableInsertRow(null,null,"below",null),InsertColumnLeft:new TableInsertColumn(null,null,"left",null),InsertColumnRight:new TableInsertColumn(null,null,"right",null),DeleteRow:new TableDeleteRow(null,null,null),DeleteColumn:new TableDeleteColumn(null,null,null),DeleteCell:new TableDeleteCell(null,null,null),MergeColumns:new TableMergeColumns(null,null,null),MergeRows:new TableMergeRows(null,null,null),SplitCell:new TableSplitCell(null,null,"vertical",null),SplitCellHorizontal:new TableSplitCell(null,null,"horizontal",null),ApplyClass:new ClassNameCommand(null,null,null)};
}Telerik.Web.UI.Editor.CommandList=new (function(){this.getCallbackFunction=function(b,a){return(b&&b._callbackFunction&&typeof(b._callbackFunction)=="function")?b._callbackFunction:a;
};
this.AjaxSpellCheck=function(g,a,c){function e(){if(!a.get_ajaxSpellCheck()){var i={editor:a};
var h=document.createElement("div");
var l=$create(Telerik.Web.UI.Editor.AjaxSpellCheck,i,null,null,h);
var k=l.get_element();
var j=$get(a.get_id()+"Top");
if(j){j.appendChild(k);
}a.set_ajaxSpellCheck(l);
}var m=a.get_ajaxSpellCheck();
if(c&&c.value){m.set_language(c.value);
}m.spellCheck();
}if(typeof(Telerik.Web.UI.Editor.AjaxSpellCheck)=="undefined"){function b(h,j){var i=h.get_responseData();
$telerik.evalScriptCode(i);
e();
}var f=a.get_ajaxSpellCheckScriptReference();
var d=new Sys.Net.WebRequest();
d.set_url(f);
d.set_httpVerb("GET");
d.add_completed(b);
d.invoke();
}else{e();
}return false;
};
this.ModuleManager=function(f,a,d){var c=d.value;
var e=a.get_modulesManager();
if(!e){return false;
}var b=e.getModuleByName(c);
if(b){b.toggleVisibility();
a._updateEditorSize(null,true);
}return false;
};
this.ToggleScreenMode=function(c,b,a){b.toggleScreenMode();
return false;
};
this.InsertRowAbove=this.InsertRowBelow=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableInsertRow(b.getLocalizedString(c),null,c=="InsertRowAbove"?"above":"below",b));
};
this.InsertColumnLeft=this.InsertColumnRight=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableInsertColumn(b.getLocalizedString(c),null,c=="InsertColumnLeft"?"left":"right",b));
};
this.DeleteRow=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableDeleteRow(b.getLocalizedString(c),null,b));
};
this.DeleteColumn=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableDeleteColumn(b.getLocalizedString(c),null,b));
};
this.DeleteCell=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableDeleteCell(b.getLocalizedString(c),null,b));
};
this.MergeColumns=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableMergeColumns(b.getLocalizedString(c),null,b));
};
this.MergeRows=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableMergeRows(b.getLocalizedString(c),null,b));
};
this.SplitCell=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableSplitCell(b.getLocalizedString(c),null,"vertical",b));
};
this.SplitCellHorizontal=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.TableSplitCell(b.getLocalizedString(c),null,"horizontal",b));
};
this.DeleteTable=function(d,c,a){var b=a.value;
if(!b){b=c.getSelectedElement();
}if(b&&"TABLE"!=b.tagName){b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"TABLE");
}if(b){c.selectElement(b);
c.executeBrowserCommand("Delete");
}};
this.InsertFormForm=this.InsertFormButton=this.InsertFormCheckbox=this.InsertFormHidden=this.InsertFormImageButton=this.InsertFormPassword=this.InsertFormRadio=this.InsertFormReset=this.InsertFormSelect=this.InsertFormSubmit=this.InsertFormTextarea=this.InsertFormText=function(e,d,c){var a=e.substring(10);
var b=new Telerik.Web.UI.EditorCommandEventArgs(e,c.get_tool(),a);
d.fire("InsertFormElement",b);
};
this.StripAll=this.StripCss=this.StripFont=this.StripSpan=this.StripWord=function(e,d,c){var a=e.substring(5);
var b=new Telerik.Web.UI.EditorCommandEventArgs(e,c.get_tool(),a.toUpperCase());
d.fire("FormatStripper",b);
};
this.FormatStripper=function(t,c,h){var l=h.value;
var n=c._filtersManager.getFilterByName("ConvertFontToSpanFilter");
if(c.get_mode()==Telerik.Web.UI.EditModes.Design&&l=="SPAN"&&n&&n.get_enabled()){l="FONT";
}var j="";
try{j=c.getSelectionHtml();
}catch(r){}var m=c.getSelection().getBrowserSelection();
var s=m.type?m.type.toLowerCase()=="none":m.isCollapsed;
var o=c.get_contentArea().innerHTML;
if(s||j==""||o==j){var b=Telerik.Web.UI.Editor.Utils.stripFormatting(o,l);
var i=new Telerik.Web.UI.Editor.GenericCommand(c.getLocalizedString(t)+" "+l,c.get_contentWindow(),c);
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(c.get_contentArea(),b);
c.executeCommand(i);
}else{if(j!=null){var b=Telerik.Web.UI.Editor.Utils.stripFormatting(j,l);
var f=true;
if($telerik.isSafari&&l=="ALL"){var g=c.getSelection().getParentElement();
var d=function(e){var p=false;
switch(e){case"I":case"B":case"U":case"SPAN":case"FONT":case"EM":case"STRONG":p=true;
break;
}return p;
};
if(g.innerHTML.trim()==j.trim()&&d(g.tagName)){var q=true;
while(q){var k=g.parentNode;
if(k.childNodes.length==1&&d(k.tagName)){g=k;
}else{q=false;
}}var k=g.parentNode;
var a=c.get_document().createTextNode(b);
k.insertBefore(a,g);
k.removeChild(g);
c.selectElement(a);
f=false;
}}if(f){c.pasteHtml(b,t);
}}}};
this.InsertTable=function(f,a,c){var d=c.value;
if(d){var b=Telerik.Web.UI.Editor.Utils.createTable(d.rows,d.cols);
var e=Telerik.Web.UI.Editor.Utils.getOuterHtml(b);
a.pasteHtml(e,f);
Telerik.Web.UI.Editor.Utils.removeFormattingNodes(a);
}};
this.InsertShiftTab=function(e,d,a){var c=d.getSelectedElement();
if(typeof(c.tagName)=="undefined"){c=c.parentNode;
}var b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TD");
if(b){Telerik.Web.UI.Editor.Utils.MoveToPreviousCell(b,d);
}else{d.bubbleKeyEventToBrowser();
}return false;
};
this.InsertTabMozilla=function(e,d,a){var c=d.getSelectedElement();
if(typeof(c.tagName)=="undefined"){c=c.parentNode;
}var b=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"TD");
if(b){Telerik.Web.UI.Editor.Utils.MoveToNextCell(b,d);
}else{d.bubbleKeyEventToBrowser();
}return false;
};
this.InsertTab=function(f,a,c){var e=a.getSelectedElement();
var b=e.tagName;
if(b=="UL"||b=="OL"||b=="LI"||(e.parentNode&&e.parentNode.tagName=="LI")){a.fire("Indent");
}else{var d=Telerik.Web.UI.Editor.Utils.getElementParentByTag(e,"TD");
if(d){Telerik.Web.UI.Editor.Utils.MoveToNextCell(d,a);
}else{a.pasteHtml(" &nbsp;&nbsp;&nbsp;&nbsp;",f);
}}return false;
};
this.SetToolFocus=function(d,c,a){var b=c.get_toolAdapter();
if(b){b.setFocus();
}return false;
};
this.Undo=this.Redo=function(d,c,b){var a=b?b.value:1;
if(!a){a=1;
}if(d=="Redo"){c.redo(a);
}else{c.undo(a);
}};
this.PastePlainText=function(e,d,c){var b=function(f){if(f){var g=f.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
g=Telerik.Web.UI.Editor.Utils.replaceNewLineWithBr(g);
if(g){d.pasteHtml(g,e);
}}};
if(d.isIE){b(window.clipboardData.getData("Text"));
}else{var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(f,g){b(g.get_content());
});
d.showDialog("CleanPasteTextContent",{},a);
return false;
}};
this.PasteFromWord=this.PasteFromWordNoFontsNoSizes=this.PasteAsHtml=function(h,a,g){var f=function(i,k){var j="";
var l=a.get_stripFormattingOptions();
if(h=="PasteFromWord"){if(l==Telerik.Web.UI.StripFormattingOptions.None||(l&Telerik.Web.UI.StripFormattingOptions.ConvertWordLists)){i=Telerik.Web.UI.Editor.Utils.convertWordLists(i);
}j=Telerik.Web.UI.Editor.Utils.stripFormatting(i,"WORD");
}else{if(h=="PasteFromWordNoFontsNoSizes"){if(l==Telerik.Web.UI.StripFormattingOptions.None||(l&Telerik.Web.UI.StripFormattingOptions.ConvertWordLists)){i=Telerik.Web.UI.Editor.Utils.convertWordLists(i);
}j=Telerik.Web.UI.Editor.Utils.stripFormatting(i,"WORD_ALL");
}else{j=Telerik.Web.UI.Editor.Utils.convertText2Html(i);
}}if(k){k.select();
}if(j){a.pasteHtml(j,h);
}};
if(a.isIE){var e=a.createRestorePoint();
e.useOldRange=true;
var b="";
if(a.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){var d=a.get_document().selection.createRange();
b=Telerik.Web.UI.Editor.Utils.getClipboardAsHtml();
d.select();
}else{b=Telerik.Web.UI.Editor.Utils.getClipboardAsHtml();
}f(b,e);
}else{var c=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(g,function(i,j){f(j.get_content());
});
a.showDialog("CleanPasteHtmlContent",{dialogTitle:a.getLocalizedString(h)},c);
}};
this.PasteHtml=function(d,c,b){var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(f,e){var g=e.get_content();
g=c.applyFiltersForEmbedContent(g);
c.pasteHtml(g);
});
c.showDialog("PasteHtml",{dialogTitle:c.getLocalizedString(d),commandName:"PasteHtml"},a);
};
this.Copy=function(f,d,b){if(null!=b){var a=false;
try{a=d.get_document().queryCommandEnabled(f);
}catch(c){a=false;
}if(a){try{a=d.get_document().execCommand(f,false,null);
}catch(c){a=false;
}}if(!a){alert(d.getLocalizedString("UseCtrlC"));
}}};
this.Cut=this.Paste=function(j,a,f){if(null!=f){var g=$telerik.isIE7;
var b=g?true:false;
try{if(!g){b=a.get_document().queryCommandEnabled(j);
}}catch(h){b=false;
}if(j=="Paste"&&b&&g){a.get_contentArea().fireEvent("onbeforepaste");
}if(b){var d=new Telerik.Web.UI.Editor.GenericCommand(a.getLocalizedString(j),a.get_contentWindow(),a);
var i=false;
try{i=a.get_document().execCommand(j,false,null);
}catch(h){i=false;
}if(i!=false){a.executeCommand(d);
}else{b=false;
}}if(!b){var c=(j=="Cut"?"UseCtrlX":"UseCtrlV");
alert(a.getLocalizedString(c));
}}else{a._pendingCutPasteCommand=new Telerik.Web.UI.Editor.GenericCommand(a.getLocalizedString(j),a.get_contentWindow(),a);
}};
this.InsertParagraph=function(c,b,a){if($telerik.isFirefox||$telerik.isSafari||$telerik.isOpera11){b.executeCommand(new Telerik.Web.UI.Editor.EnterNewLineCommand(c,b.get_contentWindow(),false,b,Telerik.Web.UI.EditorNewLineModes.P));
}else{b.executeBrowserCommand(c,true,"");
}return true;
};
this.InsertParagraphSafari=function(j,a,f){a.executeBrowserCommand("InsertParagraph",true,"");
if($telerik.isSafari){var b=a.getSelectedElement();
var e=b;
while(e){if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(e)){e=null;
}else{if(e.tagName=="DIV"){break;
}else{e=e.parentNode;
}}}if(e){var g=e.previousSibling;
if(g){var c=g.tagName;
if(g.nodeType=3||c=="P"||c=="UL"||c=="OL"||(c.charAt(0)=="H"&&!isNaN(parseInt(c.charAt(1))))){var h=a.get_document();
var i=h.createElement("P");
i.innerHTML="<br>";
e.parentNode.insertBefore(i,e);
if(g.nodeType=3){e.innerHTML=e.innerHTML.replace(/^<br>(&nbsp;)*/,"");
Telerik.Web.UI.Editor.Utils.removeNode(e);
}else{e.parentNode.removeChild(e);
}var d=h.createRange();
d.selectNodeContents(i);
a.getSelection().selectRange(d);
}}}}return true;
};
this.FormatBlock=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.FormatBlockCommand(b.getLocalizedString(c),b.get_contentWindow(),a.value,b));
};
this.InsertOrderedList=this.InsertUnorderedList=function(c,b,a){b.setFocus();
b.executeCommand(new Telerik.Web.UI.Editor.InsertListCommand(b.getLocalizedString(c),b.get_contentWindow(),b.get_newLineMode()==Telerik.Web.UI.EditorNewLineModes.Br,c,null,b));
};
this.Bold=this.Italic=this.Underline=this.JustifyLeft=this.JustifyRight=this.JustifyCenter=this.JustifyNone=this.Indent=this.Outdent=this.SelectAll=this.Unlink=this.JustifyFull=this.StrikeThrough=this.Subscript=this.Superscript=this.AbsolutePosition=function(e,d,a){d.setActive();
var b="SelectAll"!=e;
if(e=="Unlink"&&!d.isIE){var c=d.getSelectedElement();
if(c&&c.tagName=="A"){d.selectElement(c,false);
}}d.executeBrowserCommand(e,b,null,null);
return true;
};
this.ForeColor=this.BackColor=this.FontName=this.FontSize=function(d,c,b){var a=b.value;
c.executeBrowserCommand(d,true,a);
};
this.Zoom=function(f,b,d){var a=d.value;
var e=d.get_tool?d.get_tool():null;
if(a&&e&&e.updateValue){e.updateValue(a);
}b.get_contentArea().style.zoom=a;
if(($telerik.isFirefox||$telerik.isOpera)&&a.indexOf("%")!=-1){a=parseInt(a,10)/100;
}if($telerik.isFirefox){b.get_contentArea().style.MozTransform=a==1?"":"translate("+(b.get_contentArea().offsetWidth*((a-1)/2))+"px, "+(b.get_contentArea().offsetHeight*((a-1)/2))+"px) scale("+a+")";
}if($telerik.isOpera){var c=a==1?"":"translate("+(b.get_contentArea().offsetWidth*((a-1)/2.04))+"px, "+(b.get_contentArea().offsetHeight*((a-1)))+"px) scale("+a+")";
b.get_contentArea().style.OTransform=c;
}return false;
};
this.Print=function(c,b,a){if(b.isIE){b.get_document().execCommand(c,false,null);
}else{if(b.get_contentWindow().print){b.get_contentWindow().print();
}}return false;
};
this.InsertSnippet=function(c,b,a){b.pasteHtml(a.value,c);
};
this.InsertFormElement=function(h,b,g){var a=g.value;
a=a.toLowerCase();
var c=null;
switch(a){case"form":if(b.get_contentAreaMode()==Telerik.Web.UI.EditorContentAreaMode.Div){alert("Error! Form elements are only supported when the content area is set to Iframe!");
g.set_cancel(true);
return false;
}else{c=b.createElement("form","150px","150px");
c.innerHTML="&nbsp;";
}break;
case"textarea":c=b.createElement("textarea");
break;
case"select":c=b.createElement("select","100px","22px");
break;
case"checkbox":case"radio":c=b.createElement("input");
c.setAttribute("type",a);
break;
case"button":case"reset":case"submit":c=b.createElement("input","50px","22px");
c.setAttribute("type",a);
break;
case"hidden":case"password":case"text":c=b.createElement("input","100px","22px");
c.setAttribute("type",a);
break;
}if(c){var f=Telerik.Web.UI.Editor.Utils.getUniqueID();
c.setAttribute("id",f);
var e=Telerik.Web.UI.Editor.Utils.getOuterHtml(c);
b.pasteHtml(e,h);
var d=b.get_document().getElementById(f);
if(d){d.removeAttribute("id");
if(d.setActive){d.setActive();
}return false;
}}};
this.InsertGroupbox=this.InsertDate=this.InsertTime=this.InsertSymbol=this.InsertHorizontalRule=function(f,b,d){var a="";
switch(f){case"InsertSymbol":a=d.value;
break;
case"InsertHorizontalRule":a="<hr>";
break;
case"InsertDate":var e=new Date();
a="&nbsp;"+e.toLocaleDateString();
break;
case"InsertTime":var c=new Date();
a="&nbsp;"+c.toLocaleTimeString();
break;
default:a="<fieldset style='WIDTH: 200px; HEIGHT: 76px'> <legend>Title</legend>Content... </fieldset> ";
}b.pasteHtml(a,f);
};
this.ImageManager=function(h,a,f){var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(f,function(k,j){var i=j.get_value();
a.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(i),h);
});
var c=a.get_dialogOpener().get_additionalQueryString();
var d=a.getSelectedElement();
if(d&&d.tagName=="IMG"){var g=d.getAttribute("src",2);
a.get_dialogOpener().set_additionalQueryString(c+"&rndnum="+(new Date()-100)+"&PreselectedItemUrl="+encodeURIComponent(g));
}else{d=null;
}var e=new Telerik.Web.UI.EditorCommandEventArgs(h,null,d);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(e,"IMG",a,h);
a.showDialog("ImageManager",e,b);
a.get_dialogOpener().set_additionalQueryString(c);
return false;
};
this.SilverlightManager=this.FlashManager=this.MediaManager=function(h,a,f){var c=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(f,function(j,i){var k=i.get_value();
if(!k){k=i.Result;
}k=a.applyFiltersForEmbedContent(k);
a.pasteHtml(k,h);
});
var e={};
var d=a.get_dialogOpener().get_additionalQueryString();
var b=a.getSelectedElement();
if(b){if($telerik.isIE&&b.object){var g="MediaManager"==h?b.object.FileName:b.object.Movie;
if(g){a.get_dialogOpener().set_additionalQueryString(d+"&rndnum="+(new Date()-100)+"&PreselectedItemUrl="+encodeURIComponent(g));
e.selectedItemUrl=g;
e.selectedObject=b;
}}}a.showDialog(h,e,c);
a.get_dialogOpener().set_additionalQueryString(d);
return false;
};
this.TemplateManager=function(d,c,b){var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(f,e){var g=e.get_value();
if(!g){g=e.Result;
}c.pasteHtml(g,d);
});
c.showDialog("TemplateManager",{},a);
return false;
};
this.AboutDialog=function(c,b,a){b.showDialog("AboutDialog");
return false;
};
this.Help=function(c,b,a){b.showDialog("Help");
return false;
};
this.PageProperties=function(e,d,c){var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(f,g){});
var a={};
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"BODY",d,e);
d.showDialog("PageProperties",a,b);
return false;
};
this.ImageMapDialog=function(e,d,c){var a=Telerik.Web.UI.Editor.CommandList._getImageMapDialogArgument(d);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(f,g){Telerik.Web.UI.Editor.CommandList._setImageMapProperties(d,g,e);
return false;
});
d.showDialog("ImageMapDialog",a,b);
return false;
};
this._setImageMapProperties=function(a,d,o){if(!d){return;
}var i=a.getSelectedElement();
var h;
if(i&&i.tagName=="IMG"){h=i;
if(d.ImageSrc!=h.src){h.src=d.ImageSrc;
}}else{if(!d.ImageSrc){return;
}a.pasteHtml('<img src="'+d.ImageSrc+'" id = "__tmp__">',o);
h=a.get_document().getElementById("__tmp__");
h.removeAttribute("id");
if(document.all){var c=a.get_document().body.createTextRange();
c.collapse();
c.moveToElementText(h);
c.select();
}}var j=document.createElement("span");
j.innerHTML=d.MapHtml;
var n=j.getElementsByTagName("map");
if(n.length==0){return;
}var k=n[0].innerHTML;
j=null;
if(!k){var f=h.getAttribute("useMap",2);
if(f){var e=Telerik.Web.UI.Editor.CommandList._getImageMapByName(a,f);
if(e){e.parentNode.removeChild(e);
}}h.removeAttribute("useMap");
return;
}var m=null;
var g=h.getAttribute("useMap",2);
if(g){m=Telerik.Web.UI.Editor.CommandList._getImageMapByName(a,g);
}if(m==null){var b=new Date()-100;
var l="rade_img_map_"+b;
m=a.get_document().createElement("map");
m.id=l;
this._setNameAttribute(m,l);
m=a.get_contentArea().appendChild(m);
h.setAttribute("useMap","#"+l);
h.setAttribute("border","0");
}m.innerHTML=k;
};
this._setNameAttribute=function(a,b){a.removeAttribute("name");
a.removeAttribute("NAME");
a.name=null;
a.name=b;
a.NAME=b;
};
this._getImageMapDialogArgument=function(b){var f={};
f.editor=b;
var d=b.getSelectedElement();
if(d&&d.tagName=="IMG"){f.ImageSrc=d.getAttribute("src",2);
f.ImageWidth=(d.style.width)?d.style.width:d.width;
f.ImageHeight=(d.style.height)?d.style.height:d.height;
if($telerik.isIE){var e=b.get_document().body.createTextRange();
e.collapse();
e.moveToElementText(d);
e.select();
}if(d.useMap){var a=d.getAttribute("useMap",2);
var c=Telerik.Web.UI.Editor.CommandList._getImageMapByName(b,a);
if(c!=null){f.ImageMapHTML='<map name = "'+a.substr(1)+'">'+c.innerHTML+"</map>";
}else{f.ImageMapHTML="";
}d.style.width=f.ImageWidth;
d.style.height=f.ImageHeight;
}}return f;
};
this._getImageMapByName=function(b,a){a=a.substr(1);
var e=b.get_document();
var d=e.getElementById(a);
if(d!=null){return d;
}var f=e.getElementsByTagName("map");
for(var c=0;
c<f.length;
c++){if(f[c].getAttribute("name")==a){return f[c];
}}return null;
};
this.get_ImportStyleSheetHTML=function(e,d,b){var a="";
if(b){var c=d.get_document().getElementById(b.id);
if(!c){a=Telerik.Web.UI.Editor.Utils.getOuterHtml(b);
}}return a;
};
this._removeStyleSheet=function(a,k){if(k){var g=a.get_document();
var c=true;
var f=g.getElementsByTagName("Table");
var d=f.length;
var j=k.id;
if(j){for(var b=0;
b<d;
b++){var h=f[b];
if(h.className==j){c=false;
break;
}}if(c){var e=g.getElementById(j);
if(e){e.parentNode.removeChild(e);
}}}}};
this.TableWizard=function(e,d,c){var a=Telerik.Web.UI.Editor.CommandList._getTableArgument(d,null,true,false);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(a,"TABLE",d,e);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(h,g){var f="";
if(g.styleSheetToImport){f=Telerik.Web.UI.Editor.CommandList.get_ImportStyleSheetHTML(e,d,g.styleSheetToImport);
}d.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(g.tableToModify)+f,e);
Telerik.Web.UI.Editor.Utils.removeFormattingNodes(d);
if(g.styleSheetToRemove){Telerik.Web.UI.Editor.CommandList._removeStyleSheet(d,g.styleSheetToRemove);
}});
d.showDialog("TableWizard",a,b);
return false;
};
this.InsertTableLight=this.SetTableProperties=function(f,a,e){var c=Telerik.Web.UI.Editor.CommandList._getTableArgument(a,1,false,true);
if(f=="SetTableProperties"&&!c){alert(a.getLocalizedString("tablewarning"));
return false;
}var d=Telerik.Web.UI.Editor.CommandList._getParentTable(a);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(e,function(i,h){a.selectElement(d);
var g="";
if(h.styleSheetToImport){g=Telerik.Web.UI.Editor.CommandList.get_ImportStyleSheetHTML(f,a,h.styleSheetToImport);
}a.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(h.tableToModify)+g,f);
if(h.styleSheetToRemove){Telerik.Web.UI.Editor.CommandList._removeStyleSheet(a,h.styleSheetToRemove);
}});
if(a.get_document().selection&&a.get_document().selection.empty&&f!="InsertTableLight"){a.get_document().selection.empty();
}if(f=="SetTableProperties"){Telerik.Web.UI.Editor.CommandList._getDialogArguments(c,"TABLE",a,f);
a.showDialog("TableWizard",c,b);
}else{if(!c){c=new Telerik.Web.UI.EditorCommandEventArgs("InsertTableLight",null,null);
}c._name=c._commandName="InsertTableLight";
c.editor=a;
a.showDialog("InsertTableLight",c,b);
}return false;
};
this.SetCellProperties=function(g,a,e){var c=Telerik.Web.UI.Editor.CommandList._getTableArgument(a,2,false,true);
var f=$telerik.isFirefox&&a.get_contentWindow().getSelection().rangeCount>1;
if(!c||f){alert(a.getLocalizedString("cellwarning"));
return false;
}Telerik.Web.UI.Editor.CommandList._getDialogArguments(c,"TABLE",a,g);
var d=Telerik.Web.UI.Editor.CommandList._getParentTable(a);
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(e,function(j,i){a.selectElement(d);
var h="";
if(i.styleSheetToImport){h=Telerik.Web.UI.Editor.CommandList.get_ImportStyleSheetHTML(g,a,i.styleSheetToImport);
}a.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(i.tableToModify)+h,g);
if(i.styleSheetToRemove){Telerik.Web.UI.Editor.CommandList._removeStyleSheet(a,i.styleSheetToRemove);
}});
a.showDialog("TableWizard",c,b);
return false;
};
this.FindAndReplace=function(e,d,c){var a={};
a.editor=d;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(f,g){});
d.showDialog("FindAndReplace",a,b);
return false;
};
this.StyleBuilder=function(j,a,i){var b=null;
var c=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(i,function(m,p){var l=Telerik.Web.UI.Editor.Utils.getOuterHtml(p.get_value());
l=l.replace(/(url\s*\(\s*)&quot;(.*)&quot;\s*\)/ig,"$1$2)");
if(b){var n="";
var k=new RegExp("style=(\"|')(.+?)\\1","gi");
l.replace(k,function(s,r,q){n=q;
});
if(n){var o=new Telerik.Web.UI.Editor.AttributeCommand(j+"set Style Attribute",a.get_contentWindow(),b,"style",n,a);
a.executeCommand(o);
}}else{a.pasteHtml(l,j);
}});
var h=a.getSelection();
var e=h.getParentElement();
if(!$telerik.isIE||!h.isControl()){var g=h.getText();
if(g||(e&&e.tagName=="BODY")){var f=a.createElement("span");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(f,g);
e=f;
}else{b=e;
a.selectElement(e,false);
}}var d=new Telerik.Web.UI.EditorCommandEventArgs("StyleBuilder",null,e.cloneNode(true));
Telerik.Web.UI.Editor.CommandList._getDialogArguments(d,"*",a,j);
d.fontNames=a.get_fontNames();
a.showDialog("StyleBuilder",d,c);
return false;
};
this.XhtmlValidator=function(e,d,c){var a=d;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(f,g){});
d.showDialog("XhtmlValidator",a,b);
return false;
};
this.TrackChangesDialog=function(e,d,c){var a=d;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(c,function(f,g){});
d.showDialog("TrackChangesDialog",a,b);
};
this.InsertCustomLink=function(g,a,d){var c=d.value;
var e=String.format("<a href='{1}' title='{3}' target='{2}'>{0}</a>",c.innerHTML,c.href,c.target,c.title);
if($telerik.isIE&&a.get_html()=="<P>&nbsp;</P>"){a.set_html("");
}var f=Telerik.Web.UI.Editor.CommandList._getParentLink(a);
if(f){var b=f.cloneNode(true);
if(c.href){b.setAttribute("href",c.href);
}if(c.target){b.setAttribute("target",c.target);
}if(c.title){b.setAttribute("title",c.title);
}if(!b.innerHTML){b.innerHTML=c.innerHTML;
}e=Telerik.Web.UI.Editor.Utils.getOuterHtml(b);
}a.pasteHtml(e,g);
};
this._getDialogArguments=function(c,b,a,d){if(!a){c.Colors=[];
c.CssClasses=[];
c.CellCssClasses=[];
c.tableLayoutCssFile="";
c.editor=null;
return;
}c.Colors=a.get_colors();
if("TD"==b||"TH"==b||"TABLE"==b){c.CssClasses=a.getCssArray("TABLE");
c.CellCssClasses=a.getCssArray("TD");
c.tableLayoutCssFile=a.get_tableLayoutCssFile();
}else{if("A"==b||"BODY"==b||"IMG"==b){c.CssClasses=a.getCssArray(b);
}}c.editor=a;
};
this.DocumentManager=this.SetLinkProperties=this.LinkManager=function(f,b,e){var a=f=="DocumentManager"?"DocumentManager":"LinkManager";
var d=Telerik.Web.UI.Editor.CommandList._getLinkArgument(b);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(d,"A",b,f);
var c=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(e,function(i,h){var g=h.get_value();
if(!g){g=h.Result;
}if(!g){g=h.realLink;
}b.pasteHyperLink(g,f);
});
b.showDialog(a,d,c);
return false;
};
this.InsertLink=function(f,b,e){var a="InsertLink";
var d=Telerik.Web.UI.Editor.CommandList._getLinkArgument(b);
d._name=d._commandName="InsertLink";
Telerik.Web.UI.Editor.CommandList._getDialogArguments(d,"A",b,f);
var c=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(e,function(i,h){var g=h.get_value();
b.pasteHyperLink(g,f);
});
b.showDialog(a,d,c);
return false;
};
this.InsertImage=this.SetImageProperties=function(f,a,e){var c=a.getSelectedElement();
if(c&&c.nodeName!="IMG"){c=null;
}var d=new Telerik.Web.UI.EditorCommandEventArgs(f,null,c);
Telerik.Web.UI.Editor.CommandList._getDialogArguments(d,"IMG",a,f);
d.Element=c;
var b=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(e,function(j,i){var h=i.get_value?i.get_value():i.Result;
if(!h){return;
}if(c&&c.parentNode){var g=new Telerik.Web.UI.Editor.GenericCommand(a.getLocalizedString(f),a.get_contentWindow(),a);
c.parentNode.replaceChild(h,c);
a.executeCommand(g);
}else{a.pasteHtml(Telerik.Web.UI.Editor.Utils.getOuterHtml(h),f);
}});
if(f=="SetImageProperties"){a.showDialog("ImageProperties",d,b);
}else{a.showDialog("InsertImage",d,b);
}return false;
};
this.InsertExternalVideo=function(d,c,b){var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(e,f){c.pasteHtml(f.get_value(),d);
});
c.showDialog("InsertExternalVideo",null,a);
};
this.FormatCodeBlock=function(f,b,e){var d=new Telerik.Web.UI.EditorCommandEventArgs("FormatCodeBlock",null,b.getSelectionHtml());
d.dirtyCode=b.getSelectionHtml();
if(b.get_document().selection&&b.get_document().selection){var a=b.get_document().selection.type.toLowerCase();
if(a=="control"||a=="none"){d.set_value("");
}}var c=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(e,function(g,h){b.pasteHtml(h.get_value?h.get_value():h.get_code(),f);
});
b.showDialog("FormatCodeBlock",d,c);
return false;
};
this._getDocumentAnchors=function(a){var b=a.getElementsByTagName("A");
var c=new Array();
for(var d=0;
d<b.length;
d++){if(b[d].name){c[c.length]=b[d];
}}return c;
};
this._getParentLink=function(a){var i=a.getSelectedElement();
var h=Telerik.Web.UI.Editor.Utils.getElementParentByTag(i,"A");
if(h){a.selectElement(h);
}else{var d="";
var b=(i&&i.tagName)?i.tagName:"";
if(b=="IMG"){d=Telerik.Web.UI.Editor.Utils.getOuterHtml(i);
}else{if($telerik.isIE&&a.getSelectionHtml()){if(b=="BODY"||b=="TD"||b=="TABLE"||b=="P"||b=="LI"||b=="UL"||b=="OL"){var c=a.getSelection().getRange();
if(c.collapse){c.collapse(false);
var f=c.parentElement();
if($telerik.isDescendant(i,f)){d=f.innerHTML;
c.moveToElementText(f);
c.select();
}}}}}if(!d){d=a.getSelectionHtml();
}if($telerik.isIE){var b=i.tagName;
if(b=="FONT"||b=="SPAN"){d=d.replace(/^<(FONT|SPAN)[^>]*>/gi,"");
d=d.replace(/<\/(FONT|SPAN)>$/gi,"");
}}h=a.get_document().createElement("a");
try{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(h,d);
}catch(g){h.innerHTML=Telerik.Web.UI.Editor.Utils.stripFormatting(d,"ALL");
}}return h;
};
this._getLinkArgument=function(a,b){var g=Telerik.Web.UI.Editor.CommandList._getParentLink(a);
var c=g.innerHTML;
var e=!c?false:c.match(/</);
if($telerik.isIE&&e){var f=c.trim().toLowerCase();
if(f.match(/<p[^>]*>(&nbsp;|\s*)<\/p>/)){g.innerHTML=" ";
e=false;
}}var d=new Telerik.Web.UI.EditorCommandEventArgs("LinkManager",null,g.cloneNode(true));
d.selectedTabIndex=b?b:0;
d.showText=!e;
d.documentAnchors=Telerik.Web.UI.Editor.CommandList._getDocumentAnchors(a.get_document());
d.realLink=d.get_value();
return d;
};
this._getParentTable=function(c){c.setFocus();
var b=c.getSelectedElement();
var a=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"TABLE");
return a;
};
this._getParentCell=function(c){c.setFocus();
var b=c.getSelectedElement();
var a=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"TD");
if(!a){a=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b,"TH");
}return a;
};
this._getTableArgument=function(b,c,f,a){var g;
var d=null;
if(f){g=Telerik.Web.UI.Editor.Utils.createTable(2,2,b.get_document());
}else{g=Telerik.Web.UI.Editor.CommandList._getParentTable(b);
}if(!f&&!g){return null;
}if(a){d=Telerik.Web.UI.Editor.CommandList._getParentCell(b);
}var h=g.cloneNode(true);
var e=g;
return{selectedTabIndex:c?c:0,cellToModify:d,tableToModify:h,originalTable:e,tableDocument:(h.document)?h.document:b.get_document()};
};
this.EnterParagraphMozilla=function(r,b,e){var j=b.getSelectedElement();
if(j.tagName=="A"||"LI"==j.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(j,"LI")!=null){b.bubbleKeyEventToBrowser();
return false;
}function m(u){if(!u){return null;
}var s=u;
var t=s.tagName;
while(t!="TD"&&!Telerik.Web.UI.Editor.Utils.isEditorContentArea(s)){t=s.tagName;
if(!t){t="";
}if(t=="P"||(t.charAt(0)=="H"&&!isNaN(parseInt(t.charAt(1))))||t=="DIV"||t=="ADDRESS"||t=="PRE"){return s;
}s=s.parentNode;
if(!s){return null;
}}}var n=m(j);
var p=false;
if(n){var i=n.tagName;
var p=(i.charAt(0)=="H"&&!isNaN(parseInt(i.charAt(1))));
if(i!="P"&&!p&&i!="DIV"){b.bubbleKeyEventToBrowser();
return false;
}}if(!n){b.get_document().execCommand("InsertParagraph",null,false);
n=m(b.getSelectedElement());
}var d=b.getLocalizedString("Enter");
var g=new Telerik.Web.UI.Editor.GenericCommand(d,b.get_contentWindow(),b);
var l=b.getSelection().getRange();
l.deleteContents();
var a=l.startOffset;
var c=l.startContainer;
var f=l.cloneRange();
f.setStart(n,0);
f.setEnd(c,a);
var o=f.extractContents();
if(n.tagName=="P"&&n.innerHTML==""){n.innerHTML="<br />";
}var q=n.cloneNode(false);
q.appendChild(o);
n.parentNode.insertBefore(q,n);
if(!Telerik.Web.UI.Editor.Utils.getTextContent(q)){q.innerHTML="&nbsp;";
}if(p&&n.innerHTML==""){var k=b.get_document().createElement("P");
k.innerHTML="<br />";
n.parentNode.insertBefore(k,n);
n.parentNode.removeChild(n);
var h=b.getSelection();
var l=h.getRange();
l.selectNodeContents(k);
h.selectRange(l);
h.collapse(true);
}b.executeCommand(g);
return false;
};
this.EnterMozilla=function(d,c,b){if(c.get_mode()==Telerik.Web.UI.EditModes.Preview){return false;
}var a=c.getSelectedElement();
if(a!=null&&a.tagName!="P"){c.bubbleKeyEventToBrowser();
return true;
}else{c.pasteHtml("<br />");
}};
this.EnterNewLine=function(c,b,a){b.executeCommand(new Telerik.Web.UI.Editor.EnterNewLineCommand("Enter",b.get_contentWindow(),false,b));
};
this.Enter=function(j,a,h){if(a.get_mode()==Telerik.Web.UI.EditModes.Preview){return false;
}var f=a.getSelectedElement();
if("LI"==f.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(f,"LI")!=null){a.bubbleKeyEventToBrowser();
return false;
}try{var g=a.getLocalizedString("Enter");
var c=new Telerik.Web.UI.Editor.GenericCommand(g,a.get_contentWindow(),a);
var i=a.get_document().selection.createRange();
if(i.pasteHTML){var e=f.tagName;
if(e.charAt(0)=="H"&&parseInt(e.charAt(1))>0){var b=i.duplicate();
b.moveToElementText(f);
a.bubbleKeyEventToBrowser();
return false;
}else{if(e.toLowerCase()=="textarea"){a.bubbleKeyEventToBrowser();
return false;
}}i.pasteHTML("<br>");
i.select();
i.moveEnd("character",1);
i.moveStart("character",1);
i.collapse(false);
}else{if(i(0)){i.execCommand("Delete");
}}a.executeCommand(c);
}catch(d){alert(d.message);
}return false;
};
this.ShiftEnter=function(g,a,e){var c=a.getSelectedElement();
if("LI"==c.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(c,"LI")!=null){var d=a.getLocalizedString("Enter");
var b=new Telerik.Web.UI.Editor.GenericCommand(d,a.get_contentWindow(),a);
var f=a.get_document().selection.createRange();
f.pasteHTML("<br>");
f.select();
f.moveEnd("character",1);
f.moveStart("character",1);
f.collapse(false);
a.executeCommand(b);
return false;
}a.bubbleKeyEventToBrowser();
return false;
};
this.ShiftEnterSafari=function(e,d,c){var a=d.getSelectedElement();
if("LI"==a.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(a,"LI")!=null){var b=new Telerik.Web.UI.Editor.GenericCommand("Enter",d.get_contentWindow(),d);
d.pasteHtml("<br />","",null,null,false);
d.executeCommand(b);
}else{Telerik.Web.UI.Editor.CommandList.EnterNewLine(e,d,c);
}return false;
};
this.EnterSafari=function(d,c,b){var a=c.getSelectedElement();
if("LI"==a.tagName||Telerik.Web.UI.Editor.Utils.getElementParentByTag(a,"LI")!=null){c.bubbleKeyEventToBrowser();
return false;
}c.executeBrowserCommand("InsertLineBreak",true,"");
return false;
};
this.ToggleTableBorder=function(c,b,a){b.toggleEnhancedEdit();
return false;
};
this.ConvertToUpper=this.ConvertToLower=function(q,g,f){var o;
var j;
if($telerik.isIE){if(g.get_document().selection.type.toLowerCase()=="control"){return;
}var e=g.get_document().selection.createRange();
o=e.duplicate();
j=e.duplicate();
o.collapse();
j.collapse(false);
}var c=Telerik.Web.UI.Editor.CommandList._markEditorSelection(g);
var n=c.markedElements;
var p=c.newElements;
var a=new Telerik.Web.UI.Editor.GenericCommand(g.getLocalizedString(q),g.get_contentWindow(),g);
for(var k=0;
k<n.length;
k++){b(n[k]);
}for(var k=0;
k<p.length;
k++){if($telerik.isIE){p[k].removeNode(false);
}else{var l=document.createRange();
l.selectNodeContents(p[k]);
p[k].parentNode.replaceChild(l.extractContents(),p[k]);
}}if($telerik.isIE){var d=g.get_document().selection.createRange();
d.setEndPoint("StartToStart",o);
d.setEndPoint("EndToEnd",j);
d.select();
}else{var h=g.get_contentWindow().getSelection();
var m=h.getRangeAt(0);
m.collapse(true);
}g.executeCommand(a);
function b(t){var s=t.childNodes;
for(var r=0;
r<s.length;
r++){if(s[r].nodeType==3){s[r].nodeValue=("ConvertToLower"==q)?s[r].nodeValue.toLowerCase():s[r].nodeValue.toUpperCase();
}else{if(s[r].nodeType==1&&s[r].tagName.toUpperCase()!="FONT"){b(s[r]);
}}}}};
this.ApplyClass=function(q,e,d){var o=true;
var b=d.get_value();
var k=e.get_contentWindow();
var j=e.get_document();
var a=new Telerik.Web.UI.Editor.GenericCommand(e.getLocalizedString(q)+' ["'+b+'"]',e.get_contentWindow(),e);
var h=e.getSelectedElement();
var l=e.getSelection().getHtml();
var p=(!b&&!l)||l.match(/<(font|span)[^>]*><\/(font|span)>/ig)||(h&&h.tagName=="UL");
var m=(p)?h:Telerik.Web.UI.Editor.Utils.getFullySelectedElement(k);
if(m){Telerik.Web.UI.Editor.Utils.setElementClassName(m,b);
o=false;
}else{if(!b){j.execCommand("RemoveFormat",false,null);
o=false;
}}if(o){var g=Telerik.Web.UI.Editor.CommandList._markEditorSelection(e);
var c=g.markedElements;
if(c.length>0){for(var f=0;
f<c.length;
f++){var n=c[f];
if(n.className&&n.className!="Apple-style-span"){continue;
}else{n.className=b;
}}if(!$telerik.isIE){Telerik.Web.UI.Editor.Utils.addElementsToSelection(e.get_contentWindow(),c);
}}else{Telerik.Web.UI.Editor.CommandList._completeEditorSelection(e,"class='"+b+"'");
}}e.executeCommand(a);
};
this.RealFontSize=function(n,f,e){var a=e.get_value();
var b=new Telerik.Web.UI.Editor.GenericCommand(f.getLocalizedString(n)+' ["'+a+'"]',f.get_contentWindow(),f);
var c=Telerik.Web.UI.Editor.CommandList._markEditorSelection(f);
var m=c.markedElements;
if(m.length>0){var k=[];
for(var j=0;
j<m.length;
j++){var d=m[j];
var l=false;
if($telerik.isSafari){var h=d.parentNode;
var g=h.tagName;
if((g=="FONT"||g=="SPAN")&&h.childNodes.length==1){h.style.fontSize=a;
h.removeAttribute("size");
Telerik.Web.UI.Editor.Utils.removeNode(d);
l=true;
k.push(h);
f.selectElement(h);
}}if(!l){d.style.fontSize=a;
d.removeAttribute("size");
k.push(d);
}}if(!$telerik.isIE){Telerik.Web.UI.Editor.Utils.addElementsToSelection(f.get_contentWindow(),k);
}}else{Telerik.Web.UI.Editor.CommandList._completeEditorSelection(f,"style='font-size:"+a+"'");
}f.executeCommand(b);
};
this._completeEditorSelection=function(a,e){if(!e){e="";
}var i=a.get_contentWindow();
var d=a.get_document();
var g=a.getSelection().getParentElement().tagName;
if($telerik.isIE&&!a.getSelectionHtml()&&(g=="FONT"||g=="SPAN")){d.execCommand("RemoveFormat",null,false);
}var f=a.getSelection();
f.pasteHtml("<font "+e+" id='radERealFont'>&nbsp;</font>");
var c=a.get_document().getElementById("radERealFont");
c.removeAttribute("id");
if($telerik.isIE){a.selectElement(c);
a.getSelection().collapse();
c.innerHTML="";
}else{if(i.getSelection){var h=i.getSelection();
var b=a.getSelection().getRange();
h.removeAllRanges();
c.innerHTML="";
if(b&&b.selectNodeContents){b.selectNodeContents(c);
}h.addRange(b);
}}};
this._markEditorSelection=function(c){if(c.get_html()==""){return{markedElements:[],newElements:[],oldElements:[]};
}var a="AZBY";
var b="_cm";
var v=[];
var p=[];
var e=[];
var h=[];
var g=$telerik.isSafari2||$telerik.isSafari3;
var m=g?"span":"font";
var d=c.get_contentArea();
if(g){var n=new Telerik.Web.UI.Editor.OptimizeSpans();
n.getHtmlContent(d);
}var t=c.getSelection();
if(t.isControl()){var s=t.getParentElement();
var r=c.get_document().createElement(m);
r.appendChild(s.cloneNode(true));
s.parentNode.replaceChild(r,s);
return{markedElements:[r],newElements:[r]};
}q();
if(!$telerik.isIE){d.ownerDocument.execCommand("UseCSS",false,true);
d.ownerDocument.execCommand("styleWithCSS",false,false);
}d.ownerDocument.execCommand("FontName",false,a);
var u=d.getElementsByTagName(m);
for(var o=0;
o<u.length;
o++){var r=u[o];
if(r.getAttribute("face")==a||r.style.fontFamily==a){r.removeAttribute("face");
if(r.style.fontFamily==a){r.style.fontFamily="";
if(r.className=="Apple-style-span"){r.className="";
}}p.push(r);
var w=r.getElementsByTagName(m);
for(var k=0;
k<w.length;
k++){var l=w[k];
if(l.getAttribute("face")!=a){p.push(l);
}}if(!r.getAttribute(b)){e.push(r);
}else{h.push(r);
}}r.removeAttribute(b);
}f();
if(!$telerik.isIE){d.ownerDocument.execCommand("UseCSS",false,false);
d.ownerDocument.execCommand("styleWithCSS",false,true);
}function q(){var x=c.get_contentArea().getElementsByTagName(m);
for(var j=0;
j<x.length;
j++){var y=x[j];
if(x[j].face){y.setAttribute("_face",y.face);
v.push(y);
}else{if(g){y.setAttribute("_face",y.style.fontFamily);
v.push(y);
}}y.setAttribute(b,1);
}}function f(){for(var j=0;
j<v.length;
j++){if(g){v[j].style.fontFamily=v[j].getAttribute("_face");
}else{v[j].face=v[j].getAttribute("_face");
}v[j].removeAttribute("_face");
}v=[];
}return{markedElements:p,newElements:e,oldElements:h};
};
this.CSDialog=function(e,d,b){var c=d;
var a=Telerik.Web.UI.Editor.CommandList.getCallbackFunction(b,function(f,g){});
d.showDialog("CSDialog",c,a);
return false;
};
})();
if(typeof(RadEditorCommandList)=="undefined"){var RadEditorCommandList=Telerik.Web.UI.Editor.CommandList;
}Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.CommandsManager=function(a){this._commands=[];
this._currentCommandIndex=-1;
};
Telerik.Web.UI.Editor.CommandsManager.prototype={get_commands:function(){return this._commands;
},execute:function(a,c){if(a&&a.execute){var b=a.execute();
if(false==c){return false;
}if(b&&a._canUnexecute){this._clearCommandsToRedo();
Array.add(this._commands,a);
this._currentCommandIndex=this._commands.length-1;
return true;
}}return false;
},undo:function(b){if(b>this._commands.length){b=this._commands.length;
}var c=0;
var a=null;
while(0<b--&&0<=this._currentCommandIndex&&this._currentCommandIndex<this._commands.length){a=this._commands[this._currentCommandIndex--];
if(a){a.unexecute();
c++;
}}},redo:function(b){if(b>this._commands.length){b=this._commands.length;
}var c=0;
var a=null;
var d=this._currentCommandIndex+1;
while(0<b--&&0<=d&&d<this._commands.length){a=this._commands[d];
if(a){a.execute();
this._currentCommandIndex=d;
c++;
}d++;
}},removeCommandAt:function(a){this._commands.splice(a,1);
if(this._currentCommandIndex>=a){this._currentCommandIndex--;
}},isUndoAvailable:function(){return(-1<this._currentCommandIndex);
},isRedoAvailable:function(){return(this._currentCommandIndex<this._commands.length-1);
},getCommandsToUndo:function(){if(this.isUndoAvailable()){return(this._commands.slice(0,this._currentCommandIndex+1)).reverse();
}else{return[];
}},getCommandsToRedo:function(){if(this.isRedoAvailable()){return this._commands.slice(this._currentCommandIndex+1);
}else{return[];
}},canRepeatLastCommand:function(){return((this._currentCommandIndex==this._commands.length-1)&&null!=this._commands[this._currentCommandIndex]&&("function"==typeof(this._commands[this._currentCommandIndex].clone)));
},repeatLastCommand:function(){if(this.canRepeatLastCommand()){var a=this._commands[this._currentCommandIndex].clone();
this.execute(a);
}},_clearCommandsToRedo:function(){if(this.isRedoAvailable()){this._commands.splice(this._currentCommandIndex+1,this._commands.length-this._currentCommandIndex);
}}};
Telerik.Web.UI.Editor.CommandsManager.registerClass("Telerik.Web.UI.Editor.CommandsManager",null);
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
(function(){var b=$telerik.$;
var a=Telerik.Web.UI;
b.registerEnum(a.Editor,"CommandStates",{Disabled:-1,Off:0,On:1});
b.registerEnum(a,"EditingOptions",{Typing:1,Tools:2,ContextMenus:4,Tab:8,Modules:16,EditModes:32,All:63});
b.registerEnum(a,"StripFormattingOptions",{None:0,NoneSupressCleanMessage:1,MSWord:2,MSWordNoFonts:4,MSWordRemoveAll:8,Css:16,Font:32,Span:64,AllExceptNewLines:128,ConvertWordLists:256,All:512});
b.registerEnum(a,"EditorToolbarMode",{Default:1,Floating:2,PageTop:4,ShowOnFocus:8,RibbonBar:16,RibbonBarFloating:32,RibbonBarPageTop:64,RibbonBarShowOnFocus:128});
b.registerEnum(a,"EditorFilters",{None:0,RemoveScripts:1,MakeUrlsAbsolute:2,FixUlBoldItalic:4,FixEnclosingP:8,IECleanAnchors:16,MozEmStrong:32,ConvertFontToSpan:64,ConvertToXhtml:128,IndentHTMLContent:256,EncodeScripts:512,OptimizeSpans:1024,ConvertCharactersToEntities:2048,PdfExportFilter:4096,ConvertInlineStylesToAttributes:8192,DefaultFilters:53245});
b.registerEnum(a,"EditorNewLineModes",{Br:1,P:2,Div:4});
b.registerEnum(a,"EditorToolType",{Button:1,DropDown:2,SplitButton:4,Separator:8,ToolStrip:16,Custom:32});
b.registerEnum(a,"EditModes",{Design:1,Html:2,Preview:4,All:7});
b.registerEnum(a,"EditorContentAreaMode",{Iframe:1,Div:2});
})();
Type.registerNamespace("Telerik.Web.UI");
Type.registerNamespace("Telerik.Web.UI.Editor");
$telerik.toEditorFilter=function(a){return a;
};
$telerik.findEditorFilter=$find;
Telerik.Web.UI.Editor.Filter=function(){Telerik.Web.UI.Editor.Filter.initializeBase(this);
this.IsDom=false;
this.Enabled=false;
this.Name="RadEditor filter";
this.Description="RadEditor filter description";
};
Telerik.Web.UI.Editor.Filter.prototype={getHtmlContent:function(a){return a;
},getDesignContent:function(a){return a;
},get_isDom:function(){return this.IsDom;
},set_isDom:function(a){this.IsDom=a;
},get_enabled:function(){return this.Enabled;
},set_enabled:function(a){this.Enabled=a;
},get_name:function(){return this.Name;
},set_name:function(a){this.Name=a;
},get_description:function(){return this.Description;
},set_description:function(a){this.Description=a;
}};
Telerik.Web.UI.Editor.Filter.registerClass("Telerik.Web.UI.Editor.Filter",Sys.Component);
Telerik.Web.UI.Editor.StripScriptsFilter=function(){Telerik.Web.UI.Editor.StripScriptsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="StripScriptsFilter";
this.Description="This filter strips all script tags from the content.";
};
Telerik.Web.UI.Editor.StripScriptsFilter.prototype={getHtmlContent:function(a){return this._performStripping(a);
},getDesignContent:function(a){return this._performStripping(a);
},_performStripping:function(a){var b=a.replace(new RegExp("<(SCRIPT)([^>]*)/>","ig"),"");
b=b.replace(RegExp("<(SCRIPT)([^>]*)>[\\s\\S]*?</(SCRIPT)([^>]*)>","ig"),"");
return b;
}};
Telerik.Web.UI.Editor.StripScriptsFilter.registerClass("Telerik.Web.UI.Editor.StripScriptsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.EncodeScriptsFilter=function(){Telerik.Web.UI.Editor.EncodeScriptsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="EncodeScriptsFilter";
this.Description="This filter encodes all script tags from the content.";
};
Telerik.Web.UI.Editor.EncodeScriptsFilter.prototype={getHtmlContent:function(a){var e=new RegExp("<!--RADEDITORSAVEDTAG_([\\s\\S]*?)-->","ig");
var b=new RegExp("RADEDITORSAVEDTAGENDING","ig");
var d=new RegExp("RADEDITORSAVEDTAGBEGINNING","ig");
var c=a.replace(e,"<$1>");
c=c.replace(b,"-->");
c=c.replace(d,"<!--");
return c;
},getDesignContent:function(a){var c=function(h,i,k,n,m){var f=m.substring(0,n).lastIndexOf("<!--");
var p=m.substring(0,n).lastIndexOf("-->");
if(f>p){f=m.substring(n,m.length).indexOf("<!--");
p=m.substring(n,m.length).indexOf("-->");
if((f==-1&&p>-1)||(p<f)){return h;
}}var l=new RegExp("-->","ig");
var e=new RegExp("<!--","ig");
var g=k.replace(l,"RADEDITORSAVEDTAGENDING");
g=g.replace(e,"RADEDITORSAVEDTAGBEGINNING");
var o="<!--RADEDITORSAVEDTAG_"+i+g+"-->";
return o;
};
var d=new RegExp("<(script|noscript)([\\s\\S]*?<\\/\\1)>","ig");
var b=a.replace(d,c);
return b;
}};
Telerik.Web.UI.Editor.EncodeScriptsFilter.registerClass("Telerik.Web.UI.Editor.EncodeScriptsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.RemoveExtraBrakes=function(){Telerik.Web.UI.Editor.RemoveExtraBrakes.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="RemoveExtraBrakes";
this.Description="This filter strips all extra brakes inside some tags like p, h1, etc.";
};
Telerik.Web.UI.Editor.RemoveExtraBrakes.prototype={getHtmlContent:function(a){return this._performStripping(a);
},_performStripping:function(a){var b=a;
if($telerik.isFirefox||$telerik.isOpera){b=b.replace(/<BR\s?\/?>\s*<SCRIPT/ig,"<script");
}b=b.replace(/<BR\s?\/?>\s*<\/(H1|H2|H3|H4|H5|H6|LI|P)/ig,function(f,c,e,d){if(!d.substr(0,e).match(/<BR\s?\/?>\s*$/gi)){f="</"+c;
}return f;
});
b=b.replace(/<(H1|H2|H3|H4|H5|H6|LI|P)([^>]*)?><BR\s?\/?>/ig,"<$1 $2>");
if($telerik.isSafari){b=b.replace(/<p><\/p>/ig,"<p><br /></p>");
}return b;
}};
Telerik.Web.UI.Editor.RemoveExtraBrakes.registerClass("Telerik.Web.UI.Editor.RemoveExtraBrakes",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.FixNestedLists=function(){Telerik.Web.UI.Editor.FixNestedLists.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="FixNestedLists";
this.Description="This filter produces valid XHTML from nested lists";
};
Telerik.Web.UI.Editor.FixNestedLists.prototype={_getElements:function(b,a){var c=b.getElementsByTagName(a);
if(!c){c=b.ownerDocument.getElementsByTagName(a);
}return c;
},fixLists:function(g,c){var d=this._getElements(g,c);
for(var a=d.length-1;
a>=0;
a--){var e=d[a];
var b=e.previousSibling;
if(b&&b.nodeType==3){b=b.previousSibling;
}if(b&&"li"==e.previousSibling.nodeName.toLowerCase()){b.appendChild(e.cloneNode(true));
var f=e.parentNode;
f.removeChild(e);
f=null;
}}},getHtmlContent:function(a){this.fixLists(a,"OL");
this.fixLists(a,"UL");
return a;
}};
Telerik.Web.UI.Editor.FixNestedLists.registerClass("Telerik.Web.UI.Editor.FixNestedLists",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.FixUlBoldItalic=function(){Telerik.Web.UI.Editor.FixUlBoldItalic.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="FixUlBoldItalic";
this.Description="This filter changes u, b, i tags to spans with CSS";
};
Telerik.Web.UI.Editor.FixUlBoldItalic.prototype={_getElements:function(b,a){var c=b.getElementsByTagName(a);
if(!c){c=b.ownerDocument.getElementsByTagName(a);
}return c;
},_replaceElementWithSpan:function(a,l,k){var g=this._getElements(a,l);
var m=[];
for(var b=g.length-1;
b>=0;
b--){Array.add(m,g[b]);
}for(var c=0,f=m.length;
c<f;
c++){var h=a.ownerDocument.createElement("span");
h.style.cssText=k;
var d=m[c];
var e=d.innerHTML;
if($telerik.isIE&&e==" "){h.innerText=e;
}else{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(h,e);
}d.parentNode.replaceChild(h,d);
}},_replaceSpanWithElement:function(e,n,d){var a=this._getElements(e,"span");
var o=[];
for(var g=a.length-1;
g>=0;
g--){Array.add(o,a[g]);
}for(var f=0,b=o.length;
f<b;
f++){var q=[];
var c=o[f];
for(var h=0;
h<c.childNodes.length;
h++){Array.add(q,c.childNodes[h].cloneNode(true));
}if(c.style.cssText.toLowerCase()==d||c.style.cssText.toLowerCase()==(d+";")){var p=e.ownerDocument.createElement(n);
for(var m=0;
m<q.length;
m++){p.appendChild(q[m]);
}c.parentNode.replaceChild(p,c);
}}},getHtmlContent:function(a){this._replaceElementWithSpan(a,"u","text-decoration:underline;");
this._replaceElementWithSpan(a,"strike","text-decoration: line-through;");
return a;
},getDesignContent:function(a){this._replaceSpanWithElement(a,"u","text-decoration: underline");
this._replaceSpanWithElement(a,"strike","text-decoration: line-through");
return a;
}};
Telerik.Web.UI.Editor.FixUlBoldItalic.registerClass("Telerik.Web.UI.Editor.FixUlBoldItalic",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.OptimizeSpans=function(){Telerik.Web.UI.Editor.OptimizeSpans.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="OptimizeSpans";
this.Description="This filter changes removes unneeded span elements";
};
Telerik.Web.UI.Editor.OptimizeSpans.prototype={_getElements:function(b,a){var c=b.getElementsByTagName(a);
if(!c){c=b.ownerDocument.getElementsByTagName(a);
}return c;
},_singleChild:function(f){if(f==null||f.parentNode==null){return false;
}var d=f.parentNode;
var b=0;
for(var a=0,c=d.childNodes.length;
a<c&&b<2;
a++){var e=d.childNodes[a];
if(e.nodeType==3&&String(e.nodeValue).trim()==""){continue;
}b++;
}return(b==1);
},_optimizeElement:function(d){var g=d.parentNode;
var k=["align","dir","lang","title","class","id"];
var l=true;
for(var a=0,c=k.length;
a<c;
a++){l|=this._checkAttribute(d,g,k[a]);
}if(!l){return;
}for(var a=0,c=k.length;
a<c;
a++){var e=k[a];
var h=d.getAttribute(e,2);
if(h){g.setAttribute(e,h);
}}var f=$telerik.isIE?d.style.cssText:d.getAttribute("style",2);
if(f){var b=$telerik.isIE?g.style.cssText:g.getAttribute("style",2);
b=b?b+";":"";
if($telerik.isIE){g.style.cssText=b+f;
}else{g.setAttribute("style",b+f);
}}Telerik.Web.UI.Editor.Utils.removeNode(d);
},_checkAttribute:function(b,c,a){var d=b.getAttribute(a,2);
var e=c.getAttribute(a,2);
return(d==null||e==null||d==e);
},getHtmlContent:function(g){var c=this._getElements(g,"span");
if(c){var a,d=c.length;
var h=[];
for(a=0;
a<d;
a++){var e=c[a];
var f=e.tagName.toLowerCase();
if(e.parentNode.tagName.toLowerCase()==f){if(this._singleChild(e)){h[h.length]=e;
}else{var b=Telerik.Web.UI.Editor.Utils.getOuterHtml(e).toLowerCase();
if(b.indexOf("<"+f+">")==0){h[h.length]=e;
}}}}d=h.length;
for(a=0;
a<d;
a++){this._optimizeElement(h[a]);
}}return g;
}};
Telerik.Web.UI.Editor.OptimizeSpans.registerClass("Telerik.Web.UI.Editor.OptimizeSpans",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEKeepCommentsFilter=function(){Telerik.Web.UI.Editor.IEKeepCommentsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IEKeepCommentsFilter";
this.Description="This filter keeps the conditional comments in IE.";
};
Telerik.Web.UI.Editor.IEKeepCommentsFilter.prototype={getHtmlContent:function(b){var a=new RegExp("<!--RADEDITORSAVEDCOMMENT","ig");
var c=b.replace(a,"<!--");
return c;
},getDesignContent:function(b){var a=new RegExp("<!--(\\[[^\\]]+\\][\\s\\S]*?)-->","ig");
var c=b.replace(a,"<!--RADEDITORSAVEDCOMMENT$1-->");
return c;
}};
Telerik.Web.UI.Editor.IEKeepCommentsFilter.registerClass("Telerik.Web.UI.Editor.IEKeepCommentsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEKeepObjectParamsFilter=function(){Telerik.Web.UI.Editor.IEKeepObjectParamsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IEKeepObjectParamsFilter";
this.Description="This filter keeps the params of object tags when going to html mode and back.";
this._paramRegex=new RegExp("<param([\\s\\S]+?)/?>","ig");
};
Telerik.Web.UI.Editor.IEKeepObjectParamsFilter.prototype={getHtmlContent:function(d){var a=new RegExp("<rade_param","ig");
var e=this._paramRegex.test(d);
var c=a.test(d);
var b=d;
if(e&&c){b=b.replace(this._paramRegex,"");
}if(c){b=b.replace(a,"<param");
b=b.replace(/>\s*<\/rade_param>/gi,"/>");
b=b.replace(this._paramRegex,"<param$1/>");
}return b;
},getDesignContent:function(a){var b=a.replace(this._paramRegex,"<rade_param$1></rade_param><param$1/>");
return b;
}};
Telerik.Web.UI.Editor.IEKeepObjectParamsFilter.registerClass("Telerik.Web.UI.Editor.IEKeepObjectParamsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEKeepObjectDesignFilter=function(){Telerik.Web.UI.Editor.IEKeepObjectDesignFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="IEKeepObjectDesignFilter";
this.Description="This filter keeps the browser from automatically changing object tags when going to html mode and back.";
};
Telerik.Web.UI.Editor.IEKeepObjectDesignFilter.prototype={getHtmlContent:function(b){var a=b.getElementsByTagName("object");
for(var c=0,d=a.length;
c<d;
c++){var g=a[c];
var f=g.getAttribute("data",2);
var e=g.getAttribute("type",2);
if(f&&e&&e.toLowerCase().indexOf("silverlight")!=-1&&f.toLowerCase().indexOf("base64")!=-1){g.setAttribute("data","data:"+e+",");
}}return b;
}};
Telerik.Web.UI.Editor.IEKeepObjectDesignFilter.registerClass("Telerik.Web.UI.Editor.IEKeepObjectDesignFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.FixEnclosingP=function(){Telerik.Web.UI.Editor.FixEnclosingP.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="FixEnclosingP";
this.Description="This filter removes a parent paragraph tag if the whole content is inside it.";
};
Telerik.Web.UI.Editor.FixEnclosingP.prototype={getHtmlContent:function(a){var b=null;
if(a.tagName.toLowerCase()=="html"){b=a.getElementsByTagName("BODY")[0];
}else{b=a;
}if($telerik.isIE){if(b&&(b.firstChild)&&("P"==b.firstChild.tagName)&&(b.childNodes.length==1)&&(b.innerHTML.substring(0,3).toLowerCase()=="<p>")){Telerik.Web.UI.Editor.Utils.removeNode(b.firstChild);
}}return a;
}};
Telerik.Web.UI.Editor.FixEnclosingP.registerClass("Telerik.Web.UI.Editor.FixEnclosingP",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IEFixEmptyParagraphs=function(){Telerik.Web.UI.Editor.IEFixEmptyParagraphs.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IEFixEmptyParagraphs";
this.Description="This filter inserts a non-braking space in empty paragraph tags so they are rendered correctly in IE.";
};
Telerik.Web.UI.Editor.IEFixEmptyParagraphs.prototype={getHtmlContent:function(a){var c=new RegExp("(<p[^>]*>)(<\\/p>)","ig");
var b=a.replace(c,"$1&nbsp;$2");
return b;
}};
Telerik.Web.UI.Editor.IEFixEmptyParagraphs.registerClass("Telerik.Web.UI.Editor.IEFixEmptyParagraphs",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IECleanAnchorsFilter=function(){Telerik.Web.UI.Editor.IECleanAnchorsFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="IECleanAnchorsFilter";
this.Description="This filter removse the current page href from all anchor (#) links .";
};
Telerik.Web.UI.Editor.IECleanAnchorsFilter.prototype={getHtmlContent:function(d){var a=Telerik.Web.UI.Editor.Utils.escapeRegExSpecialChars(document.location.href);
var c=new RegExp("(<A[^<>]*?(href)\\s*=\\s*['\"])("+a+")(\\#[^'\"]*?['\"][^>]*?>)","ig");
var b=d.replace(c,"$1$4");
return b;
}};
Telerik.Web.UI.Editor.IECleanAnchorsFilter.registerClass("Telerik.Web.UI.Editor.IECleanAnchorsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozEmStrongFilter=function(){Telerik.Web.UI.Editor.MozEmStrongFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="MozEmStrongFilter";
this.Description="This filter changes b,strong and i,em in Mozilla browsers.";
};
Telerik.Web.UI.Editor.MozEmStrongFilter.prototype={getHtmlContent:function(a){var b=a.replace(new RegExp("<b(\\s([^>])*?)?>","ig"),"<strong$1>");
b=b.replace(new RegExp("</b(\\s([^>])*?)?>","ig"),"</strong$1>");
b=b.replace(new RegExp("<i(\\s([^>])*?)?>","ig"),"<em$1>");
b=b.replace(new RegExp("</i(\\s([^>])*?)?>","ig"),"</em$1>");
return b;
},getDesignContent:function(a){var b=a.replace(new RegExp("<strong(\\s([^>])*?)?>","ig"),"<b$1>");
b=b.replace(new RegExp("</strong(\\s([^>])*?)?>","ig"),"</b$1>");
b=b.replace(new RegExp("<em(\\s([^>])*?)?>","ig"),"<i$1>");
b=b.replace(new RegExp("</em(\\s([^>])*?)?>","ig"),"</i$1>");
return b;
}};
Telerik.Web.UI.Editor.MozEmStrongFilter.registerClass("Telerik.Web.UI.Editor.MozEmStrongFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozillaKeepStylesString=function(){Telerik.Web.UI.Editor.MozillaKeepStylesString.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="MozillaKeepStylesString";
this.Description="This filter remembers the positions of link tags in the html content (part 1).";
this.markerCounter=0;
};
Telerik.Web.UI.Editor.MozillaKeepStylesString.prototype={getDesignContent:function(a){var d=this;
var c=function(f,i,h,l,g){var n=g.indexOf("</head>",l);
if(n!=-1&&g.indexOf("<body",n)!=-1){return f;
}else{d.markerCounter++;
var k="RadEditorStyleKeeper"+d.markerCounter;
var m="<div id='"+k+"' style='display:none;'>&nbsp;</div><"+i+" reoriginalpositionmarker='"+k+"'"+h;
return m;
}};
var e=new RegExp("<(link|style)([^>]*>)","gi");
var b=a.replace(e,c);
return b;
},getHtmlContent:function(a){var d=new RegExp("<(link|style) reoriginalpositionmarker='RadEditorStyleKeeper[^']+'([^>]*>)","gi");
var b=a.replace(d,"<$1$2");
var c=new RegExp("<div id='RadEditorStyleKeeper[^']+' style='display:none;'>&nbsp;</div>","gi");
b=b.replace(c,"");
return b;
}};
Telerik.Web.UI.Editor.MozillaKeepStylesString.registerClass("Telerik.Web.UI.Editor.MozillaKeepStylesString",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozillaKeepStylesDom=function(){Telerik.Web.UI.Editor.MozillaKeepStylesDom.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="MozillaKeepStylesDom";
this.Description="This filter remembers the positions of link tags in the html content(part 2).";
this._divs=[];
};
Telerik.Web.UI.Editor.MozillaKeepStylesDom.prototype={getHtmlContent:function(a){var e=a.getElementsByTagName("HEAD")[0];
var g=true;
if(!e){e=a.ownerDocument.getElementsByTagName("HEAD")[0];
g=false;
}if(!e){return a;
}this._restoreElements(e,a,"STYLE");
this._restoreElements(e,a,"LINK");
var f=a.getElementsByTagName("DIV");
if(f){for(var b=f.length-1;
b>=0;
b--){var d=f[b];
if(d.id.indexOf("RadEditorStyleKeeper")==0){var c=d.parentNode;
c.removeChild(d);
}}}f=null;
if(g){this._removeElements(e,"STYLE");
this._removeElements(e,"LINK");
}this._removeMarkerAttributes(a,"STYLE");
this._removeMarkerAttributes(a,"LINK");
return a;
},_restoreElements:function(a,d,b){var c;
c=a.getElementsByTagName(b);
this._divs=d.getElementsByTagName("DIV");
var e=0;
while(c.length>0&&e<c.length){this._restoreStyle(c[e++]);
}},_restoreStyle:function(d){var c=d.getAttribute("reoriginalpositionmarker");
if(c){j=0;
var b=null;
while(j<this._divs.length&&!b){if(this._divs[j].id==c){b=this._divs[j];
}j++;
}if(b){var a=d.cloneNode(true);
a.removeAttribute("reoriginalpositionmarker");
var e=b.parentNode;
e.replaceChild(a,b);
return true;
}}return false;
},_removeElements:function(d,c){var a=d.getElementsByTagName(c);
if(a){for(var b=a.length-1;
b>=0;
b--){var f=a[b];
if(null!=f.getAttribute("reoriginalpositionmarker")){var e=f.parentNode;
e.removeChild(f);
}}a=null;
}},_removeMarkerAttributes:function(c,b){var d=c.getElementsByTagName(b);
if(d){for(var a=d.length-1;
a>=0;
a--){d[a].removeAttribute("reoriginalpositionmarker");
}}d=null;
}};
Telerik.Web.UI.Editor.MozillaKeepStylesDom.registerClass("Telerik.Web.UI.Editor.MozillaKeepStylesDom",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MozillaKeepFlash=function(a){Telerik.Web.UI.Editor.MozillaKeepFlash.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="MozillaKeepFlash";
this.Description="This filter replaces the flash/media objects with static images in design mode.";
this._flashImageSrc=a?a:"FlashManager.gif";
};
Telerik.Web.UI.Editor.MozillaKeepFlash.prototype={_saveFlashObject:function(e){var d=e.ownerDocument.createElement("img");
d.setAttribute("isflash","true");
d.setAttribute("src",this._flashImageSrc);
d.setAttribute("alt","");
var c=e.getAttribute("width",2);
if(c){d.setAttribute("width",c);
}var b=e.getAttribute("height",2);
if(b){d.setAttribute("height",b);
}var f=$telerik.getOuterHtml(e);
f=f.replace(/\n/gi,"<flashcr />").replace(/\r/gi,"<flashlf />");
d.setAttribute("originalCode",Telerik.Web.UI.Editor.Utils.encodePostbackContent(f));
var a=e.parentNode;
a.insertBefore(d,e);
a.removeChild(e);
e=null;
},_restoreFlashObject:function(g){var c=Telerik.Web.UI.Editor.Utils.decodePostbackContent(g.getAttribute("originalCode"));
c=c.replace(/\<flashcr\s*\/\>/gi,"\n").replace(/\<flashlf\s*\/\>/gi,"\r");
var e=g.ownerDocument.createElement("div");
e.innerHTML=c;
var f=e.firstChild;
var d=g.getAttribute("width",2);
if(d){f.setAttribute("width",d);
}var b=g.getAttribute("height",2);
if(b){f.setAttribute("height",b);
}var a=g.parentNode;
a.insertBefore(f,g);
a.removeChild(g);
g=null;
},getDesignContent:function(d){var b;
var c=d.getElementsByTagName("object");
for(b=0;
b<c.length;
b++){var a=c[b];
this._saveFlashObject(a);
b--;
}c=d.getElementsByTagName("embed");
for(b=0;
b<c.length;
b++){var a=c[b];
this._saveFlashObject(a);
b--;
}return d;
},getHtmlContent:function(b){var d=b.getElementsByTagName("img");
for(var e=0;
e<d.length;
e++){var a=d[e];
var c=a.getAttribute("isflash",2);
if(c!=null){this._restoreFlashObject(a);
e--;
}}return b;
}};
Telerik.Web.UI.Editor.MozillaKeepFlash.registerClass("Telerik.Web.UI.Editor.MozillaKeepFlash",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.StripJunkFilter=function(){Telerik.Web.UI.Editor.StripJunkFilter.initializeBase(this);
this.IsDom=false;
this.Enabled=true;
this.Name="StripJunkFilter";
this.Description="This filter strips extra content, added by the Safari/Firefox browsers.";
};
Telerik.Web.UI.Editor.StripJunkFilter.prototype={getHtmlContent:function(a){var b=a;
if($telerik.isSafari){b=b.replace(new RegExp(' class="khtml-block-placeholder"',"ig"),"");
b=b.replace(new RegExp(' class="Apple-style-span"',"ig"),"");
b=b.replace(new RegExp(' class="webkit-block-placeholder"',"ig"),"");
}if($telerik.isFirefox){b=b.replace(new RegExp('\\s?<br type="_moz" \\/>',"ig")," ");
b=b.replace(new RegExp(' _moz_[a-z_]*="[^"]*"',"ig"),"");
b=b.replace(new RegExp(' type="_moz"',"ig"),"");
}return b;
}};
Telerik.Web.UI.Editor.StripJunkFilter.registerClass("Telerik.Web.UI.Editor.StripJunkFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertFontToSpanFilter=function(){Telerik.Web.UI.Editor.ConvertFontToSpanFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="ConvertFontToSpanFilter";
this.Description="This filter changes deprecated font tags to compliant span tags.";
this._fontSizesPx=["10px","13px","16px","18px","24px","32px","48px"];
this._fontSizesRevPx=[];
for(var a=0;
a<this._fontSizesPx.length;
a++){this._fontSizesRevPx[parseInt(this._fontSizesPx[a])]=a;
}};
Telerik.Web.UI.Editor.ConvertFontToSpanFilter.prototype={getHtmlContent:function(k){var h=k.ownerDocument;
var d=h.createElement("span");
var e,i,f;
var b=k.getElementsByTagName("FONT");
while(b.length>0){i=b[0];
f=i.parentNode;
e=d.cloneNode(false);
$telerik.mergeElementAttributes(i,e,false);
if(i.style.cssText&&i.style.cssText!=""){e.style.cssText=i.style.cssText;
}if(i.className){e.className=i.className;
}if(i.face){e.style.fontFamily=i.face;
if(e.getAttribute("face")!=null){e.removeAttribute("face");
}}var a=0;
if(i.style.fontSize){e.style.fontSize=i.style.fontSize;
}else{if(!isNaN(a=parseInt(i.size))&&i.size!="+0"){try{if(a<0){a=a+4;
}e.style.fontSize=this._fontSizesPx[a-1];
}catch(g){e.style.fontSize=this._fontSizesPx[3];
}if(e.getAttribute("size")!=null){e.removeAttribute("size");
}}}var c=i.getAttribute("color");
if(c){e.style.color=c;
if(e.getAttribute("color")!=null){e.removeAttribute("color");
}}if($telerik.isIE&&i.innerHTML==" "){e.innerText=i.innerHTML;
}else{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(e,i.innerHTML);
}f.replaceChild(e,i);
b=k.getElementsByTagName("FONT");
}return k;
},getDesignContent:function(h){if($telerik.isSafari2||$telerik.isSafari3){return h;
}var d=h.ownerDocument;
var e=d.createElement("font");
var b,g,c;
var a=h.getElementsByTagName("SPAN");
while(a.length>0){b=a[0];
c=b.parentNode;
g=e.cloneNode(false);
$telerik.mergeElementAttributes(b,g,false);
if(b.style.cssText&&b.style.cssText!=""){g.style.cssText=b.style.cssText;
}if(b.className){g.className=b.className;
}if(b.style.fontFamily){g.face=b.style.fontFamily;
this._removeElementStyleAttribute(g,"fontFamily");
}if(b.style.fontSize){var f=null;
if(-1!=b.style.fontSize.indexOf("px")){f=this._fontSizesRevPx[parseInt(b.style.fontSize)];
}if(typeof(f)!="undefined"&&null!=f){g.size=f+1;
this._removeElementStyleAttribute(g,"fontSize");
}}if(b.style.color){g.color=Telerik.Web.UI.Editor.Utils._rgbToHex(b.style.color);
this._removeElementStyleAttribute(g,"color");
}if($telerik.isIE&&b.innerHTML==" "){g.innerText=b.innerHTML;
}else{Telerik.Web.UI.Editor.Utils.setElementInnerHtml(g,b.innerHTML);
}c.replaceChild(g,b);
a=h.getElementsByTagName("SPAN");
}return h;
},_removeElementStyleAttribute:function(a,b){if(a.style&&a.style[b]){if(a.style.removeAttribute){a.style.removeAttribute(b);
}else{if(a.style.removeProperty){b=b.replace(/([A-Z])/g,"-$1").toLowerCase();
a.style.removeProperty(b);
}}if(a.style[b]){a.style[b]=null;
}if(a.style.cssText){}else{a.removeAttribute("style");
}}}};
Telerik.Web.UI.Editor.ConvertFontToSpanFilter.registerClass("Telerik.Web.UI.Editor.ConvertFontToSpanFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter=function(){Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="ConvertInlineStylesToAttributesFilter";
this.Description="This filter converts XHTML compliant inline style attributes to Email compliant element attributes.";
};
Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter.prototype={getHtmlContent:function(a){var b=$telerik.$.proxy;
$telerik.$("body",a).each(b(function(d,c){this.convertCSSProperty(c,"bgColor","backgroundColor");
this.convertCSSProperty(c,"background","backgroundImage");
},this));
$telerik.$("table,td",a).each(b(function(d,c){this.convertCSSProperty(c,"bgColor","backgroundColor");
this.convertCSSProperty(c,"background","backgroundImage");
this.convertCSSProperty(c,"width","width");
this.convertCSSProperty(c,"height","height");
},this));
$telerik.$("p,H1,H2,H3,H4,H5,H6,div",a).each(b(function(d,c){this.convertCSSProperty(c,"align","textAlign");
},this));
$telerik.$("img",a).each(b(function(d,c){Telerik.Web.UI.Editor.Utils.convertImgCssAlignProperty(c);
if($telerik.isIE){c.style.styleFloat="";
}else{c.style.cssFloat="";
}c.style.verticalAlign="";
this.convertCSSProperty(c,"width","width");
this.convertCSSProperty(c,"height","height");
},this));
return a;
},getDesignContent:function(a){var b=new Telerik.Web.UI.Editor.CleanAttributesFilter();
a=b.getHtmlContent(a);
a=b.getDesignContent(a);
return a;
},convertCSSProperty:function(b,c,a){Telerik.Web.UI.Editor.Utils.convertCSSProperty(b,c,a);
}};
Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter.registerClass("Telerik.Web.UI.Editor.ConvertInlineStylesToAttributesFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.CleanAttributesFilter=function(){Telerik.Web.UI.Editor.CleanAttributesFilter.initializeBase(this);
this.IsDom=true;
this.Enabled=true;
this.Name="CleanAttributesFilter";
this.Description="This filter fixes deprecated attributes to make the content XHTML compliant.";
};
Telerik.Web.UI.Editor.CleanAttributesFilter.prototype={_getElements:function(b,a){var c=b.getElementsByTagName(a);
if(!c){c=b.ownerDocument.getElementsByTagName(a);
}return c;
},getHtmlContent:function(a){var b=$telerik.$.proxy;
$telerik.$("body,table",a).each(b(function(d,c){this.convertAttribute(c,"bgColor","backgroundColor");
this.convertAttribute(c,"background","backgroundImage");
},this));
$telerik.$("p,H1,H2,H3,H4,H5,H6,div,ul,li",a).each(b(function(d,c){this.convertAttribute(c,"align","textAlign");
},this));
$telerik.$("td",a).each(b(function(d,c){this.convertAttribute(c,"bgColor","backgroundColor");
this.convertAttribute(c,"background","backgroundImage");
this.convertAttribute(c,"borderColor","borderColor");
this.convertAttribute(c,"width","width");
this.convertAttribute(c,"height","height");
this.convertAttribute(c,"noWrap","whiteSpace");
},this));
$telerik.$("img",a).each(b(function(d,e){Telerik.Web.UI.Editor.Utils.convertImgAlignAttribute(e);
var c=["marginLeft","marginRight"];
this.convertAttribute(e,"hspace",c);
c=["marginTop","marginBottom"];
this.convertAttribute(e,"vspace",c);
this.convertBorderAttribute(e);
},this));
$telerik.$("ul,ol",a).each(b(function(d,c){this.convertTypeAttribute(c);
},this));
return a;
},getDesignContent:function(a){$telerik.$("p,H1,H2,H3,H4,H5,H6,div",a).each($telerik.$.proxy(function(c,b){this.convertCSSToAttribute(b,"align","textAlign");
},this));
return a;
},convertAttribute:function(b,c,a){Telerik.Web.UI.Editor.Utils.convertAttribute(b,c,a);
b.removeAttribute(c);
},convertCSSToAttribute:function(b,c,a){Telerik.Web.UI.Editor.Utils.convertCSSProperty(b,c,a);
},convertBorderAttribute:function(a){Telerik.Web.UI.Editor.Utils.convertBorderAttribute(a);
a.removeAttribute("border");
},convertTypeAttribute:function(a){Telerik.Web.UI.Editor.Utils.convertTypeAttribute(a);
a.removeAttribute("type");
}};
Telerik.Web.UI.Editor.CleanAttributesFilter.registerClass("Telerik.Web.UI.Editor.CleanAttributesFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertToXhtmlFilter=function(){Telerik.Web.UI.Editor.ConvertToXhtmlFilter.initializeBase(this);
this._uniqueIds={};
this.Name="ConvertToXhtmlFilter";
this.Description="This filter converts the HTML from the editor content area to valid XHTML";
this.Enabled=true;
this.IsDom=true;
};
Telerik.Web.UI.Editor.ConvertToXhtmlFilter.prototype={getHtmlContent:function(a){if(!a){return"";
}this._checkTablesForSurroundingParagraphs(a);
this._removeLastBr(a);
this._markExistingParagraphs(a);
var c=new Telerik.Web.StringBuilder();
this._appendNodeXhtml(a,c);
var b=c.toString();
b=this._removeAdditionalParagraphs(b);
return b;
},_checkTablesForSurroundingParagraphs:function(a){if(!a){return;
}var c=a.getElementsByTagName("TABLE");
this._document=a.ownerDocument||a.document;
for(var b=0,d=c.length;
b<d;
b++){var e=Telerik.Web.UI.Editor.Utils.getElementParentByTag(c[b],"P");
if(e!=null){this._repairInvalidParagraphWithTable(e,c[b]);
}}},_repairInvalidParagraphWithTable:function(e,d){var b=e.parentNode;
var c=d.nextSibling;
if(c&&(c.nextSibling||c.nodeType!=3||!this.isWhitespace(c.nodeValue))){var a=this._moveTableNextSiblingsToNewParagraph(d);
b.insertBefore(a,e.nextSibling);
}b.insertBefore(d,e.nextSibling);
},_moveTableNextSiblingsToNewParagraph:function(b){var a=this._document.createElement("P");
while(b.nextSibling){a.appendChild(b.nextSibling);
}return a;
},isWhitespace:function(a){return/^\s*$/.test(a);
},_markExistingParagraphs:function(a){if(!a||!$telerik.isIE){return;
}$telerik.$("P",a).attr("_rdEditor_exists","1").each(function(b){Telerik.Web.UI.Editor.Utils.removeNonXhtmlCompliantParents(this);
});
},_removeAdditionalParagraphs:function(a){a=a.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,function(b){return(b.indexOf("_rdEditor_exists")==-1)?"":b;
});
a=a.replace(/(<p[^>]*) _rdEditor_exists=['"]1['"]([^>]*>)/ig,"$1$2");
return a;
},_removeLastBr:function(b){if(!b||$telerik.isIE){return;
}var a=(b.tagName=="HTML")?b.getElementsByTagName("BODY")[0]:b;
var c=(a.lastChild)?a.lastChild:null;
if(c&&c.tagName&&"BR"==c.tagName){Telerik.Web.UI.Editor.Utils.removeNode(c);
}},_convertAttribute:function(a){return String(a).replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;");
},_getAttributeValue:function(c,d,f){var e=c.nodeName;
var a=c.nodeValue;
if(e!="style"){if(($telerik.isIE8&&e=="complete"&&a=="complete")||($telerik.isIE8&&e=="shape"&&d.nodeName.toLowerCase()=="a"&&d[e]!=d.getAttribute(e))||($telerik.isIE8&&e.toLowerCase()=="althtml"&&d.nodeName.toLowerCase()=="object")){return;
}if($telerik.isIE&&(e=="type"||e=="value"||e=="selected")){if(!a){return;
}}else{if(!c.specified){if($telerik.isIE&&a==""&&typeof(d[e])=="string"&&d[e]!=""){a=d[e];
}else{return;
}}}if(!a){return;
}if(!isNaN(a)){a=d.getAttribute(e);
}if($telerik.isIE&&(e=="href"||e=="src")){a=d.getAttribute(e,2);
}f.append(" "+(c.expando?e:e.toLowerCase())+'="'+this._convertAttribute(a)+'"');
}else{var b=d.style.cssText;
if(b){b=this._convertRgbToHex(b);
b=this._stripBorderRepetition(b);
b=this._convertAttribute(b.toLowerCase());
b=b.replace(/(url\s*\(\s*)&quot;(.*)&quot;\s*\)/ig,"$1$2)");
f.append(' style="'+b+'"');
}}},_convertRgbToHex:function(a){if($telerik.isFirefox||$telerik.isSafari||$telerik.isIE9Mode){a=a.replace(/rgb *\( *\d+ *, *\d+ *, *\d+ *\)/gi,function(d,b,c){return Telerik.Web.UI.Editor.Utils._rgbToHex(d);
});
}return a;
},_replaceBorderRepetition:function(e,d,b){var c=e.match(d);
if(c&&c.length==4){var a=c[0].substring(c[0].indexOf(":"));
if(a==c[1].substring(c[1].indexOf(":"))&&a==c[2].substring(c[2].indexOf(":"))&&a==c[3].substring(c[3].indexOf(":"))){e=e.replace(d,"").replace(/^\s+|\s+$/g,"");
e+=b+a;
}}return e;
},_combineBorderStyles:function(f){var d=new RegExp(/border-(width|style|color):([^;]*);/gi);
var c=f.match(d);
if(c&&c.length==3){var e="border:";
var b=[];
b[0]=c[0].substring(c[0].indexOf(":")+1).trim();
b[1]=c[1].substring(c[1].indexOf(":")+1).trim();
b[2]=c[2].substring(c[2].indexOf(":")+1).trim();
if(b[0].match(/\s/)||b[1].match(/\s/)||b[2].match(/\s/)){return f;
}var a=function(g){for(var h=0;
h<3;
h++){if(c[h].indexOf(g)==0){e+=b[h]+" ";
break;
}}};
a("border-width");
a("border-style");
a("border-color");
e=e.replace(/;/g,"").replace(/currentcolor/gi,"").replace(/initial/gi,"").replace("s[s]+"," ").replace(/^\s+|\s+$/g,"");
e+=";";
f=f.replace(d,"");
f=e+f;
}return f;
},_stripBorderRepetition:function(b){if(!b){return;
}if(!b.match(/; *$/)){b+=";";
}var a=new RegExp(/border(?:-(top|bottom|left|right))-width:([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border-width");
a=new RegExp(/border(?:-(top|bottom|left|right))-style:([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border-style");
a=new RegExp(/border(?:-(top|bottom|left|right))-color:([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border-color");
a=new RegExp(/border-(top|bottom|left|right):([^;]*);/gi);
b=this._replaceBorderRepetition(b,a,"border");
b=this._combineBorderStyles(b);
return b.replace(/^\s+|\s+$/g,"");
},_canHaveChildren:function(a){switch(a.tagName.toUpperCase()){case"AREA":case"BASE":case"BASEFONT":case"COL":case"FRAME":case"HR":case"IMG":case"BR":case"INPUT":case"ISINDEX":case"LINK":case"META":case"PARAM":return false;
}return true;
},_appendElementNode:function(b,a){if(b.tagName.charAt(0)=="/"){if($telerik.isIE6&&b.nodeName=="/ABBR"){a.append("</abbr>");
}return;
}if(b.nodeName=="!"){a.append(b.text);
return;
}var d=b.nodeName;
if(b.scopeName){if(b.scopeName=="HTML"){d=d.toLowerCase();
}else{d=b.scopeName+":"+d;
}}else{d=d.toLowerCase();
}if($telerik.isFirefox&&d=="br"&&b.parentNode.nodeName.toLowerCase()=="pre"){if(b.getAttribute("_moz_dirty")==""){a.append("\r\n");
return;
}}var o=b.tagName=="P"&&null!=Telerik.Web.UI.Editor.Utils.getElementParentByTag(b.parentNode,"P");
if(o){a.append("</p>");
}if(d){a.append("<"+d);
}if("img"==d){if($telerik.isIE6||$telerik.isIE7){var p=document.createElement("img");
p.mergeAttributes(b);
if(p.width){a.append(' width="'+b.getAttribute("width",2)+'"');
}if(p.height){a.append(' height="'+b.getAttribute("height",2)+'"');
}}if(!b.getAttribute("alt",2)){a.append(' alt=""');
}}if($telerik.isIE&&("area"==d||"a"==d)){if(b.shape&&d=="area"&&!document.documentMode){a.append(' shape="'+b.shape.toLowerCase()+'"');
}if(b.coords&&d=="area"&&!document.documentMode){a.append(' coords="'+b.getAttribute("coords")+'"');
}var e=b.getAttribute("href",2);
if(e){e=e.replace("about:blank","");
e=e.replace("about:","");
e=e.replace(/&amp;/gi,"&").replace(/&/gi,"&amp;");
a.append(' href="'+e+'"');
b.removeAttribute("href",0);
}}if($telerik.isIE8&&"option"==d&&b.selected){a.append(' selected="selected"');
}try{var f=b.attributes;
var k=f.length;
for(var h=0;
h<k;
h++){this._getAttributeValue(f[h],b,a);
}}catch(m){if($telerik.isIE&&m.message.indexOf("Not enough storage is available to complete this operation")!=-1){var c=b.outerHTML.replace(/^\s+/gi,"");
c=c.replace(/^([^\s]+)([^>]+?)>[\s\S]+$/gi,"$2");
a.append(c);
}}switch(d){case"script":a.append(">"+b.text+"</"+d+">");
break;
case"textarea":a.append(">"+b.value+"</"+d+">");
break;
case"iframe":var g=b.innerHTML;
if($telerik.isIE){g=g.replace(/\soriginalAttribute="[^"]+"/gi,"");
g=g.replace(/\soriginalPath="[^"]+"/gi,"");
}if($telerik.isFirefox){g=g.replace(/\&amp;/g,"&").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&quot;/g,'"');
}a.append(">"+g+"</iframe>");
break;
case"object":a.append(">");
var q="";
if(b.altHtml){q=b.altHtml;
}else{q=b.innerHTML;
}if($telerik.isIE){q=q.replace(/\soriginalAttribute="[^"]+"/gi,"");
q=q.replace(/\soriginalPath="[^"]+"/gi,"");
}a.append(q);
a.append("</object>");
break;
case"title":case"style":case"comment":case"noscript":var q=b.innerHTML;
if($telerik.isIE&&q.length==0){q=b.ownerDocument.title;
}a.append(">"+q+"</"+d+">");
break;
default:if(!($telerik.isIE9Mode&&(d=="br"||d=="img"||d=="hr"))&&(b.hasChildNodes()||(true==b.canHaveChildren||(b.canHaveChildren==null&&this._canHaveChildren(b))))){if(d){a.append(">");
}var n=b.childNodes;
k=n.length;
for(var h=0;
h<k;
h++){this._appendNodeXhtml(n[h],a);
}if(d){a.append("</"+d+">");
}if(o){a.append("<p>");
}}else{if($telerik.isIE6&&d=="abbr"){a.append(">");
}else{if(d){a.append(" />");
}}}break;
}},_appendTextNode:function(b,c){var a=String(b.nodeValue);
var d=b.parentNode.nodeName.toLowerCase();
if(!$telerik.isIE&&(d=="style"||d=="script")){c.append(a);
}else{a=a.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
a=a.replace(/[\u00a0]/g,"&nbsp;");
c.append(a);
}},_appendCDataNode:function(a,b){b.append("<![CDATA[\n"+a.nodeValue+"\n]]>");
},_appendCommentNode:function(c,d){var a="";
try{a=c.nodeValue;
}catch(b){}if(!a&&c.text){a=c.text;
}else{a="<!--"+a+"-->";
}d.append(a);
},_appendNodeXhtml:function(a,b){if(a.uniqueID){if(this._uniqueIds[a.uniqueID]){return;
}else{this._uniqueIds[a.uniqueID]=true;
}}switch(a.nodeType){case 1:this._appendElementNode(a,b);
break;
case 3:this._appendTextNode(a,b);
break;
case 4:this._appendCDataNode(a,b);
break;
case 8:this._appendCommentNode(a,b);
break;
}}};
Telerik.Web.UI.Editor.ConvertToXhtmlFilter.registerClass("Telerik.Web.UI.Editor.ConvertToXhtmlFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.IndentHTMLContentFilter=function(){Telerik.Web.UI.Editor.IndentHTMLContentFilter.initializeBase(this);
this.Name="IndentHTMLContentFilter";
this.Description="This filter indents the HTML content so it is more readable when you view the code";
this.Enabled=true;
this.IsDom=false;
this._indentPattern="    ";
this._protectedData=null;
var c="P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DL|DT|DD|TITLE|META|LINK|BASE|SCRIPT|LINK|TD|TH|AREA|OPTION";
var a="HTML|HEAD|BODY|STYLE|FORM|TABLE|TBODY|THEAD|TR";
var b=a+"|DL|UL|OL";
this._ignoreTags=new RegExp("(<PRE[^>]*>|<!--|<SCRIPT[^>]*>)([\\s\\S]*?)(<\\/PRE>|-->|<\\/SCRIPT>)","gi");
this._tagsNLBefore=new RegExp("<("+c+")[^>]*>","gi");
this._tagsNLAfter=new RegExp("<\\/("+c+")[^>]*>","gi");
this._tagsNLNoCloseAfter=new RegExp("<(BR|HR)[^>]*\\/?>","gi");
this._tagsNLBeforeAndAfter=new RegExp("<\\/?("+a+")[^>]*>","gi");
this._tagsIncIndent=new RegExp("^<("+b+")[\\s\\/>]","i");
this._tagsDecIndent=new RegExp("^<\\/("+b+")[\\s\\>]","i");
this._shrinkNL=new RegExp("\\s*\\n+\\s*","gi");
};
Telerik.Web.UI.Editor.IndentHTMLContentFilter.prototype={getHtmlContent:function(e){var b=e.trim();
if(b.match(/^\s*<body/i)){b=b.substring(b.indexOf(">")+1,b.length-7);
}this._protectedData=[];
var c=this;
var m=function(o,p,q,i,r,s){Array.add(c._protectedData,q);
return p+"RADEDITORFORMATTED_"+c._protectedData.length+i;
};
b=b.replace(this._ignoreTags,m);
var d="$&";
if($telerik.isSafari2){d="$0";
}b=b.replace(this._tagsNLBefore,"\n"+d);
b=b.replace(this._tagsNLAfter,d+"\n");
b=b.replace(this._tagsNLNoCloseAfter,d+"\n");
b=b.replace(this._tagsNLBeforeAndAfter,"\n"+d+"\n");
var g=b.split(this._shrinkNL);
var n=new Telerik.Web.StringBuilder();
var l="";
for(var a=0;
a<g.length;
a++){var f=g[a];
if(f.length==0){continue;
}if(this._tagsDecIndent.test(f)){if(l.length>this._indentPattern.length){l=l.substring(this._indentPattern.length);
}else{l="";
}}n.append(l);
n.append(f);
n.append("\n");
if(this._tagsIncIndent.test(f)){l+=this._indentPattern;
}}b=n.toString();
for(var a=0;
a<this._protectedData.length;
a++){var h=new RegExp("RADEDITORFORMATTED_"+(a+1));
var k=this._protectedData[a].replace(/\$/gi,"$$$$");
b=b.replace(h,k);
}return b;
}};
Telerik.Web.UI.Editor.IndentHTMLContentFilter.registerClass("Telerik.Web.UI.Editor.IndentHTMLContentFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.MakeUrlsAbsolute=function(){Telerik.Web.UI.Editor.MakeUrlsAbsolute.initializeBase(this);
this.Name="MakeUrlsAbsolute";
this.Description="This filter makes all src and href attributes in the editor content have absolute URLs";
this.Enabled=true;
this.IsDom=true;
};
Telerik.Web.UI.Editor.MakeUrlsAbsolute.prototype={getHtmlContent:function(d){this._updateElements(d,"A","href");
this._updateElements(d,"AREA","href");
this._updateElements(d,"IMG","src");
this._updateElements(d,"EMBED","src");
var b=new Telerik.Web.UI.Editor.IECleanAnchorsFilter();
if(d.tagName=="HTML"){var c=(typeof(d.ownerDocument)!="undefined")?d.ownerDocument:d.document;
c.body.innerHTML=b.getHtmlContent(c.body.innerHTML);
}else{var a=b.getHtmlContent(d.innerHTML);
if($telerik.isIE&&a.match(/^\s*<(script|style|!--RADEDITORSAVEDTAG_script)/i)){d.innerHTML="&nbsp;"+b.getHtmlContent(d.innerHTML);
d.removeChild(d.firstChild);
}else{d.innerHTML=a;
}}return d;
},_getElements:function(b,a){var c=b.getElementsByTagName(a);
if(!c){c=b.ownerDocument.getElementsByTagName(a);
}return c;
},_updateElements:function(a,c,f){var e=a.ownerDocument.createElement("div");
var g=this._getElements(a,c);
if(g){for(var b=0;
b<g.length;
b++){var d=g[b].getAttribute(f,2);
if("href"==f&&d){e.innerHTML='<a href="'+d.replace(/\"/gi,"%22")+'">test</a>';
if($telerik.isIE){var h=g[b].innerHTML;
}g[b].setAttribute("href",e.childNodes[0].href);
if($telerik.isIE){if((h.indexOf("www.")==0&&g[b].innerHTML.match("[a-z]+://"))||(h.indexOf("mailto:")==-1&&g[b].innerHTML.match("mailto:"))){g[b].innerHTML=h;
}}}else{if("src"==f&&d){e.innerHTML='<img src="'+d.replace(/\"/gi,"%22")+'" />';
g[b].setAttribute("src",e.childNodes[0].src);
}}}}e.innerHTML="";
e=null;
}};
Telerik.Web.UI.Editor.MakeUrlsAbsolute.registerClass("Telerik.Web.UI.Editor.MakeUrlsAbsolute",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.StripPathsFilter=function(a){Telerik.Web.UI.Editor.StripPathsFilter.initializeBase(this);
this.Name="StripPathsFilter";
this.Description="This filter strips a specific part from URLs (href, src attributes)";
this.Enabled=true;
this.IsDom=true;
this._pathsToStrip=a;
};
Telerik.Web.UI.Editor.StripPathsFilter.prototype={getHtmlContent:function(a){this._updateElements(a,"A","href");
this._updateElements(a,"AREA","href");
this._updateElements(a,"IMG","src");
this._updateElements(a,"EMBED","src");
return a;
},_getElements:function(b,a){var c=b.getElementsByTagName(a);
if(!c){c=b.ownerDocument.getElementsByTagName(a);
}return c;
},_updateElements:function(a,d,h){var m=this._getElements(a,d);
if(m){for(var b=0;
b<m.length;
b++){var c=m[b];
var e=$telerik.isIE?c.getAttribute(h,2):c[h];
if(e){var f=e.length;
for(var g=0,l=this._pathsToStrip.length;
g<l;
g++){var k=this._pathsToStrip[g];
if(k&&e.toLowerCase().indexOf(k.toLowerCase())==0){e=e.substring(k.length);
}}if(f>e.length){c.setAttribute(h,e);
}}}}}};
Telerik.Web.UI.Editor.StripPathsFilter.registerClass("Telerik.Web.UI.Editor.StripPathsFilter",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.ConvertCharactersToEntities=function(){Telerik.Web.UI.Editor.ConvertCharactersToEntities.initializeBase(this);
this.set_isDom(false);
this.set_enabled(true);
this.set_name("ConvertCharactersToEntities");
this.set_description("This filter converts reserved characters to their html entity names.");
this.entities={euro:"\u20ac",cent:"\u00a2",pound:"\u00a3",yen:"\u00a5",sect:"\u00a7",copy:"\u00a9",reg:"\u00ae",plusmn:"\u00b1",ne:"\u2260",asymp:"\u2248",le:"\u2264",ge:"\u2265",divide:"\u00f7",times:"\u00d7",iexcl:"\u00a1",curren:"\u00a4",brvbar:"\u00a6",uml:"\u00a8",ordf:"\u00aa",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lArr:"\u21d0",uArr:"\u21d1",rArr:"\u21d2",dArr:"\u21d3",hArr:"\u21d4",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a","int":"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",equiv:"\u2261",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",laquo:"\u00ab",not:"\u00ac",macr:"\u00af",deg:"\u00b0",sup2:"\u00b2",sup3:"\u00b3",acute:"\u00b4",micro:"\u00b5",para:"\u00b6",middot:"\u00b7",cedil:"\u00b8",sup1:"\u00b9",ordm:"\u00ba",raquo:"\u00bb",frac14:"\u00bc",frac12:"\u00bd",frac34:"\u00be",iquest:"\u00bf",Agrave:"\u00c0",Aacute:"\u00c1",Acirc:"\u00c2",Atilde:"\u00c3",Auml:"\u00c4",Aring:"\u00c5",AElig:"\u00c6",Ccedil:"\u00c7",Egrave:"\u00c8",Eacute:"\u00c9",Ecirc:"\u00ca",Euml:"\u00cb",Igrave:"\u00cc",Iacute:"\u00cd",Icirc:"\u00ce",Iuml:"\u00cf",ETH:"\u00d0",Ntilde:"\u00d1",Ograve:"\u00d2",Oacute:"\u00d3",Ocirc:"\u00d4",Otilde:"\u00d5",Ouml:"\u00d6",Oslash:"\u00d8",Ugrave:"\u00d9",Uacute:"\u00da",Ucirc:"\u00db",Uuml:"\u00dc",Yacute:"\u00dd",THORN:"\u00de",szlig:"\u00df",agrave:"\u00e0",aacute:"\u00e1",acirc:"\u00e2",atilde:"\u00e3",auml:"\u00e4",aring:"\u00e5",aelig:"\u00e6",ccedil:"\u00e7",egrave:"\u00e8",eacute:"\u00e9",ecirc:"\u00ea",euml:"\u00eb",igrave:"\u00ec",iacute:"\u00ed",icirc:"\u00ee",iuml:"\u00ef",eth:"\u00f0",ntilde:"\u00f1",ograve:"\u00f2",oacute:"\u00f3",ocirc:"\u00f4",otilde:"\u00f5",ouml:"\u00f6",oslash:"\u00f8",ugrave:"\u00f9",uacute:"\u00fa",ucirc:"\u00fb",uuml:"\u00fc",yacute:"\u00fd",thorn:"\u00fe",yuml:"\u00ff",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203e",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211c",alefsym:"\u2135",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",lang:"\u2329",rang:"\u232a",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203a"};
};
Telerik.Web.UI.Editor.ConvertCharactersToEntities.prototype={getHtmlContent:function(a){var d=this.createRegEx();
var b=this.entities;
var c=a+"";
c=c.replace(d,function(h,f,g){for(var e in b){if(b[e]==h){return"&"+e+";";
}}return h;
});
return c;
},createRegEx:function(){var c="[";
var b=this.entities;
for(var a in b){c+=b[a];
}c+="]";
return new RegExp(c,"g");
}};
Telerik.Web.UI.Editor.ConvertCharactersToEntities.registerClass("Telerik.Web.UI.Editor.ConvertCharactersToEntities",Telerik.Web.UI.Editor.Filter);
Telerik.Web.UI.Editor.PdfExportFilter=function(){Telerik.Web.UI.Editor.PdfExportFilter.initializeBase(this);
this.set_isDom(true);
this.set_enabled(true);
this.set_name("PdfExportFilter");
this.set_description("This filter fixes some pdf export issues.");
};
Telerik.Web.UI.Editor.PdfExportFilter.prototype={getHtmlContent:function(a){this.set_document(a.ownerDocument);
this.filterContent(a);
this.set_document(null);
return a;
},filterContent:function(a){var b=a.getElementsByTagName("TABLE");
for(var e=0,c=b.length;
e<c;
e++){var d=b[e];
this._forceWidthToTable(d);
this._forceColGroupToTable(d);
}},set_document:function(a){this._document=a;
},_forceWidthToTable:function(a){var b=a.getAttribute("width");
a.style.width=b||a.style.width||0;
a.removeAttribute("width");
},_forceColGroupToTable:function(c){var e=c.getElementsByTagName("colgroup");
if(e.length==0){var d=this._document.createElement("colgroup");
var b=this._getTableColCount(c);
for(var a=0;
a<b;
a++){d.appendChild(this._document.createElement("col"));
}c.insertBefore(d,c.firstChild);
}},_getTableColCount:function(c){var d=0;
if(c){if(c.rows.length>0){var f=c.rows[0].cells;
for(var b=0,e=f.length;
b<e;
b++){var a=f[b].getAttribute("colSpan")||1;
d+=parseInt(a);
}}}return d;
}};
Telerik.Web.UI.Editor.PdfExportFilter.registerClass("Telerik.Web.UI.Editor.PdfExportFilter",Telerik.Web.UI.Editor.Filter);
$telerik.toEditorFiltersManager=function(a){return a;
};
$telerik.findEditorFiltersManager=$find;
Telerik.Web.UI.Editor.FiltersManager=function(){Telerik.Web.UI.Editor.FiltersManager.initializeBase(this);
this._filters=[];
this._enableXhtmlFilter=true;
this._convertToXhtmlFilter=new Telerik.Web.UI.Editor.ConvertToXhtmlFilter();
};
Telerik.Web.UI.Editor.FiltersManager.prototype={clear:function(){Array.clear(this._filters);
},get_enableXhtmlFilter:function(){return this._enableXhtmlFilter;
},set_enableXhtmlFilter:function(a){this._enableXhtmlFilter=a;
},add:function(a){Array.add(this._filters,a);
},addAt:function(b,a){Array.insert(this._filters,a,b);
},remove:function(a){Array.remove(this._filters,a);
},removeAt:function(a){Array.removeAt(this._filters,a);
},getFilterAt:function(a){return this._filters[a];
},getFilterByName:function(c){for(var a=0;
a<this._filters.length;
a++){var b=this._filters[a];
if(b&&c==b.get_name()){return b;
}}},getDesignContent:function(c){var b=c;
for(var e=0;
e<this._filters.length;
e++){var d=this._filters[e];
if((!d.get_isDom())&&(false!=d.get_enabled())&&d.getDesignContent){try{b=d.getDesignContent(b);
}catch(a){alert("Error while executing filter "+d.get_name()+" - "+a.toString());
}}}return b;
},getDesignContentDom:function(d){for(var b=0;
b<this._filters.length;
b++){var a=this._filters[b];
if((a.get_isDom())&&(false!=a.get_enabled())&&a.getDesignContent){try{d=a.getDesignContent(d);
}catch(c){alert("Error while executing filter "+a.get_name()+" - "+c.toString());
}}}return d;
},getHtmlContent:function(a){for(var b=0;
b<this._filters.length;
b++){var e=this._filters[b];
if((e.get_isDom())&&(false!=e.get_enabled())&&e.getHtmlContent){try{a=e.getHtmlContent(a);
}catch(c){alert("Error while executing filter "+e.get_name()+" - "+c.toString());
}}}var d;
if(this.get_enableXhtmlFilter()){try{d=this._convertToXhtmlFilter.getHtmlContent(a);
}catch(c){alert("Error while executing filter XHTML - "+c.toString());
}}else{d=$telerik.getOuterHtml(a);
}d=d.replace(/<body\s*\/>/i,"<body></body>").trim();
for(var b=0;
b<this._filters.length;
b++){var e=this._filters[b];
if((!e.get_isDom())&&(false!=e.get_enabled())&&e.getHtmlContent){try{d=e.getHtmlContent(d);
}catch(c){alert("Error while executing filter "+e.get_name()+" - "+c.toString());
}}}return d;
}};
Telerik.Web.UI.Editor.FiltersManager.registerClass("Telerik.Web.UI.Editor.FiltersManager",Sys.Component);
Type.registerNamespace("Telerik.Web.UI.Editor");
Telerik.Web.UI.Editor.RestorePoint=function(a,b){this.Window=a;
this.Document=a.document;
this.container=(b)?b:this.Document.body;
this.update();
this.Update=this.update;
this.Restore=this.restore;
this.Select=this.select;
};
if($telerik.isIE){Telerik.Web.UI.Editor.RestorePoint.prototype={update:function(){try{this.HtmlText=this.container.innerHTML;
var b=this.Document.selection.createRange();
if(b.length){this.SourceIndex=b.item(0).sourceIndex;
}else{this.oldRange=b;
this.parentElement=b.parentElement();
this.StartBookmark=b.getBookmark();
}}catch(a){}},restore:function(a){Telerik.Web.UI.Editor.Utils.setElementInnerHtml(this.container,this.HtmlText);
this.select(a);
},select:function(b){if(null!=this.SourceIndex){try{var a=this.Document.body.createControlRange();
a.addElement(this.Document.all(this.SourceIndex));
a.select();
}catch(d){}}else{if(null!=this.StartBookmark){var c=(this.parentElement&&this.parentElement.tagName=="TD");
if(Telerik.Web.UI.Editor.Utils.isEditorContentArea(this.container)||c){var a=this.Document.body.createTextRange();
if(this.useOldRange&&c){a=this.oldRange;
}else{a.moveToBookmark(this.StartBookmark);
}try{a.select();
if(true==b&&a.collapse){a.collapse();
}}catch(d){}}}}}};
}else{Telerik.Web.UI.Editor.RestorePoint.prototype={restore:function(){try{this.container.innerHTML=this.HtmlText;
this.select();
}catch(a){}},select:function(){try{this.Window.focus();
this._moveToBookmark(this.Window.getSelection(),this.Bookmark);
}catch(a){}},update:function(){try{this.HtmlText=this.container.innerHTML;
this.Bookmark=this._bookmarkSelection(this.Window.getSelection());
}catch(a){}},_bookmarkSelection:function(a){if(a){return{anchorNodeBookmark:new Telerik.Web.UI.Editor.SelectionBookmark(this.Window,a.anchorNode),anchorOffset:a.anchorOffset,focusNodeBookmark:new Telerik.Web.UI.Editor.SelectionBookmark(this.Window,a.focusNode),focusOffset:a.focusOffset,isCollapsed:a.isCollapsed};
}else{return{};
}},_moveToBookmark:function(b,a){var d=a.anchorNodeBookmark.select();
var c=a.focusNodeBookmark.select();
b.collapse(d,a.anchorOffset);
if(!a.isCollapsed){b.extend(c,a.focusOffset);
}}};
}Telerik.Web.UI.Editor.RestorePoint.registerClass("Telerik.Web.UI.Editor.RestorePoint",null);
Telerik.Web.UI.Editor.SelectionBookmark=function(b,a){this.Window=b;
this.NodePath=this._findNodePath(this.Window.document.documentElement,a);
};
Telerik.Web.UI.Editor.SelectionBookmark.prototype={select:function(){var a=this._findNode(this.Window.document.documentElement,this.NodePath);
try{Telerik.Web.UI.Editor.Utils.selectElement(this.Window,a);
}catch(b){}return a;
},_findNodePath:function(b,d){var e,a;
for(var c=0;
c<b.childNodes.length;
c++){e=b.childNodes[c];
a=this._findNodePath(e,d);
if(""!=a){return""+c+","+a;
}if(e==d){return""+c;
}}return"";
},_findNode:function(a,c){var d=c.split(",");
for(var b=0;
b<d.length;
b++){a=a.childNodes[d[b]];
}return a;
}};
Telerik.Web.UI.Editor.SelectionBookmark.registerClass("Telerik.Web.UI.Editor.SelectionBookmark",null);
Type.registerNamespace("Telerik.Web.UI.Editor");
$telerik.toEditorSelection=function(a){return a;
};
$telerik.findEditorSelection=$find;
Telerik.Web.UI.Editor.Selection=function(a){this._window=a;
this.isSafari=$telerik.isSafari;
this.isOpera=$telerik.isOpera;
this.GetRange=this.getRange;
this.GetParentElement=this.getParentElement;
this.IsControl=this.isControl;
this.GetText=this.getText;
this.GetHtmlText=this.getHtml;
this.PasteHtml=this.pasteHtml;
this.Collapse=this.collapse;
};
Telerik.Web.UI.Editor.Selection.prototype={selectElement:function(a){return Telerik.Web.UI.Editor.Utils.selectElement(this._window,a);
},pasteHtml:function(a,b){b=(b==true);
if($telerik.isIE){return this._executeIE(a,b);
}else{return this._executeMozilla(a,b);
}},_executeIE:function(h,o){var g=window.document;
var d=this._window.document;
var m=(g===d)?Telerik.Web.UI.EditorContentAreaMode.Div:Telerik.Web.UI.EditorContentAreaMode.Iframe;
if(m!=Telerik.Web.UI.EditorContentAreaMode.Div){if(d.body.childNodes.length!=1){d.body.setActive();
}}var c=d.selection;
var n=c.createRange();
if(c.type=="Control"){var s=n.item(0);
if(s&&s.tagName!="BODY"){c.empty();
n=c.createRange();
n.moveToElementText(s);
var p=s.parentNode;
if($telerik.isIE9Mode){var q=p.childNodes;
for(var j=0,f=q.length;
j<f;
j++){var a=q[j];
if(a.nodeType==3){a.nodeValue=a.nodeValue.replace(/^(\n|\t)+/g,"");
}}}p.removeChild(s);
}}if(c.type.toLowerCase()!="none"){var b=(d.body.innerHTML.trim()==this.getHtml().trim());
d.execCommand("Delete");
if(b){d.body.innerHTML="";
}if(n.htmlText=="&nbsp;"){n.collapse(true);
}}if(n.length){var s=n.item(0);
if(s&&s.tagName=="BODY"){var e=e.getElementsByTagName("FORM")[0];
if(e){Telerik.Web.UI.Editor.Utils.setElementInnerHtml(e,e.innerHTML+h);
}}n=c.createRange();
}var k=n.duplicate();
k.collapse(true);
n.collapse(false);
h=Telerik.Web.UI.Editor.Utils.getStoredOriginalPathsAndAttributes(h);
if($telerik.isIE9Mode){h=h.replace(/(\n|\t|\r)+/g," ").replace(/ +/g," ");
}n.pasteHTML(h);
var r=n.parentElement();
if(r.tagName!="BODY"){r=r.parentNode;
}Telerik.Web.UI.Editor.Utils.restoreOriginalPathsAndAttributes(r);
if(o){k.setEndPoint("EndToEnd",n);
k.select();
}return true;
},_executeMozilla:function(i,h){var d=this._window.document;
var f=d.createElement("span");
f.innerHTML=i;
if(this.isSafari||this.isOpera){var c="radetempnode";
f.setAttribute("id",c);
if(this.isSafari){h=true;
}this._insertNodeAtSelection(this._window,f,h);
var b=d.createRange();
var a=this._window.getSelection();
var e=d.getElementById(c);
b.selectNodeContents(e);
var g=b.extractContents();
b.selectNode(e);
b.extractContents();
b.insertNode(g);
a.addRange(b);
if(this.isSafari){a.collapseToEnd();
}}else{var b=d.createRange();
b.selectNodeContents(f);
var g=b.extractContents();
if(g.childNodes.length==1){g=g.childNodes[0];
}this._insertNodeAtSelection(this._window,g,h);
}return true;
},_insertNodeAtSelection:function(d,t,o){var f=d.getSelection();
if(f.rangeCount==0){d.document.body.appendChild(t);
return;
}var h=null;
if(f.getRangeAt){h=f.getRangeAt(0);
}else{h=d.document.createRange();
h.setStart(f.anchorNode,f.anchorOffset);
h.setEnd(f.focusNode,f.focusOffset);
}if(f.removeAllRanges){f.removeAllRanges();
}h.deleteContents();
var q=$telerik.isSafari2?f.baseNode:h.startContainer;
var u=$telerik.isSafari2?f.baseOffset:h.startOffset;
var n=q.previousSibling;
if($telerik.isSafari&&null==q){q=d.document.body;
}h=d.document.createRange();
if((t.nodeType==3)&&(q.nodeType==3)){q.insertData(u,t.nodeValue);
h.setEnd(q,u+t.length);
if(o){h.setStart(q,u);
}else{h.setStart(q,u+t.length);
}}else{var k;
var m=null;
if(q.nodeType==3){var w=q;
q=w.parentNode;
var a=w.nodeValue;
var e=a.substr(0,u);
var b=a.substr(u);
var s=d.document.createTextNode(e);
k=d.document.createTextNode(b);
var g=false;
if($telerik.isFirefox&&t.nodeType!=1){var v=t.childNodes;
var c=v.length;
for(var j=0;
j<c;
j++){if(v[j].nodeType!=3){g=true;
break;
}}}q.insertBefore(k,w);
q.insertBefore(t,k);
try{q.insertBefore(s,t);
}catch(p){}q.removeChild(w);
if($telerik.isFirefox&&g){var r=document.createTextNode(e);
if(n){q.insertBefore(r,n.nextSibling);
}else{q.insertBefore(r,q.childNodes[0]);
}}}else{if(q.childNodes.length>0){k=q.childNodes[u];
q.insertBefore(t,k);
}else{q.appendChild(t);
}}if(q.tagName=="BODY"&&!k){var v=q.childNodes;
m=v[v.length-1];
}try{if(o){h.setStart(t,0);
h.setEnd(k,0);
}else{if(m){h.setStartAfter(m);
h.setStartAfter(m);
}else{h.setStartBefore(k);
h.setEndBefore(k);
}}}catch(p){}}try{f.addRange(h);
}catch(p){}},selectRange:function(c){if(!c){return;
}var b=this._window;
if(c.select){c.select();
}else{if(b.getSelection){var d=b.getSelection();
if(d.removeAllRanges){d.removeAllRanges();
d.addRange(c);
}else{var a=c.baseNode;
if(null==a){a=b.document.body;
}var e=c.extentNode;
if(null==e){e=b.document.body;
}d.setBaseAndExtent(a,c.startOffset,e,c.endOffset);
}}}},getBrowserSelection:function(){if(!this._window){return null;
}if(this._window.document.selection&&!window.opera){return this._window.document.selection;
}else{if(this._window.getSelection){return this._window.getSelection();
}}return null;
},getRange:function(){if(!this._window){return null;
}if(this._window.document.selection&&!window.opera){return this._window.document.selection.createRange();
}else{if(this._window.getSelection){var b=this._window.getSelection();
if(!b||b.rangeCount<1){return null;
}var a=null;
if(b.getRangeAt){a=b.getRangeAt(0);
}else{a=this._window.document.createRange();
a.setStart(b.anchorNode,b.anchorOffset);
a.setEnd(b.focusNode,b.focusOffset);
}return a;
}}},getParentElement:function(){var a=this.getRange();
if(!a){return null;
}if(a.commonAncestorContainer){var c=this._window.getSelection();
var e=a.startContainer?a.startContainer:c.baseNode;
var d=a.endContainer?a.endContainer:c.extentNode;
var f=a.startOffset!=null?a.startOffset:c.baseOffset;
var g=a.endOffset!=null?a.endOffset:c.extentOffset;
var b=c.anchorNode.childNodes[c.anchorOffset];
if(b&&(b.nodeName=="IMG"||(e==d&&(g-f)==1))){return b;
}else{if($telerik.isSafari){if(c.anchorNode.parentNode.tagName=="TH"||c.anchorNode.parentNode.tagName=="TD"){return c.anchorNode.parentNode;
}else{if(c.anchorNode.parentNode.tagName=="TR"){return c.anchorNode;
}}}if(!a.commonAncestorContainer.tagName){if(this._window.document==a.commonAncestorContainer&&c.baseNode){return c.baseNode.parentNode;
}return a.commonAncestorContainer.parentNode;
}else{return a.commonAncestorContainer;
}}}else{if(a.length){return a.item(0);
}else{if(a.parentElement){return a.parentElement();
}else{return null;
}}}},isControl:function(){if(this._window.document.selection){return(this._window.document.selection.type=="Control");
}else{var a=this._window.getSelection();
if(a.toString()!=""){return false;
}var b=a.focusNode;
if(!b||b.nodeType==1){return false;
}return(b.tagName=="IMG");
}},getText:function(){if(this._window.document.selection){var a=this._window.document.selection.createRange();
if(a.length){return"";
}else{if(null!=a.text){return a.text;
}}}else{if(this._window.getSelection){return this._window.getSelection().toString();
}else{return"";
}}},getHtml:function(){var d=null;
if(this._window.document.selection&&!window.opera){d=this._window.document.selection.createRange();
if(d.length){return d.item(0).outerHTML;
}else{if(d.htmlText){return d.htmlText;
}else{return"";
}}}else{if(this._window.getSelection){var b=this._window.getSelection();
if(null==b){return"";
}if(b.getRangeAt&&typeof(b.rangeCount)!="undefined"&&b.rangeCount==0){return"";
}if(b.getRangeAt){d=b.getRangeAt(0);
var a=this._window.document.createElement("div");
var c=d.cloneContents();
if(c){a.appendChild(c);
return a.innerHTML;
}else{return"";
}}else{return b;
}}else{return"";
}}},moveToElementText:function(c){if(!c){return false;
}if(this.isSafari){var b=this._window.document.createRange();
b.selectNodeContents(c);
this.selectRange(b);
this.collapse(true);
}else{if($telerik.isIE){b=this.getRange();
var a=$telerik.getLocation(c);
b.moveToPoint(a.x,a.y);
b.select();
}else{b=this.getRange();
b.selectNodeContents(c);
this.selectRange(b);
this.collapse(true);
}}},collapse:function(b){b=(b==true);
if(this._window.document.selection){var c=this._window.document.selection.createRange();
if(c.collapse){c.collapse(b);
c.select();
}}else{if(this._window.getSelection){var a=this._window.getSelection();
if(!a.isCollapsed){if(b){a.collapseToStart();
}else{a.collapseToEnd();
}}}}}};
Telerik.Web.UI.Editor.Selection.registerClass("Telerik.Web.UI.Editor.Selection",null);
Type.registerNamespace("Telerik.Web.UI");
Telerik.Web.UI.EditorShortCutManager=function(){this._shortcuts=[];
};
Telerik.Web.UI.EditorShortCutManager.prototype={addShortCut:function(b,c){var a=new Telerik.Web.UI.EditorShortCut(b,c);
a.HashValue=this._getShortCutHashValue(a);
this._shortcuts[a.HashValue]=a;
},removeShortCut:function(b){var a=this.findShortCutByName(b);
if(a){this._shortcuts[a.HashValue]=null;
}},setShortCut:function(b,a){this.removeShortCut(b);
this.addShortCut(b,a);
},isShortCutHit:function(a){return this._hitTest(a.keyCode,a.ctrlKey,(null!=a.ctrlLeft?a.ctrlLeft:a.ctrlKey),a.shiftKey,(null!=a.shiftLeft?a.shiftLeft:a.shiftKey),a.altKey,(null!=a.altLeft?a.altLeft:a.altKey));
},_hitTest:function(e,h,g,b,a,f,c){var d=this._getHashValue(e,h,g,b,a,f,c);
return this._shortcuts[d];
},_getHashValue:function(f,i,h,c,b,g,e){var a=f&65535;
var d=0;
d|=(i?(1<<0):0);
d|=(c?(1<<2):0);
d|=(g?(1<<4):0);
a|=(d<<16);
return a;
},_getShortCutHashValue:function(a){return this._getHashValue(a.KeyCode,a.CtrlKey,a.LeftCtrlKey,a.ShiftKey,a.LeftShiftKey,a.AltKey,a.LeftAltKey);
},findShortCutByName:function(c){var b;
for(var a in this._shortcuts){b=this._shortcuts[a];
if(null!=b&&b._name==c){return b;
}}return null;
}};
Telerik.Web.UI.EditorShortCut=function(b,a){this._name=b;
this._shortcutString="";
this.setShortCut(a);
};
Telerik.Web.UI.EditorShortCut.prototype={CtrlKey:false,LeftCtrlKey:false,ShiftKey:false,LeftShiftKey:false,AltKey:false,LeftAltKey:false,KeyCode:0,get_name:function(){return this._name;
},set_name:function(a){this._name=a;
},get_shortCutString:function(){return this._shortcutString;
},setShortCut:function(a){this._parseShortcutString(a);
this._shortcutString=a;
},_parseShortcutString:function(c){if("string"==typeof(c)){this.CtrlKey=false;
this.LeftCtrlKey=false;
this.ShiftKey=false;
this.LeftShiftKey=false;
this.AltKey=false;
this.LeftAltKey=false;
this.KeyCode=0;
c=c.replace(/\s*/gi,"");
c=c.replace(/\+\+/gi,"+PLUS");
var d=c.split("+");
var b="";
for(var a=0;
a<d.length;
a++){b=d[a].toUpperCase();
switch(b){case"LCTRL":this.LeftCtrlKey=true;
case"CTRL":this.CtrlKey=true;
break;
case"LSHIFT":this.LeftShiftKey=true;
case"SHIFT":this.ShiftKey=true;
break;
case"LALT":this.LeftAltKey=true;
case"ALT":this.AltKey=true;
break;
case"F1":this.KeyCode=112;
break;
case"F2":this.KeyCode=113;
break;
case"F3":this.KeyCode=114;
break;
case"F4":this.KeyCode=115;
break;
case"F5":this.KeyCode=116;
break;
case"F6":this.KeyCode=117;
break;
case"F7":this.KeyCode=118;
break;
case"F8":this.KeyCode=119;
break;
case"F9":this.KeyCode=120;
break;
case"F10":this.KeyCode=121;
break;
case"F11":this.KeyCode=122;
break;
case"F12":this.KeyCode=123;
break;
case"ENTER":this.KeyCode=13;
break;
case"HOME":this.KeyCode=36;
break;
case"END":this.KeyCode=35;
break;
case"LEFT":this.KeyCode=37;
break;
case"RIGHT":this.KeyCode=39;
break;
case"UP":this.KeyCode=38;
break;
case"DOWN":this.KeyCode=40;
break;
case"PAGEUP":this.KeyCode=33;
break;
case"PAGEDOWN":this.KeyCode=34;
break;
case"SPACE":this.KeyCode=32;
break;
case"TAB":this.KeyCode=9;
break;
case"BACK":this.KeyCode=8;
break;
case"CONTEXT":this.KeyCode=93;
break;
case"ESCAPE":case"ESC":this.KeyCode=27;
break;
case"DELETE":case"DEL":this.KeyCode=46;
break;
case"INSERT":case"INS":this.KeyCode=45;
break;
case"PLUS":this.KeyCode="+".charCodeAt(0);
break;
default:this.KeyCode=b.charCodeAt(0);
break;
}}}else{throw {description:"Invalid shortcut string"};
}}};
Type.registerNamespace("Telerik.Web.UI");
Telerik.Web.UI._localization=function(){this._controls={};
};
Telerik.Web.UI._localization.prototype={merge:function(b,e,c){if(typeof(this._controls[b])=="undefined"){this._controls[b]={};
}if(typeof(this._controls[b][e])=="undefined"){this._controls[b][e]={};
}var a=this._controls[b][e];
for(var d in c){if(typeof(c[d])=="string"){a[d]=c[d];
}}return a;
}};
Telerik.Web.UI._localization.registerClass("Telerik.Web.UI._localization");
Telerik.Web.UI.Localization=new Telerik.Web.UI._localization();
Type.registerNamespace("Telerik.Web.UI");
$telerik.toEditor=function(a){return a;
};
$telerik.findEditor=$find;
(function(){var b=$telerik.$;
var a=Telerik.Web.UI;
a.RadEditor=function(c){a.RadEditor.initializeBase(this,[c]);
this._bottomResizer=null;
this._tableElement=null;
this._contentAreaElement=null;
this._contentHiddenTextarea=null;
this._doctypeString=null;
this._originalHeight=null;
this._accessKeyTextbox=null;
this._mode=a.EditModes.Design;
this._divContentAreaInitialized=false;
this._accEditor=null;
this._shortCutManager=new a.EditorShortCutManager();
this._filtersManager=new a.Editor.FiltersManager();
this._commandsManager=new a.Editor.CommandsManager();
if(null!=a.Editor.ModulesManager){this._modulesManager=new a.Editor.ModulesManager(this);
}this._resizeExtender=null;
this._localization={};
this._contentAreaEventHandlers={};
this._onToolClickDelegate=null;
this._onWindowResizeDelegate=null;
this._saveContentDelegate=null;
this.isIE=$telerik.isIE;
this.isFirefox=$telerik.isFirefox;
this.isOpera=$telerik.isOpera;
this.isIE7=$telerik.isIE7;
this._spellCheckService=null;
};
a.RadEditor.createNew=function(c){var d=new a.RadEditor(document.createElement("div"));
if(!c){d.get_contentAreaElement();
}else{d._contentAreaElement=c;
}d._contentHiddenTextarea=document.createElement("input");
d._setContentAreaHtml("",true);
d.set_editable(true);
d._ieHookToClientArea();
d._addDefaultShortCuts();
d.removeShortCut("ToggleScreenMode");
d.removeShortCut("LinkManager");
d.removeShortCut("ImageManager");
d.removeShortCut("SetToolFocus");
return d;
};
a.RadEditor.prototype={get_ajaxSpellCheck:function(){return this._ajaxSpellCheck;
},set_ajaxSpellCheck:function(c){this._ajaxSpellCheck=c;
this.raiseEvent("spellCheckLoaded");
},get_spellCheckService:function(){if(!this._spellCheckService){this._spellCheckService=$create(a.SpellCheckService,this.get_spellCheckJSON(),null,null);
this._spellCheckService.add_complete(Function.createDelegate(this,this._responseReceived));
}return this._spellCheckService;
},startSpellCheck:function(){this.get_spellCheckService().spellCheck(this.get_html());
},addCustomWord:function(c){this.get_spellCheckService().addCustomWord(c);
},_responseReceived:function(c,d){},raiseEvent:function(c,d){if(c!="selectionChange"||this.get_mode()==a.EditModes.Design){a.RadEditor.callBaseMethod(this,"raiseEvent",[c,d]);
}},_initializeToolProvider:function(){var d=this;
var e=d.get_toolProviderID();
if(e&&$find(e)){var m=$find(e);
var g=m.get_dialogOpener();
d.set_dialogOpener(g);
var l=m.get_contextMenusJSON();
if(l&&l.concat){d.set_contextMenusJSON(l.concat([]));
}var j=m.get_modulesJSON();
if(j&&j.concat){d.set_modulesJSON(j.concat([]));
}var h=this.get_toolContainer();
h.innerHTML="";
this.set_toolJSON([]);
var c=m.get_toolHTML();
h.innerHTML=c;
var k=m.get_toolJSON().concat([]);
this.set_toolJSON(k);
if(m.get_spellCheckJSON){d.set_spellCheckJSON(m.get_spellCheckJSON());
}if(m.get_ajaxSpellCheckScriptReference){var f=m.get_ajaxSpellCheckScriptReference();
if(f){d.set_ajaxSpellCheckScriptReference(f);
}}this.set_links(m.get_links());
this.set_colors(m.get_colors());
this.set_fontNames(m.get_fontNames());
this.set_fontSizes(m.get_fontSizes());
this.set_symbols(m.get_symbols());
this.set_realFontSizes(m.get_realFontSizes());
this.set_snippets(m.get_snippets());
this.set_cssClasses(m.get_cssClasses());
this.set_cssFiles(m.get_cssFiles());
this.set_languages(m.get_languages());
this.set_paragraphs(m.get_paragraphs());
}},get_toolHTML:function(){var c=this.get_toolContainer().cloneNode(true);
return c.innerHTML;
},get_toolContainer:function(){return this.get_TopZone().firstChild;
},get_mainTable:function(){return $get(this.get_id()+"Wrapper");
},_ieHookToClientArea:function(){var c=this;
window.setTimeout(function(){if($telerik.isIE){var h=c.get_contentArea();
if(!h){return;
}try{var d=a.Editor.Utils.storeBrowserPosition();
var f=document.body.createTextRange();
if(d&&d.y>0){f.moveToElementText(c.get_contentAreaElement());
}else{f.moveStart("textedit",f.text.length);
}f.collapse(true);
f.select();
if(d&&d.y>0){a.Editor.Utils.restoreBrowserPosition();
}}catch(g){}}},0);
},initialize:function(){a.RadEditor.callBaseMethod(this,"initialize");
this.raiseEvent("init",Sys.EventArgs.Empty);
this._initializeToolProvider();
var d=this.get_mainTable();
this._originalHeight=d.style.height;
this._initializeLocalization();
this._addFilters();
this._addDefaultShortCuts();
this._createUI();
var e=this.isVisible();
if(e){this._fixMoreSizeIssues();
}d=$get(this.get_id()+"_BottomTable");
if(d){d.style.display="";
}this._createTools();
this._makeResizeable(this.get_enableResize());
var c=$get(this.get_id()+"ContentHiddenTextarea");
if(c){this._contentHiddenTextarea=c;
}if(this.get_enableAriaSupport()){this._applyAriaSupport();
}this._setContentAreaHtml(this.get_contentHiddenTextareaValue(),true);
if(!this.get_enableUndoRedo()){this.get_contentWindow()._radEditorEnableUndoRedo=false;
}this._registerClientValidation();
this._registerPostBackHandlers();
if(!this._isEditModeEnabled(a.EditModes.Design)){if(this._isEditModeEnabled(a.EditModes.Html)){this.set_mode(a.EditModes.Html);
}else{this.set_mode(a.EditModes.Preview);
}}this._ieHookToClientArea();
this._fixIEVisibilityProblems(true);
this._fixMozillaDOMProblems(true);
if(this._modulesManager){if(!this.isIE){var g=$get(this.get_id()+"Module");
g.style.display="none";
var f=this;
window.setTimeout(function(){f._modulesManager.initialize();
g.style.display="";
if(f.isOpera||f.get_contentAreaMode()==a.EditorContentAreaMode.Div){f._updateEditorSize(f._originalHeight);
}},0);
}else{this._modulesManager.initialize();
this._updateEditorSize(this._originalHeight);
}}if(this.get_autoResizeHeight()&&e){this._makeAutoResizeHeight();
}this.set_initialContent();
this._applyAccessKey();
if(this.get_isInAccessibleMode()){this._accEditor=new a.AccessibleRadEditorBase(this);
}this.raiseEvent("load",Sys.EventArgs.Empty);
if(!$telerik.isIE&&!$telerik.isFirefox){if(!this.isVisible()){this.raiseEvent("firstShow");
}}},dispose:function(){if(this.get_isInAccessibleMode()){this._accEditor=null;
}if(typeof(Sys.WebForms)!="undefined"&&typeof(Sys.WebForms.PageRequestManager)!="undefined"&&this._saveContentDelegate){var e=Sys.WebForms.PageRequestManager.getInstance();
if(e){e.remove_initializeRequest(this._saveContentDelegate);
}e=null;
}if(this._contentHiddenTextarea&&this._contentHiddenTextarea.form&&this._saveContentDelegate){$telerik.removeExternalHandler(this._contentHiddenTextarea.form,"submit",this._saveContentDelegate);
}var c=this.get_contentAreaElement();
if(c){$clearHandlers(c);
try{c.parentNode.removeChild(c);
}catch(d){}c=null;
}try{this._detachEvents();
}catch(d){}this._fixMozillaDOMProblems(false);
this._fixIEVisibilityProblems(false);
this._makeResizeable(false);
this._onToolClickDelegate=null;
this._registerWindowResizeHandler(false);
if(this._isFullScreen){this._enableBodyScroll();
}this.set_dialogOpener(null);
this._saveContentDelegate=null;
this._registerModeChangeHandler(false);
if(this._insertLink){this._insertLink.dispose();
this._insertLink=null;
}if(this._insertImage){this._insertImage.dispose();
this._insertImage=null;
}if(this._accessKeyTextbox){$clearHandlers(this._accessKeyTextbox);
this._accessKeyTextbox.removeAttribute("accessKey");
this._accessKeyTextbox=null;
}a.RadEditor.callBaseMethod(this,"dispose");
},_applyAccessKey:function(){var d=this.get_element().getAttribute("accessKey");
if(d){this.get_element().removeAttribute("accessKey");
var c=document.createElement("input");
c.setAttribute("name",this.get_id()+"EditorAccessKey");
c.setAttribute("type","text");
c.setAttribute("id",this.get_id()+"EditorAccessKey");
c.setAttribute("accessKey",d);
this._accessKeyTextbox=c;
$addHandlers(this._accessKeyTextbox,{focus:this.setFocus},this);
var e=document.createElement("div");
e.style.width="0px";
e.style.height="0px";
e.style.overflow="hidden";
e.appendChild(this._accessKeyTextbox);
this.get_element().appendChild(e);
}},_makeAutoResizeHeight:function(){if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){this.get_element().style.height="auto";
this.get_contentArea().style.height="auto";
}else{if(this._initialContentHeight&&this._initialContentHeight>0){return;
}window.setTimeout(Function.createDelegate(this,function(){this.get_contentArea().style.overflow="hidden";
this._initialContentHeight=this.get_contentAreaElement().offsetHeight;
var c=this;
this.attachEventHandler("keydown",function(d){if(!c._isKeyUpButton(d)){c._resizeContentArea(d);
}});
this.attachEventHandler("keyup",function(d){if(c._isKeyUpButton(d)||(d.keyCode==13&&!c.isIE)){c._resizeContentArea(d);
}});
this.add_selectionChange(Function.createDelegate(this,this._resizeContentArea));
this._resizeContentArea();
}),0);
}},_isKeyUpButton:function(d){var c=d.keyCode;
if(c==8||c==46){return true;
}return false;
},_getCurrentFontSize:function(){var c=this.getSelectedElement();
var d=parseInt($telerik.getCurrentStyle(c,"fontSize"));
return d;
},_resizeContentArea:function(l){var d=this.isIE?this.get_contentArea():this.get_document().documentElement;
var j=this.get_contentAreaElement();
var g=j.parentNode;
var k=this._initialContentHeight;
var m=j.offsetHeight;
var h=d.scrollHeight+(l&&l.keyCode==13&&this.isIE?this._getCurrentFontSize():0);
if(h==m){return;
}if((k==m)&&(h<=k)){return;
}var f=(h>k)?h:k;
j.style.height=f+"px";
if(h>m){g.style.height=parseInt(h)+"px";
}else{var c=this.get_element();
var n=c.offsetHeight-(g.offsetHeight-j.offsetHeight);
if(j.style.height!="100%"){g.style.height="";
this._updateEditorSize(n);
}return;
}this._updateEditorSize(null,true);
},_makeResizeable:function(d){if(this._resizeExtender){this._resizeExtender.dispose();
this._resizeExtender=null;
}if(!d){return;
}if(!this._tableElement){return;
}if(!this._bottomResizer){this._bottomResizer=$get(this.get_id()+"BottomResizer");
}if(this._bottomResizer){if(this.isIE){this._bottomResizer.style.styleFloat="right";
}if(this.isOpera&&document.compatMode=="CSS1Compat"){this._bottomResizer.parentNode.removeChild(this._bottomResizer);
this._bottomResizer=null;
}}else{return;
}var c={se:this._bottomResizer};
this._resizeExtender=new a.ResizeExtender(this,this.get_element(),c,this._tableElement);
},_getInvisibleParent:function(){return $telerik.getInvisibleParent(this.get_element());
},isVisible:function(){return(this._getInvisibleParent()==null);
},_fixIEVisibilityProblems:function(c){if(!this.isIE){return;
}if(c){var d=this._getInvisibleParent();
if(d){this._onIEParentVisibilityChangeDelegate=Function.createDelegate(this,this._onIEParentVisibilityChange);
this._invisibleParent=d;
$telerik.addHandler(this._invisibleParent,"propertychange",this._onIEParentVisibilityChangeDelegate);
}}else{if(this._invisibleParent&&this._onIEParentVisibilityChangeDelegate){$telerik.removeHandler(this._invisibleParent,"propertychange",this._onIEParentVisibilityChangeDelegate);
this._onIEParentVisibilityChangeDelegate=null;
this._invisibleParent=null;
}}},_fixMozillaDOMProblems:function(d){if(this.isIE){return;
}if(d){var c=this._getInvisibleParent();
if(c){this._invisibleParent=c;
this._onMozillaParentVisibilityChangeDelegate=Function.createDelegate(this,this._onMozillaParentVisibilityChange);
c.addEventListener("DOMAttrModified",this._onMozillaParentVisibilityChangeDelegate,false);
}this._onMozillaParentNodeChangedDelegate=Function.createDelegate(this,this._onMozillaParentNodeChanged);
document.addEventListener("DOMNodeInserted",this._onMozillaParentNodeChangedDelegate,false);
}else{if(this._invisibleParent&&this._onMozillaParentVisibilityChangeDelegate){this._invisibleParent.removeEventListener("DOMAttrModified",this._onMozillaParentVisibilityChangeDelegate,false);
this._onMozillaParentVisibilityChangeDelegate=null;
this._invisibleParent=null;
}if(this._onMozillaParentNodeChangedDelegate){document.removeEventListener("DOMNodeInserted",this._onMozillaParentNodeChangedDelegate,false);
this._onMozillaParentNodeChangedDelegate=null;
}}},_onIEParentVisibilityChange:function(d){d=d.rawEvent;
if(!d){return;
}if(d.propertyName=="style.display"||d.propertyName=="className"){var c=$telerik.getCurrentStyle(this._invisibleParent,"display");
if(c!="none"){this.raiseEvent("firstShow");
if(this.get_autoResizeHeight()){this._makeAutoResizeHeight();
}this._updateEditorSize(this.get_element().style.height);
this._fixIEVisibilityProblems(false);
}}},_onMozillaParentVisibilityChange:function(d){if(d.attrName=="style"||d.attrName=="class"){var c=d.target;
if((d.currentTarget==d.target)&&"none"!=$telerik.getCurrentStyle(c,"display")){window.setTimeout(Function.createDelegate(this,function(){if(!this._editorFirstVisible){this._editorFirstVisible=true;
this.raiseEvent("firstShow");
}if(this.get_autoResizeHeight()){this._makeAutoResizeHeight();
}this.set_editable(true);
}),0);
}}},_onMozillaParentNodeChanged:function(c){if(!c.target||!this.get_element()){return;
}var d=$telerik.isDescendantOrSelf(c.target,this.get_element());
if(d){if($telerik.isFirefox){this.onParentNodeChanged();
}else{window.setTimeout(Function.createDelegate(this,this.onParentNodeChanged),0);
}}},onParentNodeChanged:function(){var d=this.get_html();
var e=this.get_contentAreaElement();
if(this._textIframe){this._textIframe.parentNode.removeChild(this._textIframe);
this._textIframe=null;
}var c=this.get_mode();
this.set_mode(c);
this._setContentAreaHtml(d,true);
this.set_html(d);
},onResizeStart:function(){this._resizeSelection=this.getSelection().getRange();
this._fixMoreSizeIssues();
},onResizeEnd:function(){this._updateEditorSize(this.get_element().style.height);
if(!this.isIE){return;
}this.setActive();
if(this._resizeSelection){var c=null;
if(this._resizeSelection.commonParentElement){c=this._resizeSelection.commonParentElement();
}else{if(this._resizeSelection.parentElement){c=this._resizeSelection.parentElement();
}}if(c&&(this.get_document()==c.ownerDocument)){this.getSelection().selectRange(this._resizeSelection);
}this._resizeSelection=null;
}},_initializeLocalization:function(){this._localization=a.Localization.merge("RadEditor",this.get_language().toLowerCase(),this._localization);
},getSelectedElement:function(){return this.getSelection().getParentElement();
},getSelection:function(){return new a.Editor.Selection(this.get_contentWindow());
},getSelectionHtml:function(){return this.getSelection().getHtml();
},getEditorSelectionRange:function(){var c=this.getSelection().getRange();
var d=this.getSelectedElement();
if(c!=null&&d!=null&&d.ownerDocument!=this.get_document()){c=null;
}return c;
},selectElement:function(c,d){if(a.Editor.Utils.selectElement(this.get_contentWindow(),c)&&false!=d){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},undo:function(c){this._commandsManager.undo(c);
},redo:function(c){this._commandsManager.redo(c);
},executeCommand:function(c,d,e){if(!c.get_window()){c.set_window(this.get_contentWindow());
}if(false!=d&&!this.isOpera){this.setFocus();
}this._commandsManager.execute(c,e);
},executeBrowserCommand:function(c,e,d,g){var f=this.getLocalizedString(c);
this.executeCommand(new a.Editor.BrowserCommand(f,this.get_contentWindow(),c,d,this));
this.setActive();
this.setFocus();
if(true==g){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},createElement:function(c,e,j,d,g,h){var f=this.get_document().createElement(c);
if(e){f.style.width=e;
}if(j){f.style.height=j;
}if(null!=d){f.id=d;
}if(null!=g){f.name=g;
}if(null!=h){f.value=h;
}return f;
},createRestorePoint:function(){return new a.Editor.RestorePoint(this.get_contentWindow(),this.get_contentArea());
},getToolState:function(c){if(c=="Undo"){return this.get_commandsManager().isUndoAvailable()?a.Editor.CommandStates.Off:a.Editor.CommandStates.Disabled;
}else{if(c=="Redo"){return this.get_commandsManager().isRedoAvailable()?a.Editor.CommandStates.Off:a.Editor.CommandStates.Disabled;
}else{var d=a.Editor.UpdateCommandsArray[c];
if(d&&d.getState){return d.getState(this.get_contentWindow());
}}}},getToolValue:function(d){var e=a.Editor.UpdateCommandsArray[d];
if(e&&e.getValue){return e.getValue(this.get_contentWindow());
}else{if(d=="RealFontSize"){var f=this.getSelectedElement();
if(f){var c=null;
try{c=$telerik.getCurrentStyle(f,"fontSize","");
}catch(g){}if(c){var h=parseFloat(c);
if(h>parseInt(c)){if(c.indexOf("px")>-1){c=parseInt(c)+"px";
}}}return c;
}}}},_addFilters:function(){var f=this.get_filtersManager();
var c=this.get_contentFilters();
var e=a.EditorFilters;
f.clear();
var d=c&e.ConvertToXhtml;
f.set_enableXhtmlFilter(d);
if(c&e.ConvertInlineStylesToAttributes){f.add(new a.Editor.ConvertInlineStylesToAttributesFilter());
}else{if(d){f.add(new a.Editor.CleanAttributesFilter());
}}if(c&e.RemoveScripts){f.add(new a.Editor.StripScriptsFilter());
}if(c&e.EncodeScripts){f.add(new a.Editor.EncodeScriptsFilter());
}if(c&e.FixUlBoldItalic){f.add(new a.Editor.FixUlBoldItalic());
}f.add(new a.Editor.FixNestedLists());
if(c&e.ConvertFontToSpan){f.add(new a.Editor.ConvertFontToSpanFilter());
}if(c&e.OptimizeSpans){f.add(new a.Editor.OptimizeSpans());
}if(c&e.FixEnclosingP){f.add(new a.Editor.FixEnclosingP());
}if(c&e.ConvertCharactersToEntities){f.add(new a.Editor.ConvertCharactersToEntities());
}if($telerik.isIE){f.add(new a.Editor.IEKeepObjectDesignFilter());
f.add(new a.Editor.IEKeepObjectParamsFilter());
f.add(new a.Editor.IEKeepCommentsFilter());
f.add(new a.Editor.IEFixEmptyParagraphs());
if(c&e.IECleanAnchors){f.add(new a.Editor.IECleanAnchorsFilter());
}}if(!$telerik.isIE&&!$telerik.isOpera){if(!$telerik.isSafari){f.add(new a.Editor.MozillaKeepFlash(this.get_mozillaFlashOverlayImage()));
}f.add(new a.Editor.MozillaKeepStylesString());
f.add(new a.Editor.MozillaKeepStylesDom());
if(c&e.MozEmStrong){f.add(new a.Editor.MozEmStrongFilter());
}}f.add(new a.Editor.StripJunkFilter());
if(c&e.MakeUrlsAbsolute){f.add(new a.Editor.MakeUrlsAbsolute());
}f.add(new a.Editor.RemoveExtraBrakes());
if(c&e.IndentHTMLContent){f.add(new a.Editor.IndentHTMLContentFilter());
}if(c&e.PdfExportFilter){f.add(new a.Editor.PdfExportFilter());
}},applyFiltersForEmbedContent:function(e){var d=e+"";
var c=this.get_filtersManager().getFilterByName("IEKeepObjectParamsFilter");
var f=this.get_filtersManager().getFilterByName("MozillaKeepFlash");
if(c){d=c.getDesignContent(d);
}if(f){var g=this.get_document().createElement("div");
Telerik.Web.UI.Editor.Utils.setElementInnerHtml(g,d);
g=f.getDesignContent(g);
d=g.innerHTML;
}return d;
},addShortCut:function(d,c){if(this._shortCutManager){this._shortCutManager.addShortCut(d,c);
}},removeShortCut:function(c){if(this._shortCutManager){this._shortCutManager.removeShortCut(c);
}},setShortCut:function(d,c){if(this._shortCutManager){this._shortCutManager.setShortCut(d,c);
}},_addDefaultShortCuts:function(){var c=[["SelectAll","CTRL+A"],["Copy","CTRL+C"],["Paste","CTRL+V"],["Cut","CTRL+X"],["Bold","CTRL+B"],["Italic","CTRL+I"],["Underline","CTRL+U"],["Copy","CTRL+INS"],["Paste","SHIFT+INS"],["ToggleScreenMode","F11"],["LinkManager","CTRL+K"],["ImageManager","CTRL+G"],["SetToolFocus","F10"]];
if(this.get_enableUndoRedo()){c.push(["Undo","CTRL+Z"]);
c.push(["Redo","CTRL+Y"]);
}for(var d=0;
d<c.length;
d++){this.addShortCut(c[d][0],c[d][1]);
}if(this.isIE){this.addShortCut("InsertTab","TAB");
}else{this.addShortCut("InsertTabMozilla","TAB");
}this.addShortCut("InsertShiftTab","SHIFT+TAB");
this.addShortCut("EnterNewLine","ENTER");
if(this.get_newLineMode()==Telerik.Web.UI.EditorNewLineModes.Br){if(this.isIE){this.addShortCut("ShiftEnter","SHIFT+ENTER");
this.addShortCut("InsertParagraph","CTRL+ENTER");
}else{if(this.isFirefox){this.addShortCut("EnterParagraphMozilla","CTRL+ENTER");
}else{if($telerik.isSafari){this.addShortCut("ShiftEnterSafari","SHIFT+ENTER");
this.addShortCut("InsertParagraphSafari","CTRL+ENTER");
}}}}},bubbleKeyEventToBrowser:function(){this._shortcutHit=false;
},attachEventHandler:function(e,d){if(e.startsWith("on")){e=e.replace("on","");
}var f=this.get_contentAreaMode()==a.EditorContentAreaMode.Div?this.get_contentArea():this.get_document();
$telerik.addExternalHandler(f,e,d);
var g=this._contentAreaEventHandlers;
if(!g[e]){g[e]=[];
}var c=g[e];
c[c.length]=d;
},detachEventHandler:function(d,c){if(d.startsWith("on")){d=d.replace("on","");
}var e=this.get_contentAreaMode()==a.EditorContentAreaMode.Div?this.get_contentArea():this.get_document();
$telerik.removeExternalHandler(e,d,c);
},_detachEvents:function(){var d=this._contentAreaEventHandlers;
for(var g in d){var j=d[g];
if(j.length!=null){for(var c=0;
c<j.length;
c++){var f=j[c];
if(typeof(f)=="function"){try{this.detachEventHandler(g,f);
}catch(h){}}}j=[];
}}this._contentAreaEventHandlers={};
this._attachBodyHandlers(false);
},get_TopZone:function(){return $get(this.get_id()+"Top");
},_createTools:function(){if(!this.get_toolAdapter()){var d=this.get_toolContainer();
var c=eval(this.get_toolAdapterType());
if(this._onToolClickDelegate==null){this._onToolClickDelegate=Function.createDelegate(this,this._onToolClick);
}this.set_toolAdapter($create(c,{editor:this,toolJSON:this.get_toolJSON(),contentAreaMode:this.get_contentAreaMode()},{toolClick:this._onToolClickDelegate},null,d));
if(this.isIE){if(this.get_toolbarMode()==a.EditorToolbarMode.Default){d.style.overflow="";
}this._updateEditorSize();
}}},_onToolClick:function(c,d){this.fire(c.get_name(),d);
},getContextMenuByTagName:function(c){var d=this.get_toolAdapter();
if(d&&d.getContextMenuByTagName){return d.getContextMenuByTagName(c);
}},getToolByName:function(c){var d=this.get_toolAdapter();
if(d){return d.getToolByName(c);
}return null;
},getLocalizedString:function(e,c){if(!e){return c;
}var d=this.get_localization()[e];
if(null==d){d=this.get_localization()[e.toLowerCase()];
}return d;
},setFocus:function(){try{if($telerik.isIE&&this.getSelection().isControl()){return;
}var d=this.get_mode()!=a.EditModes.Html?this.get_contentWindow():this._getTextArea();
if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){d=this.get_contentArea();
}if(d&&d.focus){d.focus();
}}catch(c){}},setActive:function(){if($telerik.isIE&&this.getSelection().isControl()){return;
}var c=this.get_mode()==a.EditModes.Html?this._getTextArea():this.get_contentArea();
if(c&&c.setActive){c.setActive();
}},set_visible:function(c){var d=this.get_element();
if(d){d.style.display=c?"":"none";
}this.set_editable(c);
},enableEditing:function(d,k,m){var h=this.get_toolAdapter();
var c=a.EditingOptions;
var g=function(){};
if(!k){k=a.EditingOptions.All;
}this._editingOptions=k;
this._optionalIgnoredTools=m;
if(k&c.ContextMenus){if(h){h.enableContextMenus(d);
}}if(k&c.EditModes){if(!d){this._originalEditModeRef=this.set_mode;
this.set_mode=g;
}else{if(this._originalEditModeRef){this.set_mode=this._originalEditModeRef;
this._originalEditModeRef=null;
}}}if(k&c.Tools){if(h){if(!d){h.setToolState(null,a.Editor.CommandStates.Disabled);
if(m){var l=[];
for(var f in m){var j=h.getToolByName(f);
if(j){l[l.length]=j;
}}h.setToolState(l);
}this._originalSetToolStateRef=h.setToolState;
h.setToolState=g;
}else{if(this._originalSetToolStateRef){h.setToolState=this._originalSetToolStateRef;
this._originalSetToolStateRef=null;
}}}}if(k&c.Modules){var e=this._modulesManager;
if(e){e.setModulesVisible(d);
}}if(k&c.Typing){if(!d){this._disableTypingDelegate=$telerik.cancelRawEvent;
this.attachEventHandler("keypress",this._disableTypingDelegate);
}else{if(this._disableTypingDelegate){this.detachEventHandler("keypress",this._disableTypingDelegate);
this._disableTypingDelegate=null;
}}}if(k&k.Tab){if(!d){this.removeShortCut("InsertTab");
}else{this.setShortCut("InsertTab","TAB");
}}if(d){if(h){h.setToolState(null,a.Editor.CommandStates.Off);
}this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},set_editable:function(d){var c=this;
if($telerik.isIE||$telerik.isOpera||this.get_contentAreaMode()==a.EditorContentAreaMode.Div){window.setTimeout(function(){try{c.get_contentArea().setAttribute("contentEditable",""+d);
if($telerik.isIE){c.get_document().execCommand("2D-Position",false,true);
}}catch(e){}},0);
}else{window.setTimeout(function(){try{c.get_document()["designMode"]=d?"on":"off";
if(d){c.get_document().execCommand("UseCSS",false,true);
c.get_document().execCommand("styleWithCSS",false,false);
}}catch(f){}},0);
}},get_editable:function(){if($telerik.isIE||$telerik.isOpera||this.get_contentAreaMode()==a.EditorContentAreaMode.Div){return this.get_contentArea().getAttribute("contentEditable",2);
}else{return(this.get_document()["designMode"]=="on");
}},enableContentArea:function(c){if(this.isIE){this.get_contentArea().setAttribute("contentEditable",""+c);
}},showExternalDialog:function(n,q,r,c,f,g,m,j,e,h,l,p){var k=this.getEditorSelectionRange();
var o=this;
var d=function(s,t){window.setTimeout(function(){if(k!=null){try{o.getSelection().selectRange(k);
}catch(v){}}if(f&&t!=null){var u=f(s,t);
if(false==u){return;
}o.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}o.setFocus();
},50);
};
this.get_dialogOpener().openUrl(n,q,r,c,d,g,m,j,e,h,l,p);
},showDialog:function(c,f,k){var h=this.getEditorSelectionRange();
var d=this;
var g=function(l,m){window.setTimeout(function(){if(h!=null&&c!="FindAndReplace"){try{d.getSelection().selectRange(h);
}catch(o){}}if(k&&m!=null){var n=k(l,m);
if(false==n){return;
}d.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}d.setFocus();
},50);
};
var j=this.get_dialogOpener();
if(c=="InsertLink"||c=="InsertImage"||c=="InsertTableLight"){j.openLight(c,f,g);
}else{j.open(c,f,g);
}if(this.isIE){var e=this.get_dialogOpener()._getDialogContainer(c);
if(!e||e._DRAG_ATTACHED){return;
}e._DRAG_ATTACHED=true;
e.add_dragEnd(function(){if(h!=null){try{d.getSelection().selectRange(h);
}catch(l){}}});
}},_getModeButtonsWrapper:function(){return this._getChildElement("ModesWrapper");
},_registerModeChangeHandler:function(d){var c=this._getModeButtonsWrapper();
if(!c){return;
}if(d){this._onModeButtonClickDelegate=Function.createDelegate(this,this._onModeButtonClick);
$addHandler(c,"click",this._onModeButtonClickDelegate);
}else{if(this._onModeButtonClickDelegate){$removeHandler(c,"click",this._onModeButtonClickDelegate);
this._onModeButtonClickDelegate=null;
}}},_onModeButtonClick:function(h){var g=this.get_mode();
var c=a.Editor.Utils.getElementParentByTag(h.target,"LI");
if(c){var d=a.EditModes;
var f=Sys.UI.DomElement;
var j=c.getElementsByTagName("A")[0];
if(f.containsCssClass(j,"reMode_html")){g=d.Html;
}else{if(f.containsCssClass(j,"reMode_design")){g=d.Design;
}else{g=d.Preview;
}}}if(g!=this.get_mode()){this.set_mode(g);
}return $telerik.cancelRawEvent(h);
},_changeModeUI:function(k){var g=Sys.UI.DomElement;
var j=a.EditModes;
var c=this.get_enableAriaSupport();
var f="reMode_";
switch(k){case j.Html:f+="html";
break;
case j.Design:f+="design";
break;
case j.Preview:f+="preview";
break;
}var e=this._getModeButtonsWrapper();
var l=e.getElementsByTagName("A");
for(var d=0;
d<l.length;
d++){var h=l[d];
g.removeCssClass(h,"reMode_selected");
if(c&&typeof(g.removeAttribute)!="undefined"){g.removeAttribute("aria-pressed");
}if(g.containsCssClass(h,f)){g.addCssClass(h,"reMode_selected");
if(c&&typeof(g.setAttribute)!="undefined"){g.setAttribute("aria-pressed","true");
}}}},_isEditModeEnabled:function(c){return c&this.get_editModes()?true:false;
},get_mode:function(){return this._mode;
},set_mode:function(g){if(!this.validateMaxHtmlLength()){this.displayMaxHtmlLengthErrorMessage();
return false;
}if(!this.validateMaxTextLength()){this.displayMaxTextLengthErrorMessage();
return false;
}this._setEditableDelegate=Function.createDelegate(this,function(){if(this._setEditableDelegate){this.remove_editReady(this._setEditableDelegate);
var j=(this._mode==h.Design);
this.set_editable(j);
this.toggleEnhancedEdit(j);
this._setEditableDelegate=null;
}});
this.add_editReady(this._setEditableDelegate);
var c=this._mode;
var h=a.EditModes;
if(g==h.Preview&&c!=h.Html){Telerik.Web.UI.Editor.Utils.setTargetsForPreview(this);
}else{if(c==h.Preview){Telerik.Web.UI.Editor.Utils.restoreTargetsAfterPreview(this);
}}if(c==h.Html||g==h.Html){var e=this.get_html(true);
this._mode=g;
this._showTextArea(this._mode==h.Html);
this.set_html(e);
if(g==h.Preview){Telerik.Web.UI.Editor.Utils.setTargetsForPreview(this);
}}else{this._mode=g;
this._showTextArea(this._mode==h.Html);
}this._changeModeUI(g);
if(this._mode!=h.Preview){this.setFocus();
if(this.isFirefox&&(!this.get_document()||!this.get_contentArea())){}else{this.set_editable(true);
}if(this._mode==h.Design){this.toggleEnhancedEdit(true);
}}else{this.set_editable(false);
this.toggleEnhancedEdit(false);
}if(g==h.Design&&$telerik.isFirefox){this.get_contentAreaElement().blur();
}else{this.setFocus();
}var d=this.get_mainTable();
var f=d.offsetHeight+"px";
this.raiseEvent("modeChange",Sys.EventArgs.Empty);
this._updateEditorSize(f);
},_getTextIframe:function(){if(this._textIframe&&(!this._textIframe.contentWindow||(this._textIframe.contentWindow.document.body&&!this._textIframe.contentWindow.document.body.firstChild))){if(this._textIframe.parentNode){this._textIframe.parentNode.removeChild(this._textIframe);
}this._textIframe=null;
}if(!this._textIframe){var e=this._createIframe();
if(e){this._textIframe=e;
var c=this._textIframe.style;
c.position="absolute";
c.height="2px";
c.width="2px";
this.get_contentAreaElement().parentNode.appendChild(this._textIframe);
var g=this._textIframe.contentWindow.document;
if(!$telerik.isIE6||window.location.protocol!="https:"){g.designMode="off";
}var d=g.open("text/html","replace");
var f="<html style='height:100%;'><head><title>RadEditor HTML Mode</title></head><body style='overflow:hidden;margin:0px;padding:0px;height:100%'><textarea style='font:normal 11px Tahoma;color: #000080;border:0px;height:100%;width:100%;resize:none;'></textarea></body></html>";
if(typeof(d)=="undefined"){d=g;
}d.write(f);
d.close();
}}return this._textIframe;
},_getTextArea:function(){var c=this._getTextIframe();
if(c&&typeof(c.contentWindow)!="unknown"){return c.contentWindow.document.body.firstChild;
}else{return null;
}},get_textArea:function(){return this._getTextArea();
},_showTextArea:function(d){var e=this._getTextIframe();
var c=this.get_contentAreaElement();
if(d){if($telerik.isSafari&&this.get_contentAreaMode()!=a.EditorContentAreaMode.Div){c.style.width="0px";
c.style.height="0px";
}else{c.style.display="none";
}e.style.height="";
e.style.display="";
e.style.position="";
if(this.get_autoResizeHeight()){window.setTimeout(function(){e.style.height=(e.parentNode.offsetHeight-6)+"px";
},0);
}if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){e.style.position="";
window.setTimeout(function(){var f=e.parentNode.offsetHeight-3;
e.style.height=f+"px";
},0);
}else{e.style.height="100%";
}e.style.width="100%";
}else{if($telerik.isSafari&&this.get_contentAreaMode()!=a.EditorContentAreaMode.Div){c.style.width="100%";
c.style.height="100%";
}else{c.style.display="";
}e.style.display="none";
}},_setContentAsText:function(c){var d=this._getTextArea();
if(d){d.value=c;
}},_getContentAsText:function(){var d=this._getTextArea();
if(d&&d.value){var c=d.value;
return c;
}return"";
},set_html:function(g,e,d,f){var c=a.EditModes;
if(this.get_mode()!=c.Html){var h=new a.Editor.GenericCommand(e?e:"Set HTML",this.get_contentWindow(),this);
this._setContentAreaHtml(g);
this.executeCommand(h,d);
if(false!=f){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}}else{this._setContentAsText(g);
}},get_html:function(j){var c=null;
var h="";
var k=this.get_mode();
var e=a.EditModes;
if(k==e.Html){return this._getContentAsText();
}else{if(this.get_fullPage()){if(this.get_document()){c=this.get_document().getElementsByTagName("HTML")[0];
c=a.Editor.Utils.cloneNodeWithChildren(c);
var g=this._getAllSheets(c);
for(var d=0;
d<g.length;
d++){var f=g[d];
var l=f.getAttribute("id");
if(l&&l.indexOf("RADEDITORSTYLESHEET")==0){f.parentNode.removeChild(f);
}}if($telerik.isIE||$telerik.isOpera){c.getElementsByTagName("BODY")[0].removeAttribute("contentEditable");
}}}else{if(this.get_contentArea()){if(true==j){c=a.Editor.Utils.cloneNodeWithChildren(this.get_contentArea());
}else{c=this.get_contentArea();
}}}}if(c){if(true==j){h=this.get_filtersManager().getHtmlContent(c);
h=this._stripBodyTagFromContent(h);
}else{h=this.get_fullPage()?$telerik.getOuterHtml(c):c.innerHTML;
}}if(this.get_fullPage()&&this._doctypeString){h=this._doctypeString+"\n"+h;
}return h;
},set_initialContent:function(c){if(c!=null){this._initialContent=c;
}else{this._initialContent=this.get_html(true);
}},get_initialContent:function(){return this._initialContent;
},get_text:function(){var d=a.EditModes;
var e="";
if(this.get_mode()!=d.Html){var c=this.get_contentArea();
if(c){if(c.innerText){e=c.innerText;
}else{if(c.textContent!=null){e=c.textContent;
e=e.replace(/<!--(.|\s)*?-->/gi,"");
}else{e=c.innerHTML.replace(/<\/?[^>]*>/ig,"");
e=e.replace(/&nbsp;/gi,"");
}}}}else{e=this._getTextArea().value.replace(/<\/?[^>]*>/ig,"");
}return e;
},_getUniqueStyleSheetId:function(c){return"RADEDITORSTYLESHEET"+c;
},_getAllSheets:function(f){if(!f){alert("RadEditor._getAllSheets called with no document object provided");
}var d=f.getElementsByTagName("link");
var g=f.getElementsByTagName("style");
var h=[];
var c;
for(c=0;
d[c];
c++){var e=d[c].rel?d[c].rel:d[c].getAttribute("rel");
if(typeof(e)=="string"&&e.toLowerCase().indexOf("style")+1){Array.add(h,d[c]);
}}for(c=0;
g[c];
c++){Array.add(h,g[c]);
}return h;
},_getClassName:function(c){var d=c&&c.selectorText?c.selectorText:"";
var f=d.lastIndexOf(".");
if(f==-1){return"";
}var e=d.indexOf(" ",f);
if(-1==e){e=d.indexOf(":",f);
}if(-1==e){e=d.length;
}return d.substring((f+1),e);
},_createCssFilterObject:function(){if(this._cssClassesHash){return;
}var d=this.get_cssClasses();
if(d&&d.length>0){var h={};
var g=d.length;
for(var c=0;
c<g;
c++){var e=d[c][0];
var f=d[c][1];
h[e.replace(/(.*?)\./ig,function(j){return j.toUpperCase();
})]=f;
}this._cssClassesHash=h;
}},_getFilteredCssClasses:function(c){this._createCssFilterObject();
if(c&&this._cssClassesHash){var e=[];
var g=c.length;
for(var f=0;
f<g;
f++){var d=c[f];
if(outAlias=this._checkCssFilter(d[1].selectorText)){d[2]=outAlias;
e[e.length]=d;
}}return e;
}else{return c;
}},_checkCssFilter:function(c){if(!c||!this._cssClassesHash){return null;
}return this._cssClassesHash[c.replace(/(.*?)\./ig,function(d){return d.toUpperCase();
})];
},getCssArray:function(c){var f=this.get_document();
var g=[];
for(var d=0;
d<f.styleSheets.length;
d++){var h=f.styleSheets[d];
try{this._getStyleSheetRules(g,h,c);
}catch(j){}}g=this._getFilteredCssClasses(g);
return g;
},_getStyleSheetRules:function(n,o,d){var p=o.href;
if(p&&p.indexOf("WebResource.axd?")>-1){return;
}if(p&&p.indexOf(this.get_contentAreaCssFile())>-1){return;
}var l=(o.rules)?o.rules:o.cssRules;
if($telerik.isIE&&o.imports){for(var f=0;
f<o.imports.length;
f++){this._getStyleSheetRules(n,o.imports[f],d);
}}for(var e=0;
e<l.length;
e++){var c=l[e];
if(c&&c.cssText){var q=c.cssText.toLowerCase();
if(q.indexOf("@import")>=0&&c.parentStyleSheet&&c.styleSheet&&c.parentStyleSheet!=c.styleSheet){this._getStyleSheetRules(n,c.styleSheet,d);
continue;
}}var h=c&&c.selectorText?c.selectorText:"";
var g=h.lastIndexOf(".");
if(g<0){continue;
}g=h.lastIndexOf(":");
if(g>0){continue;
}var m=this._getClassName(c);
if(m!="reContentArea"){n[n.length]=[m,c];
}}},copyStyleSheets:function(o,n){if(null==o&&null==n){return;
}var h=0;
var d=null;
if(n.styleSheets.length==0){if(n.createStyleSheet){n.createStyleSheet();
}else{css=n.createElement("style");
css.media="all";
css.type="text/css";
var f=n.getElementsByTagName("head")[0];
f.appendChild(css);
d=css;
}}if(n.styleSheets[0]){d=n.styleSheets[0];
}for(var k=0;
k<o.styleSheets.length;
k++){try{var s=o.styleSheets[k];
var q=s.href;
var c=false;
if($telerik.isFirefox){if(s.ownerNode&&s.ownerNode.tagName.toLowerCase()=="style"){c=true;
}}if(q&&!c){continue;
}if(s.media){var m=s.media;
if(m.mediaText!=null){m=m.mediaText;
}if(m&&m!="all"&&m!="screen"){continue;
}}var r=(s.rules)?s.rules:s.cssRules;
for(var l=0;
l<r.length;
l++){var e=r[l];
if(d.addRule){var u=e.selectorText;
var t=e.style.cssText;
if(t&&u){d.addRule(u,t,h);
}}else{if(d.insertRule){d.insertRule(e.cssText,h);
}else{var t=e.selectorText+"{"+e.style.cssText+"}";
var g=n.createTextNode(t);
d.appendChild(g);
}}h++;
}}catch(p){}}},_contentAreaCommonInitialization:function(){var c=a.Editor.PopupController;
if(c){c.detachFromDocument(this.get_document());
c.attachToDocument(this.get_document());
}this._initEvents();
if(this.isVisible()){this.raiseEvent("firstShow");
}if(this.get_mode()!=a.EditModes.Preview){this.set_editable(true);
}else{this.set_editable(false);
}this.toggleEnhancedEdit(true);
if(this.get_document()&&this.get_contentArea()){this.raiseEvent("editReady",Sys.EventArgs.Empty);
}this._divContentAreaInitialized=true;
},_contentFrameLoadFunction:function(){this._execLoadFunctionSecondTime=false;
try{this.set_document(this.get_contentAreaElement().contentWindow.document);
this.set_contentWindow(this.get_contentAreaElement().contentWindow);
this.set_contentArea(this.get_document().body);
this.get_filtersManager().getDesignContentDom(this.get_contentArea());
var f=0;
a.Editor.Utils.addStyleSheet(this.get_contentAreaCssFile(),this.get_document(),this._getUniqueStyleSheetId(f++));
var m=this.get_tableLayoutCssFile();
if(m){a.Editor.Utils.addStyleSheet(m,this.get_document(),this._getUniqueStyleSheetId(f++));
}var j=this.get_cssFiles();
if(j.length>0){for(var c=0;
c<j.length;
c++){var d=this._getUniqueStyleSheetId(f++);
a.Editor.Utils.addStyleSheet(j[c],this.get_document(),d);
}}else{if(!this.get_fullPage()){this.copyStyleSheets(document,this.get_document());
var g=this._getAllSheets(document);
for(var c=0;
c<g.length;
c++){var d=this._getUniqueStyleSheetId(f++);
var h=g[c];
if(h.tagName=="LINK"){var l=h.href;
if(!l||l.indexOf("WebResource.axd?")>-1){continue;
}if(h.rel&&h.rel.toLowerCase()!="stylesheet"){continue;
}if(h.media&&h.media!="all"&&h.media!="screen"){continue;
}a.Editor.Utils.addStyleSheet(h.getAttribute("href"),this.get_document(),d);
}else{if(h.tagName=="STYLE"){}}}}}this._contentAreaCommonInitialization();
}catch(k){}},_extractDoctype:function(c){var e=new RegExp("(<!DOCTYPE[^>]+>)","g");
var d=c.match(e);
return d?d[0]:"";
},_setContentAreaHtml:function(d,n){var h=this.get_filtersManager().getDesignContent(d);
var j=null;
if(-1!=h.toLowerCase().indexOf("<html")){this.set_fullPage(true);
j=h;
this._doctypeString=this._extractDoctype(j);
}else{this.set_fullPage(false);
}if(this.get_fullPage()&&this.get_contentAreaMode()==a.EditorContentAreaMode.Div){alert("Error! Set EditorContentAreaMode to Iframe if you want to edit full page HTML");
h=Telerik.Web.UI.Editor.Utils.stripHtmlHeadBodyTags(h);
this.set_fullPage(false);
}h=this._markExistingEmptyParagraphs(h);
if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){this.set_contentArea(this.get_contentAreaElement());
var c=this.get_contentArea();
this.set_document(c.ownerDocument);
this.set_contentWindow(window);
if(h.match(/<form[\s>]/i)){alert("Error! Form elements are only supported when the content area is set to Iframe!");
h="";
}a.Editor.Utils.setElementInnerHtml(c,h);
this.get_filtersManager().getDesignContentDom(c);
if(!this._divContentAreaInitialized){this._contentAreaCommonInitialization();
}}else{if(null!=j||true==n){if(!j){if($telerik.isSafari){j="<!DOCTYPE html><html><head><style></style></head><body>"+h+"</body></html>";
}else{var f="";
if($telerik.isOpera){f=" style='height:100%'";
}j="<head><style></style></head><body"+f+">"+h+"</body>";
}}if($telerik.isFirefox){var g=Function.createDelegate(this,function(){if(this._execLoadFunctionSecondTime){this._contentFrameLoadFunction();
}});
$addHandler(this.get_contentAreaElement(),"load",g);
}try{var m=this.get_contentAreaElement().contentWindow.document;
m.open();
m.write(j);
m.close();
this._execLoadFunctionSecondTime=false;
if(m.body){this._contentFrameLoadFunction();
}else{this._execLoadFunctionSecondTime=true;
}}catch(l){}}else{a.Editor.Utils.setElementInnerHtml(this.get_contentArea(),h);
this.get_filtersManager().getDesignContentDom(this.get_contentArea());
}}var k=this._checkForBrokenParagraphs();
if(k){this._fixBrokenParagraphs(h);
}},_markExistingEmptyParagraphs:function(c){var d=c+"";
if($telerik.isIE){d=d.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _rdEditor_exists="1">&nbsp;</p>');
}return d;
},_checkForBrokenParagraphs:function(){var c=false;
if($telerik.isIE){var f=this.get_contentArea().getElementsByTagName("p");
for(var e=f.length-1;
e>=0;
e--){var d=f[e];
if(!d.hasChildNodes()){if(!d.getAttribute("_rdEditor_exists")){c=true;
}}d.removeAttribute("_rdEditor_exists");
}}return c;
},_fixBrokenParagraphs:function(h){if($telerik.isIE){if(this.get_contentAreaMode()!=a.EditorContentAreaMode.Div){h=Telerik.Web.UI.Editor.Utils.stripHtmlHeadBodyTags(h);
}var d=this.get_contentArea();
h=h.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _rdEditor_temp="1">');
h=h.replace(/<\/p>/gi,"</div>");
a.Editor.Utils.setElementInnerHtml(d,h);
var f=d.getElementsByTagName("DIV");
for(i=f.length-1;
i>=0;
i--){var k=f[i];
if(k.getAttribute("_rdEditor_temp")){var g=this.get_document().createElement("P");
$telerik.getOuterHtml(k.cloneNode(false)).replace(/([a-z0-9\-_]+)=/gi,function(m,l){var j;
if(l!=="_rdEditor_temp"){j=k.getAttribute(l);
if(!j&&l==="class"){j=k.className;
}g.setAttribute(l,j);
}});
for(var e=0;
e<k.childNodes.length;
e++){g.appendChild(k.childNodes[e].cloneNode(true));
}if(k.swapNode){k.swapNode(g);
}else{var c=k.parentNode;
c.insertBefore(g,k);
c.removeChild(k);
}}}this.get_filtersManager().getDesignContentDom(d);
}},_createUI:function(){if(this._created){return;
}this._registerModeChangeHandler(true);
this._tableElement=this.get_mainTable();
var c=$get(this.get_id()+"Center");
var d=this.get_contentAreaElement();
c.appendChild(d);
this._created=true;
},repaint:function(){a.RadEditor.callBaseMethod(this,"repaint");
this.onParentNodeChanged();
this._fixMoreSizeIssues();
if(this.get_toolAdapter() instanceof a.Editor.RibbonBarToolAdapter){this.get_ribbonBar().repaint();
}},_updateEditorSize:function(d,e){var f=this._tableElement;
var c=d?d:f.style.height;
if(true==e||c=="auto"){c=f.offsetHeight+"px";
}if(parseInt(c)==0){return;
}c=parseInt(c)+"px";
f.style.height=c;
if(this.isIE){this._fixIeHeight(f,c);
}this._fixMoreSizeIssues();
var g=this.get_element();
if(g.style.height!="auto"){g.style.height=c;
}},_fixIeHeight:function(d,c){if("CSS1Compat"==document.compatMode){var e=(d.offsetHeight-parseInt(c));
if(e>0){var f=(parseInt(d.style.height)-e);
if(f>0){d.style.height=f+"px";
}}}},_fixMoreSizeIssues:function(){var j=(this.get_contentAreaMode()==a.EditorContentAreaMode.Div);
var m=this.get_autoResizeHeight();
var e=this.get_element();
if(e.style.position=="absolute"){e.style.position="";
}if(m&&!j){return;
}else{if(m&&this._isFullScreen!=true&&$telerik.isIE){window.setTimeout(Function.createDelegate(this,function(){var p=this.get_mainTable();
e.style.height="auto";
if(""==e.style.minHeight){e.style.minHeight=p.offsetHeight+"px";
}if(""==e.style.minWidth){e.style.minWidth=p.offsetWidth+"px";
}if(e.style.width.indexOf("%")<0){e.style.width=(p.offsetWidth-6)+"px";
}var n=$get(this.get_id()+"Center");
var o=this.get_contentAreaElement();
o.style.height="auto";
if(""==o.style.minHeight){o.style.minHeight=n.offsetHeight+"px";
}if(""==o.style.minWidth){o.style.minWidth=(n.offsetWidth-12)+"px";
}}),0);
}else{var l=this.get_mainTable();
if(l.offsetWidth==0){return;
}var g=$get(this.get_id()+"Center");
var h=this.get_mode()!=a.EditModes.Html?this.get_contentAreaElement():this._getTextIframe();
if(g.style.height!="100%"){g.style.height="100%";
}if(this._isFullScreen){e.style.minHeight="";
e.style.minWidth="";
if($telerik.isOpera){h.style.height="0px";
var d=g.offsetHeight-2;
h.style.height=d+"px";
g.style.height=d+"px";
}if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){h.style.height=($telerik.isIE)?"100%":h.parentNode.offsetHeight+"px";
}}else{if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){h.style.position="absolute";
var k=g.offsetHeight-2;
h.style.position="relative";
if(k&&k>0){h.style.height=k+"px";
}if(h.offsetHeight>0){l.style.height=(parseInt(l.style.height)-6)+"px";
h.style.height=(h.offsetHeight-12)+"px";
}}else{if(!$telerik.isIE){h.style.position="absolute";
var c=g.offsetHeight;
h.style.position="";
if(c<160&&g.offsetHeight>c+2){g.style.height=(c-6)+"px";
}}if($telerik.isOpera){h.style.height="100%";
if(g.style.height=="100%"){g.style.height=(2*g.offsetHeight-g.parentNode.parentNode.offsetHeight-13)+"px";
}}}if(""==e.style.minHeight){e.style.minHeight=l.style.height;
}if(""==e.style.minWidth){e.style.minWidth=l.offsetWidth+"px";
}if(e.style.width.indexOf("%")<0){e.style.width=l.offsetWidth+"px";
}if(j&&m){e.style.height="auto";
var g=$get(this.get_id()+"Center");
var f=this.get_contentAreaElement();
f.style.height="auto";
if(""==f.style.minHeight){f.style.minHeight=g.offsetHeight+"px";
}if(""==f.style.minWidth){f.style.minWidth=(g.offsetWidth-12)+"px";
}}}}}},setSize:function(d,c){var h=parseInt(d);
var e=parseInt(c);
var f=this.get_mainTable();
if(f&&f.style){f.style.height="";
var g=f.parentNode;
g.style.width=h+"px";
g.style.height=e+"px";
this._fixIeHeight(g,e);
if($telerik.isIE){f.style.height=e+"px";
this._fixIeHeight(f,e);
}else{f.style.height="100%";
}}},pasteHtml:function(j,r,h,f,q){if(!this.get_editable()){return;
}if(j.match(/^<script/ig)){j="<span id='_rdEditor_temp'></span>"+j;
}var e=new a.EditorCommandEventArgs(r,null,j);
if(false==this._executeCommandEvent("pasteHtml",r,e)){return;
}if(j!=e.get_value()){j=e.get_value();
}var k=this.getLocalizedString(r);
var c=this.get_mode();
if(a.EditModes.Design==c){this.setFocus();
this.executeCommand(new a.Editor.PasteHtmlCommand(k,this.get_contentWindow(),j,h,this),null,q);
if(f!=false){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}}else{if(a.EditModes.Html==c){var g=this._getTextArea();
if(this.isIE){g.setActive();
var d=document.selection.createRange();
d.text=j;
}else{if(g.setSelectionRange){var o=g.selectionStart;
var m=g.selectionEnd;
var n=g.value.substring(o,m);
var p=j;
g.value=g.value.substring(0,o)+p+g.value.substring(m);
g.setSelectionRange(o+p.length,o+p.length);
this.setFocus();
}}}}var l=this.get_document().getElementById("_rdEditor_temp");
if(l!=null){l.parentNode.removeChild(l);
}},fire:function(h,f){if(h!="Copy"){this._saveTypedContent(true,"editor.fire Copy executing");
}if(false==this._executeCommandEvent("commandExecuting",h,f)){return;
}if(this._optionalIgnoredTools&&!this._optionalIgnoredTools[h]){return;
}this.setActive();
this._pendingTextTypeCmd=null;
var d=a.Editor.CommandList[h];
var c=false;
if(d){c=(false!=d(h,this,f));
}else{alert("The command "+h+" is not implemented yet.");
}if(c){if(!$telerik.isOpera){this.setFocus();
}this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}this._executeCommandEvent("commandExecuted",h,f);
try{if(h=="Undo"&&!$telerik.isIE&&this.get_contentArea().innerHTML.toLowerCase().trim()=="<br>"){this.get_contentArea().innerHTML="<br>";
}}catch(g){}},_executeCommandEvent:function(d,e,c){if(!c){c=new a.EditorCommandEventArgs(e);
}this.raiseEvent(d,c);
if(c.get_cancel&&c.get_cancel()){return false;
}return true;
},_onWindowResize:function(){var c=this._getViewportBounds();
this.setSize(c.width,c.height,false);
},_registerWindowResizeHandler:function(c){if(c){this._onWindowResizeDelegate=Function.createDelegate(this,this._onWindowResize);
$addHandler(window,"resize",this._onWindowResizeDelegate);
}else{if(this._onWindowResizeDelegate){$removeHandler(window,"resize",this._onWindowResizeDelegate);
this._onWindowResizeDelegate=null;
}}},_getViewportBounds:function(){var e=$telerik.getClientBounds();
var c=document.documentElement.scrollLeft||document.body.scrollLeft;
var d=document.documentElement.scrollTop||document.body.scrollTop;
e.scrollLeft=c;
e.scrollTop=d;
return e;
},_handleParentsWithOverflow:function(e){if(false==e){if(!this._parentsWithOverflow){return;
}var j=this._parentsWithOverflow;
var h=j.length;
for(var d=0;
d<h;
d++){var c=j[d];
if(c[0]){var f=c[0].style;
f.overflow=c[1];
f.height=c[2];
f.tableLayout=c[3];
f.position=c[4];
}}this._parentsWithOverflow=null;
}else{this._parentsWithOverflow=[];
var j=this._parentsWithOverflow;
var g=this.get_element().parentNode;
while(g&&g.tagName!="BODY"){var f=g.style;
j[j.length]=[g,f.overflow,f.height,f.tableLayout,f.position];
f.position="static";
f.tableLayout="auto";
f.overflow="visible";
f.height="auto";
g=g.parentNode;
}}},isFullScreen:function(){return this._isFullScreen;
},_disableBodyScroll:function(){this._preFullScreenBodyStyle=[document.body.scroll,document.body.style.margin,""];
document.body.scroll="no";
document.body.style.margin="0px";
if(document.documentElement){this._preFullScreenBodyStyle[2]=document.documentElement.style.overflow;
document.documentElement.style.overflow="hidden";
}this._handleParentsWithOverflow(true);
},_enableBodyScroll:function(){if(!this._preFullScreenBodyStyle){return;
}document.body.scroll=this._preFullScreenBodyStyle[0];
try{document.body.style.margin=this._preFullScreenBodyStyle[1];
}catch(c){}document.documentElement.style.overflow=this._preFullScreenBodyStyle[2];
this._handleParentsWithOverflow(false);
this._preFullScreenBodyStyle=null;
},toggleScreenMode:function(){var c=this;
var f=c.get_element();
if(!c._isFullScreen){this._disableBodyScroll();
var j=f.style.height;
if(j=="auto"||isNaN(parseInt(j))){j=f.offsetHeight+"px";
}var d=f.style.width;
if(d=="auto"||isNaN(parseInt(d))){d=f.offsetWidth+"px";
}c._preFullScreenBounds={width:d,height:j};
c._onWindowResize();
if($telerik.isOpera){f.style.position="fixed";
f.style.left="0px";
f.style.top="0px";
}else{c._preFullScreenBrowserRect=c._getViewportBounds();
var g=$telerik.getLocation(f);
a.Editor.Utils.restoreBrowserPosition(g.x,g.y);
}c._isFullScreen=true;
c._registerWindowResizeHandler(true);
}else{c._registerWindowResizeHandler(false);
this._enableBodyScroll();
c._isFullScreen=false;
var e=c._preFullScreenBounds;
c.setSize(e.width,e.height,false);
f.style.width=e.width;
f.style.height=e.height;
if($telerik.isOpera){f.style.position="";
f.style.left="";
f.style.top="";
}else{var g=c._preFullScreenBrowserRect;
a.Editor.Utils.restoreBrowserPosition(g.scrollLeft,g.scrollTop);
}}c._updateEditorSize(f.style.height);
c.set_editable(true);
c.setFocus();
var h=c.getToolByName("ToggleScreenMode");
if(h){h.setOn(c._isFullScreen);
}this.raiseEvent("toggleScreenMode",Sys.EventArgs.Empty);
},validateMaxTextLength:function(g){var h=this.get_maxTextLength();
if(h>0){if(!g){g="";
}var f=this.get_text()+g;
var e=/[!\.?;,:&_\-\?\{\}\[\]\(\)~#'"]/g;
f=f.replace(e,"");
var d=/(^\s+)|(\s+$)/g;
f=f.replace(d,"");
var c=/(\r\n)+/g;
f=f.replace(c,"");
return h>f.length;
}return true;
},validateMaxHtmlLength:function(c){var d=this.get_maxHtmlLength();
if(d>0){if(!c){c="";
}return d>this.get_html(true).length+c.length;
}return true;
},displayMaxHtmlLengthErrorMessage:function(){alert(this.get_localization()["exceededhtmllength"]+" "+this.get_maxHtmlLength()+". "+this.get_localization()["reducetheconentlength"]+".");
},displayMaxTextLengthErrorMessage:function(){alert(this.get_localization()["exceededtextlength"]+" "+this.get_maxTextLength()+". "+this.get_localization()["reducetheconentlength"]+".");
},get_contentHiddenTextareaValue:function(){if(this._contentHiddenTextarea){return a.Editor.Utils.decodePostbackContent(this._contentHiddenTextarea.value);
}else{return"";
}},set_contentHiddenTextareaValue:function(c){this._contentHiddenTextarea.value=a.Editor.Utils.encodePostbackContent(c);
},get_localization:function(){return this._localization;
},_createIframe:function(){var c=document.createElement("iframe");
c.frameBorder="0";
c.src="javascript:'<html></html>';";
var d=c.style;
d.width="100%";
d.height="100%";
d.margin="0px";
d.padding="0px";
return c;
},get_contentAreaElement:function(){if((this.get_contentAreaMode()==a.EditorContentAreaMode.Iframe)&&(this._contentAreaElement&&(!this._contentAreaElement.contentWindow||!this._contentAreaElement.contentWindow.document))){if(this._contentAreaElement.parentNode){this._contentAreaElement.parentNode.removeChild(this._contentAreaElement);
}this._contentAreaElement=null;
}if(!this._contentAreaElement){var c;
if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){c=document.createElement("div");
c.setAttribute("id",this.get_id()+"_contentDiv");
c.className="reContentArea";
}else{c=this._createIframe();
if(!$telerik.isIE){c.innerHTML="Your browser does not support inline frames or is currently configured not to display inline frames.";
}c.setAttribute("title","Rich text editor with ID "+this.get_id());
c.setAttribute("id",this.get_id()+"_contentIframe");
}this._contentAreaElement=c;
if(this.get_enableAriaSupport()){this._contentAreaElement.setAttribute("role","textbox");
}}return this._contentAreaElement;
},get_shortCutManager:function(){return this._shortCutManager;
},get_filtersManager:function(){return this._filtersManager;
},get_commandsManager:function(){return this._commandsManager;
},get_modulesManager:function(){return this._modulesManager;
},get_useClassicDialogs:function(){return this.get_dialogOpener().get_useClassicDialogs();
},set_useClassicDialogs:function(c){this.get_dialogOpener().set_useClassicDialogs(c);
},get_qualifiedSkin:function(){var c=this.get_skin();
return"RadEditor."+c;
},_applyAriaSupport:function(){this.get_element().setAttribute("role","presentation");
var j=this.get_toolContainer();
this._applyAriaForLayoutTables();
if(j){j.setAttribute("role","toolbar");
var h=j.getElementsByTagName("ul");
for(var d=0;
d<h.length;
d++){h[d].setAttribute("role","presentation");
}}var f=this._getModeButtonsWrapper();
f.setAttribute("role","presentation");
var k=f.getElementsByTagName("*");
for(var d=0;
d<k.length;
d++){var g=k[d];
var e=g.tagName.toLowerCase()=="a"?"button":"presentation";
g.setAttribute("role",e);
}var c=this._contentHiddenTextarea;
if(c){c.setAttribute("aria-hidden","true");
}},_applyAriaForLayoutTables:function(){var h=this.get_mainTable();
if(h){h.setAttribute("role","presentation");
}var g=$get(this.get_id()+"_BottomTable");
if(g){g.setAttribute("role","presentation");
}var f=h.getElementsByTagName("tr");
for(var d=0;
d<f.length;
d++){var c=f[d];
c.setAttribute("role","presentation");
var k=c.getElementsByTagName("td");
for(var e=0;
e<k.length;
e++){k[e].setAttribute("role","presentation");
}}},_updateHiddenTextarea:function(){var f=this.get_html(true);
if(this.get_mode()==a.EditModes.Html&&this.get_contentFilters()!=a.EditorFilters.None){if(!this._textSubmitFrame){var g=this._createIframe();
if(g){this._textSubmitFrame=g;
var m=this._textSubmitFrame.style;
m.position="absolute";
m.height="0px";
m.width="0px";
this.get_contentAreaElement().parentNode.appendChild(this._textSubmitFrame);
}}if(this._textSubmitFrame){var k=this._textSubmitFrame.contentWindow.document;
var l=this.get_filtersManager().getDesignContent(f);
var j=-1!=l.toLowerCase().indexOf("<html");
var h=j?this._extractDoctype(l):"";
if(!$telerik.isIE6||window.location.protocol!="https:"){k.designMode="off";
}var e=k.open("text/html","replace");
var d=j?l:"<html><head><title>New Document</title></head><body>"+l+"</body></html>";
if(typeof(e)=="undefined"){e=k;
}e.write(d);
e.close();
if(e.body){this.get_filtersManager().getDesignContentDom(e.body);
var c=j?e.getElementsByTagName("HTML")[0]:e.body;
f=h+this.get_filtersManager().getHtmlContent(c);
f=this._stripBodyTagFromContent(f);
}}}this.set_contentHiddenTextareaValue(f);
return f;
},_stripBodyTagFromContent:function(c){c=c.trim();
var d=(this.get_contentAreaMode()==a.EditorContentAreaMode.Div)?"<div":"<body";
var e=c.match(new RegExp(d+"[^>]*>","i"));
if(e&&e.index==0){c=c.substring(c.indexOf(">")+1,c.length-2-d.length);
c=c.trim();
}return c;
},_registerClientValidation:function(){if(typeof(Page_ClientValidate)=="function"){var c=Page_ClientValidate;
Page_ClientValidate=Function.createDelegate(this,function(e){var f=this.get_element();
if(f){var d=this._updateHiddenTextarea();
f.value=d;
f.setAttribute("value",d);
}f=null;
return c(e);
});
}},saveContent:function(f,d){if(this._saveContentDelegate){var c=null;
if(!this.validateMaxHtmlLength()){c=1;
}else{if(!this.validateMaxTextLength()){c=2;
}}if(c){if(d){if(d.set_cancel){d.set_cancel(true);
}}else{if(c==1){this.displayMaxHtmlLengthErrorMessage();
}else{if(c==2){this.displayMaxTextLengthErrorMessage();
}}}$telerik.cancelRawEvent(f);
return false;
}else{this.raiseEvent("submit",Sys.EventArgs.Empty);
this._updateHiddenTextarea();
}}},_registerPostBackHandlers:function(){this._saveContentDelegate=Function.createDelegate(this,this.saveContent);
var g=this._contentHiddenTextarea.form;
if(g){$telerik.addExternalHandler(g,"submit",this._saveContentDelegate);
}if(typeof(__doPostBack)!="undefined"){var h=this._saveContentDelegate;
var j=__doPostBack;
__doPostBack=function(l,m){h();
j(l,m);
};
}if(typeof(Sys.WebForms)!="undefined"&&typeof(Sys.WebForms.PageRequestManager)!="undefined"){var e=Sys.WebForms.PageRequestManager.getInstance();
if(e){if(null!=e._originalDoPostBack){var f=this._saveContentDelegate;
var c=e._originalDoPostBack;
e._originalDoPostBack=function(l,m){f();
c(l,m);
};
}if(null!=e._onSubmitStatements&&!$telerik.isIE){var d=this;
var k={};
Array.add(e._onSubmitStatements,function(){var l=d.saveContent(null,k);
return(l!=undefined)?l:true;
});
}else{e.add_initializeRequest(this._saveContentDelegate);
}}e=null;
}g=null;
},toggleEnhancedEdit:function(d){if(this.get_contentAreaMode()==a.EditorContentAreaMode.Div){var c=this.get_contentArea();
if(typeof(d)=="undefined"||null==d){d=(c.className.indexOf("reContentAreaToggle")>-1)?false:true;
}if(d){Sys.UI.DomElement.addCssClass(c,"reContentAreaToggle");
}else{Sys.UI.DomElement.removeCssClass(c,"reContentAreaToggle");
}this.updateToggleTableBorderToolState(d);
return d;
}else{if($telerik.isSafari&&typeof(d)!="undefined"&&false==this.disableContentAreaStylesheet(d)){this.get_contentWindow().setTimeout(Function.createDelegate(this,function(){this.disableContentAreaStylesheet(d);
}),200);
}else{return this.disableContentAreaStylesheet(d);
}}},disableContentAreaStylesheet:function(c){var d=this.get_document();
if(!d||!d.getElementById){return false;
}var e=d.getElementById(this._getUniqueStyleSheetId(0));
if(e){if(c==null){c=e.disabled;
}e.disabled=!c;
this.updateToggleTableBorderToolState(c);
return c;
}else{return false;
}},updateToggleTableBorderToolState:function(d){var c=this.getToolByName("ToggleTableBorder");
if(c&&c.setOn){c.setOn(d);
}},pasteHyperLink:function(g,h){var f=this.getSelection().getParentElement();
var d=f.parentNode;
if(f!=null&&f.tagName=="A"&&($telerik.isFirefox||($telerik.isIE&&f.style.cssText!=""&&!((d.tagName=="FONT"||d.tagName=="SPAN")&&d.children.length==1)))){f.parentNode.removeChild(f);
}else{this.fire("Unlink");
}var c=a.Editor.Utils.getOuterHtml(g);
if($telerik.isIE&&g.getElementsByTagName("P").length==1){c=this.replaceParagraphAndAnchor(c);
var e=f;
while(e){if(e.tagName=="P"){e.parentNode.removeChild(e);
break;
}e=e.parentNode;
}}this.pasteHtml(c,h);
},replaceParagraphAndAnchor:function(c){var d=c+"";
var e=function(k,g,f,j,h){return f+g;
};
d=d.replace(/(<A[^>]*>)\s*(<P[^>]*>)/ig,e);
d=d.replace(/(<\/P[^>]*>)\s*(<\/A[^>]*>)/ig,e);
return d;
},_saveTypedContent:function(d,c){if(this._pendingTextTypeCmd){this._pendingTextTypeCmd.update();
}if(true!=d){this._pendingTextTypeCmd=null;
}},_attachBodyHandlers:function(d){var c=null;
if(this.get_document()&&this.get_contentArea()){c=this.get_contentArea();
}if(!c){return;
}if(d){this._onResizeStartDelegate=Function.createDelegate(this,this._onResizeStart);
this._onResizeEndDelegate=Function.createDelegate(this,this._onResizeEnd);
this._onDropDelegate=Function.createDelegate(this,this._onDrop);
$telerik.addExternalHandler(c,"resizestart",this._onResizeStartDelegate);
$telerik.addExternalHandler(c,"resizeend",this._onResizeEndDelegate);
$telerik.addExternalHandler(c,"drop",this._onDropDelegate);
if($telerik.isIE){this._onDragEndDelegate=Function.createDelegate(this,this._onDragEnd);
this._onDragStartDelegate=Function.createDelegate(this,this._onDragStart);
$telerik.addExternalHandler(c,"dragend",this._onDragEndDelegate);
$telerik.addExternalHandler(c,"dragstart",this._onDragStartDelegate);
}this._onPasteDelegate=Function.createDelegate(this,this._onPaste);
this._onBeforePasteDelegate=Function.createDelegate(this,this._onBeforePaste);
if($telerik.isIE7){$telerik.addExternalHandler(c,"beforepaste",this._onBeforePasteDelegate);
}if($telerik.isIE&&!$telerik.isIE7){$telerik.addExternalHandler(c,"paste",this._onPasteDelegate);
}if($telerik.isFirefox||$telerik.isSafari){$telerik.addExternalHandler(c,"paste",this._onBeforePasteDelegate);
}}else{if(this._onResizeStartDelegate){$telerik.removeExternalHandler(c,"resizestart",this._onResizeStartDelegate);
}if(this._onResizeEndDelegate){$telerik.removeExternalHandler(c,"resizeend",this._onResizeEndDelegate);
}if(this._onDropDelegate){$telerik.removeExternalHandler(c,"drop",this._onDropDelegate);
}if(this._onDragEndDelegate){$telerik.removeExternalHandler(c,"dragend",this._onDragEndDelegate);
}if(this._onDragStartDelegate){$telerik.removeExternalHandler(c,"dragstart",this._onDragStartDelegate);
}if(this._onBeforePasteDelegate&&$telerik.isIE7){$telerik.removeExternalHandler(c,"beforepaste",this._onBeforePasteDelegate);
}if(this._onPasteDelegate&&$telerik.isIE&&!$telerik.isIE7){$telerik.removeExternalHandler(c,"paste",this._onPasteDelegate);
}if(this._onBeforePasteDelegate&&($telerik.isFirefox||$telerik.isSafari)){$telerik.removeExternalHandler(c,"paste",this._onBeforePasteDelegate);
}this._onResizeStartDelegate=null;
this._onResizeEndDelegate=null;
this._onDropDelegate=null;
this._onDragEndDelegate=null;
this._onDragStartDelegate=null;
this._onPasteDelegate=null;
this._onBeforePasteDelegate=null;
}},_initEvents:function(){var c=this;
if(!this.isIE){this.attachEventHandler("keypress",function(f){if(c._onKeyPressed(f)){f.preventDefault();
return false;
}});
if($telerik.isSafari){this.attachEventHandler("click",Function.createDelegate(this,function(f){if(f.srcElement.tagName=="IMG"){this.selectElement(f.srcElement);
}}));
}if(this.isFirefox&&this.get_contentAreaMode()!=a.EditorContentAreaMode.Div){this.attachEventHandler("click",function(f){if(!c.get_editable()){return;
}window.setTimeout(function(){c.set_editable(true);
c.setFocus();
},100);
});
}}this.attachEventHandler("keydown",function(h){if(c.isOpera){return c._onKeyDown(h);
}else{c._onKeyDown(h);
}if($telerik.isSafari){var f=c._shortCutManager.isShortCutHit(h);
if(null!=f){var g=f.get_name();
switch(g){case"Bold":case"Italic":case"Underline":$telerik.cancelRawEvent(h);
break;
}}}});
this.attachEventHandler("onmousedown",function(){c._saveTypedContent(false,"Saving typed content onmousedown");
});
this.attachEventHandler("keyup",Function.createDelegate(this,this._onKeyUp));
var d=Function.createDelegate(this,function(f){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
});
this.attachEventHandler("mouseup",d);
$telerik.addExternalHandler(document.body,"dragend",Function.createDelegate(this,this._onDocumentDragEnd));
this._attachBodyHandlers(true);
},_onKeyDown:function(p){var l=p.keyCode;
switch(l){case 46:if($telerik.isOpera&&$telerik.OperaEngine<2.7){this.get_document().execCommand("Delete");
this.get_contentArea().contentEditable=true;
if(this.get_contentAreaMode()!=a.EditorContentAreaMode.Div){this.get_document().designMode="on";
}this.get_contentArea().focus();
return $telerik.cancelRawEvent(p);
}case 8:this._shortcutHit=false;
if(this.getSelectionHtml()){this._saveTypedContent(false,"Saving typed content before allowing delete to proceed..");
this._pendingTextTypeCmd=new a.Editor.TextTypeCommand(this.getLocalizedString("Typing"),this.get_contentWindow(),this);
this._hasDeleteExecuted=true;
}if(this.isIE){var d=this;
var q=function(){var e=d.getSelectedElement();
if(e&&e.tagName=="EMBED"){e.setAttribute("hidden","true");
e.setAttribute("id","FileToDelete");
window.setTimeout(function(){var r=d.get_document().getElementById("FileToDelete");
if(r.parentNode&&r.parentNode.removeChild){r.parentNode.removeChild(r);
}},100);
$telerik.cancelRawEvent(p);
return true;
}};
var g=q();
if(g){return false;
}try{var n=d.get_document().selection.createRange();
var o=null;
if(n&&n.duplicate){o=n.duplicate();
}if(8==p.keyCode){n.moveStart("character",-1);
}else{n.moveEnd("character",1);
}if(n.parentElement().tagName=="EMBED"){n.select();
q();
if(o&&o.select){o.select();
}}}catch(h){}var k=new a.Editor.Selection(this.get_contentWindow());
if(k&&k.isControl()){var m=k.getRange();
m.execCommand("Delete");
$telerik.cancelRawEvent(p);
}}return;
}var c=p.target?p.target:p.srcElement;
if(c&&"INPUT"!=c.tagName){var j=this._shortCutManager.isShortCutHit(p);
if(null!=j&&j.get_name()=="Copy"){this._shortcutHit=false;
return;
}this._shortcutHit=(null!=j);
if(this._shortcutHit){this.fire(j.get_name());
}else{if(a.Editor.Utils.isCursorMovingKey(p.keyCode)){if(!this._hasCursorMoved){this._saveTypedContent(false,"Saving typed content before letting the cursor move");
}this._hasCursorMoved=true;
return;
}if(32==p.keyCode||13==p.keyCode||!a.Editor.Utils.isSystemKey(p.keyCode)){if(this._hasCursorMoved){this._pendingTextTypeCmd=new a.Editor.TextTypeCommand(this.getLocalizedString("Typing"),this.get_contentWindow(),this);
this.executeCommand(this._pendingTextTypeCmd);
this._hasCursorMoved=false;
return;
}if(!this._pendingTextTypeCmd){this._pendingTextTypeCmd=new a.Editor.TextTypeCommand(this.getLocalizedString("Typing"),this.get_contentWindow(),this);
this.executeCommand(this._pendingTextTypeCmd);
this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}}}if(this._shortcutHit){if($telerik.isIE||$telerik.isSafari){var f=j.get_name();
if(f=="Cut"||f=="Paste"){return;
}$telerik.cancelRawEvent(p);
}}}},_onKeyUp:function(c){if(this._hasDeleteExecuted){if(this._pendingTextTypeCmd){this.executeCommand(this._pendingTextTypeCmd);
}this._pendingTextTypeCmd=null;
this._hasDeleteExecuted=false;
return;
}if(this._pendingTextTypeCmd){return;
}if(this._pendingCutPasteCommand){this.executeCommand(this._pendingCutPasteCommand);
this._pendingCutPasteCommand=null;
}if(this._shortcutHit){return false;
}this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
},_onKeyPressed:function(n){if($telerik.isSafari&&this.get_newLineMode()!=Telerik.Web.UI.EditorNewLineModes.Br){var c=this.get_contentArea();
var g=c.childNodes.length;
if(g==0||(g==1&&c.firstChild.nodeName=="BR")){var m=this.get_document();
var k=m.createElement("P");
k.innerHTML="<br />";
c.innerHTML="";
c.appendChild(k);
this.selectElement(k);
this.getSelection().collapse();
}else{var h=this.get_contentWindow().getSelection();
var d=h&&h.rangeCount?h.getRangeAt(0):null;
var o=d?d.commonAncestorContainer:null;
if(o){if(o.nodeType==1&&o.nodeName=="DIV"){o=o.firstChild;
}var l=o.parentNode;
var f=null;
var j=[d.startContainer,d.startOffset,d.endContainer,d.endOffset];
if(n.keyCode==13&&l.nodeName=="DIV"&&l.childNodes.length==1&&((o.nodeType==3)||(o.nodeType==1&&o.nodeName=="BR"))){f=l.ownerDocument.createElement("p");
if(l.parentNode.lastchild==l){l.parentNode.appendChild(f);
}else{l.parentNode.insertBefore(f,l.nextSibling);
}f.appendChild(l);
Telerik.Web.UI.Editor.Utils.removeNode(l);
l=null;
}if(l&&l.nodeName=="BODY"&&o.nodeType==3){f=l.ownerDocument.createElement("p");
if(l.lastchild==o){l.appendChild(f);
}else{l.insertBefore(f,o.nextSibling);
}f.appendChild(o);
var q=f.nextSibling;
if(q&&q.nodeType==1&&q.nodeName=="BR"){f.parentNode.removeChild(q);
}q=null;
}else{if(l&&l.nodeName=="HTML"&&l.lastChild.innerHTML==""){var m=l.ownerDocument;
var k=m.createElement("P");
k.innerHTML="<br />";
m.body.appendChild(k);
this.selectElement(k);
this.getSelection().collapse();
}}if(f){h.removeAllRanges();
d=f.ownerDocument.createRange();
d.setStart(j[0],j[1]);
d.setEnd(j[2],j[3]);
h.addRange(d);
}}}}if(!this._pendingTextTypeCmd){this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}if(this._shortcutHit&&!this._pendingCutPasteCommand){return true;
}},_onPaste:function(h){if(this.get_stripFormattingOptions()==a.StripFormattingOptions.NoneSupressCleanMessage){return;
}var g=this.getSelection().getRange();
var d=a.Editor.Utils.getClipboardAsHtml();
var j=(this.get_contentFilters()&a.EditorFilters.RemoveScripts)>0;
var c=a.Editor.Utils.cleanPastedContent(d,this.get_stripFormattingOptions(),this.get_localization()["askwordcleaning"],j);
if(c){if($telerik.isIE9Mode){var e=new Date().getTime();
while(new Date().getTime()<e+5){}this.getSelection().selectRange(g);
this.pasteHtml(c,"Paste");
}else{var f=this;
window.setTimeout(function(){f.getSelection().selectRange(g);
f.pasteHtml(c,"Paste");
},5);
}return $telerik.cancelRawEvent(h);
}return true;
},_onBeforePaste:function(j){if(!j){return;
}if(this.get_stripFormattingOptions()==a.StripFormattingOptions.NoneSupressCleanMessage){return;
}var h=new a.Editor.GenericCommand("Paste",this.get_contentWindow(),this);
var e=this.getSelection().getRange();
var f=this.createRestorePoint();
var c=$telerik.isSafari?this.get_document():document;
var d=a.Editor.Utils.getPasteContainer(c);
d.innerHTML="";
if(this.get_contentAreaMode()!=a.EditorContentAreaMode.Div){if(d.setActive){d.setActive();
}else{if($telerik.isFirefox){var k=this.getSelection();
var l=k.getRange();
if(l.selectNodeContents){l.selectNodeContents(d);
}k.selectRange(l);
}else{if($telerik.isSafari){d.innerHTML="&nbsp;";
var k=this.getSelection();
var l=this.get_document().createRange();
l.setStart(d.firstChild,0);
l.setEnd(d.firstChild,1);
k.selectRange(l);
}}}}var g=Function.createDelegate(this,this._onAfterPaste);
window.setTimeout(function(){g(h,e,f,d);
},0);
},_onAfterPaste:function(h,e,f,k){var d=k.innerHTML;
if($telerik.isSafari){var j=d.length;
d=d.replace(/<div[^>]+id=\"radePasteHelper\"[^>]*>(.*?)<\/div>/gi,"$1<br/>");
if(j>d.length&&d.endsWith("<br/>")){d=d.substring(0,d.length-5);
}}var g=(this.get_contentFilters()&a.EditorFilters.RemoveScripts)>0;
var c=a.Editor.Utils.cleanPastedContent(d,this.get_stripFormattingOptions(),this.get_localization()["askwordcleaning"],g);
if($telerik.isSafari){Telerik.Web.UI.Editor.Utils.clearPasteContainer();
}this._pendingCutPasteCommand=null;
if($telerik.isIE){this.getSelection().selectRange(e);
}else{if(f){f.select();
}}if(c){this.pasteHtml(c,"Paste");
if($telerik.isSafari){this.getSelection().collapse(false);
}this.executeCommand(h);
}},_onResizeStart:function(f){var c=this.getSelectedElement();
if(c==f.srcElement){var d=this.get_localization()["ResizeCommand"]||"Resize";
this._pendingResizeCmd=new a.Editor.GenericCommand(d,this.get_contentWindow(),this);
}},_onResizeEnd:function(c){if(this._pendingResizeCmd){this.executeCommand(this._pendingResizeCmd);
}},_onDragStart:function(h){var g=this.get_localization()["MoveCommand"]||"Move";
this._pendingMoveCommand=new a.Editor.GenericCommand(g,this.get_contentArea(),this);
this._startRange=null;
if(!h.ctrlKey&&!h.ctrlLeft){this._startRange=this.get_contentWindow().document.selection.createRange();
if(this._startRange.length){var c=this.get_contentWindow().document.body.createTextRange();
var f=this._startRange.item(0);
if("IMG"==f.tagName&&"A"==f.parentNode.tagName&&f.parentNode.childNodes.length==1){f=f.parentNode;
}try{c.moveToElementText(f);
this._startRange=c;
}catch(d){}}}},_onDragEnd:function(g){if(this._pendingMoveCommand){if(this._startRange){var f=this.get_contentWindow().document.selection.createRange();
if(f.length){var c=this.get_contentWindow().document.body.createTextRange();
try{c.moveToElementText(f.item(0));
}catch(d){}f=c;
}try{if(f.compareEndPoints&&0!=f.compareEndPoints("StartToStart",this._startRange)&&0!=f.compareEndPoints("EndToEnd",this._startRange)){this._startRange.execCommand("Delete",false,null);
}}catch(g){}}this.executeCommand(this._pendingMoveCommand);
this._pendingMoveCommand=null;
this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}},_onDrop:function(d){this._saveTypedContent(false,"on drop operation executing");
var c=this.get_localization()["Drop"]||"Drop external content";
this._pendingDockCommand=new a.Editor.GenericCommand(c,this.get_contentWindow(),this);
},_onDocumentDragEnd:function(c){if(!this._pendingDockCommand){return;
}this.executeCommand(this._pendingDockCommand);
this._pendingDockCommand=null;
this.raiseEvent("selectionChange",Sys.EventArgs.Empty);
}};
b.registerControlProperties(a.RadEditor,{ajaxSpellCheckScriptReference:"",spellAllowAddCustom:true,spellCheckJSON:{},enableUndoRedo:true,toolAdapter:null,fullPage:null,dialogOpener:null,ribbonBar:null,links:[],colors:["","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffffff","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#f2f2f2","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#d8d8d8","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#92cddc","#fac08f","#bfbfbf","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#31859b","#e36c09","#a5a5a5","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#205867","#974806","#c00000","#ff0000","#ffc000","#ffff00","#92d050","#00b050","#00b0f0","#0070c0","#002060","#7030a0"],fontNames:["Arial","Courier New","Garamond","Georgia","MS Sans Serif","Segoe UI","Tahoma","Times New Roman","Verdana"],fontSizes:[1,2,3,4,5,6,7],symbols:["&#8364;","&#162;","&#163;","&#165;","&#164;","&#169;","&#174;","&#8482;","&#177;","&ne;","&#8776;","&#8804;","&#8805;","&#247;","&#215;","&#8734;","&#189;","&#188;","&#190;","&#178;","&#179;","&#8240;","&#182;","&#167;","&#945;","&#946;","&#916;","&#181;","&#937;","&#8721;","&#216;","&ang;","&#186;","&#171;","&raquo;","&#183;","&#8226;","&#8224;","&#8225;","&#402;"],realFontSizes:["8px","9px","10px","11px","12px","13px","14px","16px","18px","20px","22px","24px","26px","28px","32px","36px","48px","72px"],snippets:[],cssClasses:[],cssFiles:[],languages:[],paragraphs:[["<p>","Normal"],["<h1>","<h1>Heading 1</h1>"],["<h2>","<h2>Heading 2</h2>"],["<h3>","<h3>Heading 3</h3>"],["<h4>","<h4>Heading 4</h4>"],["<h5>","<h5>Heading 5</h5>"],["<h5>","<dir>Directory List</dir>"],["<menu>","<menu>Menu List</menu>"],["<pre>","<pre>Formatted</pre>"],["<address>","<address>Address</address>"]],toolsWidth:null,maxTextLength:null,maxHtmlLength:null,toolProviderID:null,autoResizeHeight:false,toolbarMode:a.EditorToolbarMode.Default,editModes:a.EditModes.All,stripFormattingOptions:a.StripFormattingOptions.None,contentFilters:a.EditorFilters.DefaultFilters,newLineMode:a.EditorNewLineModes.Br,contentAreaCssFile:"",tableLayoutCssFile:"",mozillaFlashOverlayImage:"FlashManager.gif",toolAdapterType:"",enableResize:true,toolJSON:[],modulesJSON:[],contextMenusJSON:[],skin:"Default",language:"en-us",contentWindow:null,document:null,contentArea:null,contentAreaMode:a.EditorContentAreaMode.Iframe,isInAccessibleMode:false,enableAriaSupport:false});
b.registerControlEvents(a.RadEditor,["firstShow","pasteHtml","editReady","submit","commandExecuted","commandExecuting","selectionChange","init","load","modeChange","toggleScreenMode","spellCheckLoaded"]);
a.RadEditor.registerClass("Telerik.Web.UI.RadEditor",a.RadWebControl);
})();
Type.registerNamespace("Telerik.Web.UI");
(function(){var b=$telerik.$;
var a=Telerik.Web.UI;
a.AccessibleRadEditorBase=function(d){d.set_useClassicDialogs(true);
d.removeShortCut("InsertTab");
d.addShortCut("<h2>","ALT+2");
d.addShortCut("<h3>","ALT+3");
d.addShortCut("<h4>","ALT+4");
d.addShortCut("<h5>","ALT+5");
d.addShortCut("<p>","CTRL+SHIFT+C");
d.addShortCut("TableWizard","CTRL+SHIFT+T");
this.makeAccessibleTools(d);
var c=d.get_toolAdapter();
c.setFocus=function(){var f=$telerik.getElementByClassName(d.get_element(),"reToolbarWrapper","DIV");
if(f){var e=f.getElementsByTagName("INPUT")[0];
window.setTimeout(function(){if(e&&e.focus){e.focus();
}},100);
return false;
}};
d.add_commandExecuting(Function.createDelegate(this,this.editorCommandExecuting));
};
a.AccessibleRadEditorBase.prototype={editorCommandExecuting:function(c,h){if(!h||!h.get_commandName){return;
}var o=h.get_commandName();
if(o=="LinkManager"){if($telerik.isIE){c.get_document().execCommand("CreateLink",true,null);
}else{var d=prompt("Enter a URL:","http://");
if(d){c.get_document().execCommand("CreateLink",false,d);
}}c.setFocus();
h.set_cancel(true);
}else{if(o=="MoveFocusToTextEditor"){if($telerik.isIE){c.get_document().body.focus();
}else{c.setFocus();
}h.set_cancel(true);
}else{if(o=="Underline"||o=="Italic"){h.set_cancel(true);
}else{if(o=="<h2>"||o=="<h3>"||o=="<h4>"||o=="<h5>"||o=="<p>"){c.fire("FormatBlock",{value:o});
h.set_cancel(true);
}else{if(o=="InsertTable"){var n=prompt("Enter row and column count separated by space, followed by optional heading row index and heading column index","");
if(null!=n){var l=n.split(" ");
var f=l[0]?parseInt(l[0].trim()):0;
var m=l[1]?parseInt(l[1].trim()):0;
if(f&&m&&!isNaN(f)&&!isNaN(m)){var e=Telerik.Web.UI.Editor.Utils.createTable(f,m);
this.updateHeadingRows(e,l[2]?parseInt(l[2].trim())-1:-1);
this.updateHeadingColumns(e,l[3]?parseInt(l[3].trim())-1:-1);
var g=Telerik.Web.UI.Editor.Utils.getOuterHtml(e);
c.pasteHtml(g,o);
}}h.set_cancel(true);
}}}}}},makeAccessibleTools:function(d){var g=d.get_toolAdapter().get_tools();
for(var e=0;
e<g.length;
e++){var m=g[e];
var l=Object.getType(m);
var h=null;
if(l==Telerik.Web.UI.EditorSplitButton||l.inheritsFrom(Telerik.Web.UI.EditorSplitButton)){h=this.replaceSplitButton(m,d);
}else{if(l==Telerik.Web.UI.EditorDropDown||l.inheritsFrom(Telerik.Web.UI.EditorDropDown)){h=this.replaceDropdown(m,d);
}else{h=this.replaceButton(m,d);
}}if(h){var f=m.get_element();
f.parentNode.insertBefore(h,f);
f.style.display="none";
if(h.tagName.toUpperCase()=="SELECT"){var n=m.get_name();
h.id=d.get_id()+"_"+n;
var c=document.createElement("label");
c.htmlFor=h.id;
c.style.top="-10000px";
c.style.left="-10000px";
c.style.position="absolute";
c.innerHTML=m.get_text();
f.parentNode.insertBefore(c,h);
}}}if($telerik.isIE){this.fixIEFocusProblem(g[0].get_element().previousSibling,true);
this.fixIEFocusProblem(g[g.length-1].get_element().previousSibling,false);
}},fixIEFocusProblem:function(c,f){var e=c.parentNode.parentNode.getElementsByTagName("INPUT");
var d=f?e[1]:e[e.length-2];
var g=true;
c.onfocus=function(h){if(g){if(d){d.focus();
}g=false;
window.setTimeout(function(){c.focus();
window.setTimeout(function(){g=true;
},10);
},10);
}};
},replaceButton:function(d,f){var c=document.createElement("input");
c.type="button";
c.title=d.get_text();
var g=d.get_name();
var e=g;
if(g=="MoveFocusToTextEditor"){e="Custom";
}c.className="reAccessibleTool "+e;
c.onclick=function(){f.fire(g);
};
return c;
},replaceSplitButton:function(c,d){var e=c.get_name();
if(e=="Undo"||e=="Redo"||e=="InsertTable"){return this.replaceButton(c,d);
}else{alert("No implementation for converting split button "+e+" into an accessible tool");
}},replaceDropdown:function(c,d){var o=document.createElement("select");
o.style.width=c.get_element().getElementsByTagName("SPAN")[0].style.width;
var m=[];
if(c.get_name()=="FormatBlock"){m=d.get_paragraphs();
}o.options[0]=new Option("-------------------------------","");
for(var e=0;
e<m.length;
e++){var p=m[e];
var f=p[0];
var n=p[1];
var l=d.get_shortCutManager().findShortCutByName(f);
if(l){n+=" ("+l.get_shortCutString()+")";
}o.options[o.options.length]=new Option(n,f);
}var h=false;
o.onclick=function(){if(h==true){g();
}else{if(o.click){o.click();
}h=true;
}};
o.onkeydown=function(q){if(!q){q=window.event;
}if(q.keyCode==13){g();
}else{return true;
}};
function g(){h=false;
var q=o[o.selectedIndex].value;
if(q){d.fire("FormatBlock",{value:q});
}o.selectedIndex=0;
}return o;
},updateHeadingRows:function(c,f){if(isNaN(f)||f<0){return;
}var g=c.getElementsByTagName("THEAD")[0];
if(!g){g=c.createTHead();
}for(i=0;
i<=f;
i++){var d=c.rows[0];
var e=g.insertRow(-1);
for(j=0;
j<d.cells.length;
j++){var h=c.ownerDocument.createElement(i==f?"TH":"TD");
e.insertBefore(h,null);
}c.deleteRow(c.rows.length-1);
}},updateHeadingColumns:function(e,c){if(isNaN(c)||c<0){return;
}for(k=0;
k<e.tBodies.length;
k++){var g=e.tBodies[k];
for(i=0;
i<g.rows.length;
i++){var d=g.rows[i];
for(j=0;
j<d.cells.length;
j++){var f=j==c?"TH":"TD";
this.changeCellType(d.cells[j],f);
}}}},changeCellType:function(e,d){if(e.tagName.toUpperCase()!=d.toUpperCase()){var c=e.ownerDocument.createElement(d.toUpperCase());
e.parentNode.replaceChild(c,e);
}}};
a.AccessibleRadEditor=function(c){a.AccessibleRadEditor.initializeBase(this,[c]);
};
a.AccessibleRadEditor.prototype={initialize:function(){a.AccessibleRadEditor.callBaseMethod(this,"initialize");
},dispose:function(){a.AccessibleRadEditor.callBaseMethod(this,"dispose");
}};
a.AccessibleRadEditor.registerClass("Telerik.Web.UI.AccessibleRadEditor",a.RadEditor);
})();
