Type.registerNamespace("Telerik.Web.UI");
Telerik.Web.UI.LayoutBuilder=function(a){Telerik.Web.UI.LayoutBuilder.initializeBase(this,[a]);
this._requireCellId=false;
this._layoutXmlFile="";
this._layoutWidth="";
this._layoutHeight="";
this._idCounter=100;
};
Telerik.Web.UI.LayoutBuilder.prototype={initialize:function(){Telerik.Web.UI.LayoutBuilder.callBaseMethod(this,"initialize");
this.loadClientState();
this.updateClientState();
},get_requireCellId:function(){return this._requireCellId;
},set_requireCellId:function(a){this._requireCellId=a;
},get_layoutXmlFile:function(){return this._layoutXmlFile;
},set_layoutXmlFile:function(a){this._layoutXmlFile=a;
},get_layoutWidth:function(){return this._layoutWidth;
},set_layoutWidth:function(b){this._layoutWidth=b;
var a=this._selectedTable;
if(a){tabel.removeAttribute("width");
tabel.style.width=this._layoutWidth;
}},get_layoutHeight:function(){return this._layoutHeight;
},set_layoutHeight:function(b){this._layoutHeight=b;
var a=this._selectedTable;
if(a){tabel.removeAttribute("height");
tabel.style.height=this._layoutHeight;
}},_getElementAttributesHtml:function(c){var a="";
if(c){var g=c.attributes;
var e=g.length;
for(var b=0;
b<e;
b++){var h=g[b].name;
var d=c.getAttribute(h,2);
if(d&&!((h=="colSpan"||h=="rowSpan")&&d=="1")&&h!="tabIndex"&&h!="contentEditable"&&h!="style"){a+=" "+h.toLowerCase()+'="'+d+'"';
}}var f=c.style.cssText;
if(f){a+=' style="'+f+'"';
}}return a;
},get_serializedTableOuterHtml:function(){if(!this._selectedTable){return"";
}var c="<table ";
c+=this._getElementAttributesHtml(this._selectedTable);
c+=" >";
var k=this._selectedTable.rows;
var b=k.length;
for(var d=0;
d<b;
d++){var f=k[d];
c+="<tr";
c+=this._getElementAttributesHtml(f);
c+=">";
var g=f.cells;
var a=g.length;
for(var e=0;
e<a;
e++){var h=g[e];
c+="<td";
c+=this._getElementAttributesHtml(h);
c+=" >";
c+="<![CDATA["+h.innerHTML+"]]></td>";
}c+="</tr>";
}c+="</table>";
return c;
},_getUniqueCellId:function(){this._idCounter++;
return(this.get_id()+this._idCounter+(new Date()-100));
},_setCellId:function(b){if(!b){return;
}if(this._requireCellId){var a=b.getAttribute("id");
if(!a){a=this._getUniqueCellId();
b.setAttribute("id",a);
}}},_setAllCellsId:function(){if(!this._selectedTable){return;
}var f=this._selectedTable.rows;
var b=f.length;
for(var c=0;
c<b;
c++){var e=f[c].cells;
var a=e.length;
for(var d=0;
d<a;
d++){this._setCellId(e[d]);
}}},loadClientState:function(){var e=$get(this.get_clientStateFieldID());
if(e){var d=e.value;
var b=Sys.Serialization.JavaScriptSerializer.deserialize(d);
if(b.TableHtml){var f=this.decodePostbackContent(b.TableHtml);
f=this.unEscapeNewLines(f);
var a=document.createElement("div");
a.innerHTML=f;
var c=a.firstChild;
if(c&&c.tagName=="TABLE"){this.set_selectedTable(c);
}}}},saveClientState:function(){var b=this.get_serializedTableOuterHtml();
var a={TableHtml:(this._selectedTable)?this.encodePostbackContent(b):""};
return Sys.Serialization.JavaScriptSerializer.serialize(a);
},escapeNewLines:function(b){var a=b.replace(/\n/gi,"&nbsp;<telerikcr />");
a=a.replace(/\r/gi,"<teleriklf />");
return a;
},unEscapeNewLines:function(b){var a=b.replace(/(&nbsp;)?<telerikcr\s*\/>/gi,"\n");
a=a.replace(/<teleriklf\s*\/>/gi,"\r");
return a;
},_encodeSelectedTable:function(b,a){var d=new Array("%","<",">","!",'"',"#","$","&","'","(",")",",",":",";","=","?","[","]","\\","^","`","{","|","}","~","+");
var c=b;
if(a){for(var e=0;
e<d.length;
e++){c=c.replace(new RegExp("\\x"+d[e].charCodeAt(0).toString(16),"ig"),"%"+d[e].charCodeAt(0).toString(16));
}}else{for(var e=d.length-1;
e>=0;
e--){c=c.replace(new RegExp("%"+d[e].charCodeAt(0).toString(16),"ig"),d[e]);
}}return c;
},encodePostbackContent:function(a){return this._encodeSelectedTable(a,true);
},decodePostbackContent:function(a){return this._encodeSelectedTable(a,false);
},_insertCell:function(d,e,a,c){var b=[];
b[0]=d;
b[1]=e;
b[2]=a;
b[3]=c;
var f=Telerik.Web.UI.LayoutBuilder.callBaseMethod(this,"_insertCell",b);
this._setCellId(f);
return f;
},executeCommand:function(c,b){var a=[];
a[0]=c;
a[1]=b;
Telerik.Web.UI.LayoutBuilder.callBaseMethod(this,"executeCommand",a);
this.updateClientState();
},set_selectedTable:function(e){var b=[];
b[0]=e;
Telerik.Web.UI.LayoutBuilder.callBaseMethod(this,"set_selectedTable",b);
if(this._requireCellId){this._setAllCellsId();
}this.updateClientState();
var c=this._selectedTable;
if(c){var d=c.style.width;
if(!d){d=c.getAttribute("width");
}this._layoutWidth=d;
var a=c.style.height;
if(!a){a=c.getAttribute("height");
}this._layoutHeight=a;
}}};
Telerik.Web.UI.LayoutBuilder.registerClass("Telerik.Web.UI.LayoutBuilder",Telerik.Web.UI.LayoutBuilderEngine);
